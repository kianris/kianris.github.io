/*! jQuery v2.0.3 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
*/

/*!
 * EaselJS
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2010 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

/*!
* @license PreloadJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2013 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/

/*!
 * @license SoundJS
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2011-2013 gskinner.com, inc.
 *
 * Distributed under the terms of the MIT license.
 * http://www.opensource.org/licenses/mit-license.html
 *
 * This notice shall be included in all copies or substantial portions of the Software.
 */

/* Copyright (c) 2007 Scott Lembcke
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

/* Copyright (c) 2007 Scott Lembcke
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

/* Copyright (c) 2010 Scott Lembcke
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

/* Copyright (c) 2009 Scott Lembcke
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

/**
 * Copyright 2014 Tim Down.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*!
 * EventEmitter v4.2.9 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */

/**
 * Heir v3.0.0 - http://git.io/F87mKg
 * Oliver Caldwell - http://oli.me.uk/
 * Unlicense - http://unlicense.org/
 */

// Copyright 2013 Mauricio Santos. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
//
// Some documentation is borrowed from the official Java API
// as it serves the same porpose.

!function(t){define("lib/jquery",[],function(){return function(){return function(t,e){function n(t){var e=t.length,n=st.type(t);return st.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){var e=ft[t]={};return st.each(t.match(at)||[],function(t,n){e[n]=!0}),e}function r(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=st.expando+Math.random()}function s(t,n,i){var r;if(i===e&&1===t.nodeType)if(r="data-"+n.replace(yt,"-$1").toLowerCase(),i=t.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:vt.test(i)?JSON.parse(i):i}catch(s){}gt.set(t,n,i)}else i=e;return i}function o(){return!0}function a(){return!1}function c(){try{return W.activeElement}catch(t){}}function l(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function h(t,e,n){if(st.isFunction(e))return st.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return st.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(At.test(e))return st.filter(e,t,n);e=st.filter(e,t)}return st.grep(t,function(t){return et.call(e,t)>=0!==n})}function u(t,e){return st.nodeName(t,"table")&&st.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function p(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function d(t){var e=Bt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function f(t,e){for(var n=t.length,i=0;n>i;i++)mt.set(t[i],"globalEval",!e||mt.get(e[i],"globalEval"))}function g(t,e){var n,i,r,s,o,a,c,l;if(1===e.nodeType){if(mt.hasData(t)&&(s=mt.access(t),o=mt.set(e,s),l=s.events)){delete o.handle,o.events={};for(r in l)for(n=0,i=l[r].length;i>n;n++)st.event.add(e,r,l[r][n])}gt.hasData(t)&&(a=gt.access(t),c=st.extend({},a),gt.set(e,c))}}function m(t,n){var i=t.getElementsByTagName?t.getElementsByTagName(n||"*"):t.querySelectorAll?t.querySelectorAll(n||"*"):[];return n===e||n&&st.nodeName(t,n)?st.merge([t],i):i}function v(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Nt.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function y(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=Zt.length;r--;)if(e=Zt[r]+n,e in t)return e;return i}function _(t,e){return t=e||t,"none"===st.css(t,"display")||!st.contains(t.ownerDocument,t)}function b(e){return t.getComputedStyle(e,null)}function x(t,e){for(var n,i,r,s=[],o=0,a=t.length;a>o;o++)i=t[o],i.style&&(s[o]=mt.get(i,"olddisplay"),n=i.style.display,e?(s[o]||"none"!==n||(i.style.display=""),""===i.style.display&&_(i)&&(s[o]=mt.access(i,"olddisplay",T(i.nodeName)))):s[o]||(r=_(i),(n&&"none"!==n||!r)&&mt.set(i,"olddisplay",r?n:st.css(i,"display"))));for(o=0;a>o;o++)i=t[o],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?s[o]||"":"none"));return t}function w(t,e,n){var i=Vt.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function E(t,e,n,i,r){for(var s=n===(i?"border":"content")?4:"width"===e?1:0,o=0;4>s;s+=2)"margin"===n&&(o+=st.css(t,n+Kt[s],!0,r)),i?("content"===n&&(o-=st.css(t,"padding"+Kt[s],!0,r)),"margin"!==n&&(o-=st.css(t,"border"+Kt[s]+"Width",!0,r))):(o+=st.css(t,"padding"+Kt[s],!0,r),"padding"!==n&&(o+=st.css(t,"border"+Kt[s]+"Width",!0,r)));return o}function S(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,s=b(t),o=st.support.boxSizing&&"border-box"===st.css(t,"boxSizing",!1,s);if(0>=r||null==r){if(r=qt(t,e,s),(0>r||null==r)&&(r=t.style[e]),Qt.test(r))return r;i=o&&(st.support.boxSizingReliable||r===t.style[e]),r=parseFloat(r)||0}return r+E(t,e,n||(o?"border":"content"),i,s)+"px"}function T(t){var e=W,n=zt[t];return n||(n=L(t,e),"none"!==n&&n||(Xt=(Xt||st("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(Xt[0].contentWindow||Xt[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=L(t,e),Xt.detach()),zt[t]=n),n}function L(t,e){var n=st(e.createElement(t)).appendTo(e.body),i=st.css(n[0],"display");return n.remove(),i}function C(t,e,n,i){var r;if(st.isArray(e))st.each(e,function(e,r){n||ee.test(t)?i(t,r):C(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==st.type(e))i(t,e);else for(r in e)C(t+"["+r+"]",e[r],n,i)}function A(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(at)||[];if(st.isFunction(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function j(t,n,i,r){function s(c){var l;return o[c]=!0,st.each(t[c]||[],function(t,c){var h=c(n,i,r);return"string"!=typeof h||a||o[h]?a?!(l=h):e:(n.dataTypes.unshift(h),s(h),!1)}),l}var o={},a=t===ye;return s(n.dataTypes[0])||!o["*"]&&s("*")}function k(t,n){var i,r,s=st.ajaxSettings.flatOptions||{};for(i in n)n[i]!==e&&((s[i]?t:r||(r={}))[i]=n[i]);return r&&st.extend(!0,t,r),t}function I(t,n,i){for(var r,s,o,a,c=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),r===e&&(r=t.mimeType||n.getResponseHeader("Content-Type"));if(r)for(s in c)if(c[s]&&c[s].test(r)){l.unshift(s);break}if(l[0]in i)o=l[0];else{for(s in i){if(!l[0]||t.converters[s+" "+l[0]]){o=s;break}a||(a=s)}o=o||a}return o?(o!==l[0]&&l.unshift(o),i[o]):e}function M(t,e,n,i){var r,s,o,a,c,l={},h=t.dataTypes.slice();if(h[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(s=h.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!c&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=s,s=h.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(o=l[c+" "+s]||l["* "+s],!o)for(r in l)if(a=r.split(" "),a[1]===s&&(o=l[c+" "+a[0]]||l["* "+a[0]])){o===!0?o=l[r]:l[r]!==!0&&(s=a[0],h.unshift(a[1]));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(u){return{state:"parsererror",error:o?u:"No conversion from "+c+" to "+s}}}return{state:"success",data:e}}function P(){return setTimeout(function(){Ce=e}),Ce=st.now()}function D(t,e,n){for(var i,r=(Pe[e]||[]).concat(Pe["*"]),s=0,o=r.length;o>s;s++)if(i=r[s].call(n,e,t))return i}function R(t,e,n){var i,r,s=0,o=Me.length,a=st.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var e=Ce||P(),n=Math.max(0,l.startTime+l.duration-e),i=n/l.duration||0,s=1-i,o=0,c=l.tweens.length;c>o;o++)l.tweens[o].run(s);return a.notifyWith(t,[l,s,n]),1>s&&c?n:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:st.extend({},e),opts:st.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Ce||P(),duration:n.duration,tweens:[],createTween:function(e,n){var i=st.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)l.tweens[n].run(1);return e?a.resolveWith(t,[l,e]):a.rejectWith(t,[l,e]),this}}),h=l.props;for(N(h,l.opts.specialEasing);o>s;s++)if(i=Me[s].call(l,t,h,l.opts))return i;return st.map(h,D,l),st.isFunction(l.opts.start)&&l.opts.start.call(t,l),st.fx.timer(st.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function N(t,e){var n,i,r,s,o;for(n in t)if(i=st.camelCase(n),r=e[i],s=t[n],st.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),o=st.cssHooks[i],o&&"expand"in o){s=o.expand(s),delete t[i];for(n in s)n in t||(t[n]=s[n],e[n]=r)}else e[i]=r}function O(t,n,i){var r,s,o,a,c,l,h=this,u={},p=t.style,d=t.nodeType&&_(t),f=mt.get(t,"fxshow");i.queue||(c=st._queueHooks(t,"fx"),null==c.unqueued&&(c.unqueued=0,l=c.empty.fire,c.empty.fire=function(){c.unqueued||l()}),c.unqueued++,h.always(function(){h.always(function(){c.unqueued--,st.queue(t,"fx").length||c.empty.fire()})})),1===t.nodeType&&("height"in n||"width"in n)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===st.css(t,"display")&&"none"===st.css(t,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(r in n)if(s=n[r],je.exec(s)){if(delete n[r],o=o||"toggle"===s,s===(d?"hide":"show")){if("show"!==s||!f||f[r]===e)continue;d=!0}u[r]=f&&f[r]||st.style(t,r)}if(!st.isEmptyObject(u)){f?"hidden"in f&&(d=f.hidden):f=mt.access(t,"fxshow",{}),o&&(f.hidden=!d),d?st(t).show():h.done(function(){st(t).hide()}),h.done(function(){var e;mt.remove(t,"fxshow");for(e in u)st.style(t,e,u[e])});for(r in u)a=D(d?f[r]:0,r,h),r in f||(f[r]=a.start,d&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function F(t,e,n,i,r){return new F.prototype.init(t,e,n,i,r)}function B(t,e){var n,i={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)n=Kt[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function H(t){return st.isWindow(t)?t:9===t.nodeType&&t.defaultView}var U,q,X=typeof e,G=t.location,W=t.document,V=W.documentElement,Q=t.jQuery,Y=t.$,z={},$=[],J="2.0.3",K=$.concat,Z=$.push,tt=$.slice,et=$.indexOf,nt=z.toString,it=z.hasOwnProperty,rt=J.trim,st=function(t,e){return new st.fn.init(t,e,U)},ot=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,at=/\S+/g,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,lt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ht=/^-ms-/,ut=/-([\da-z])/gi,pt=function(t,e){return e.toUpperCase()},dt=function(){W.removeEventListener("DOMContentLoaded",dt,!1),t.removeEventListener("load",dt,!1),st.ready()};st.fn=st.prototype={jquery:J,constructor:st,init:function(t,n,i){var r,s;if(!t)return this;if("string"==typeof t){if(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ct.exec(t),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(r[1]){if(n=n instanceof st?n[0]:n,st.merge(this,st.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:W,!0)),lt.test(r[1])&&st.isPlainObject(n))for(r in n)st.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}return s=W.getElementById(r[2]),s&&s.parentNode&&(this.length=1,this[0]=s),this.context=W,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):st.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),st.makeArray(t,this))},selector:"",length:0,toArray:function(){return tt.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=st.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return st.each(this,t,e)},ready:function(t){return st.ready.promise().done(t),this},slice:function(){return this.pushStack(tt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(st.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice},st.fn.init.prototype=st.fn,st.extend=st.fn.extend=function(){var t,n,i,r,s,o,a=arguments[0]||{},c=1,l=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[1]||{},c=2),"object"==typeof a||st.isFunction(a)||(a={}),l===c&&(a=this,--c);l>c;c++)if(null!=(t=arguments[c]))for(n in t)i=a[n],r=t[n],a!==r&&(h&&r&&(st.isPlainObject(r)||(s=st.isArray(r)))?(s?(s=!1,o=i&&st.isArray(i)?i:[]):o=i&&st.isPlainObject(i)?i:{},a[n]=st.extend(h,o,r)):r!==e&&(a[n]=r));return a},st.extend({expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===st&&(t.$=Y),e&&t.jQuery===st&&(t.jQuery=Q),st},isReady:!1,readyWait:1,holdReady:function(t){t?st.readyWait++:st.ready(!0)},ready:function(t){(t===!0?--st.readyWait:st.isReady)||(st.isReady=!0,t!==!0&&--st.readyWait>0||(q.resolveWith(W,[st]),st.fn.trigger&&st(W).trigger("ready").off("ready")))},isFunction:function(t){return"function"===st.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?z[nt.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==st.type(t)||t.nodeType||st.isWindow(t))return!1;try{if(t.constructor&&!it.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||W;var i=lt.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=st.buildFragment([t],e,r),r&&st(r).remove(),st.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var n,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,n=i.parseFromString(t,"text/xml")}catch(r){n=e}return(!n||n.getElementsByTagName("parsererror").length)&&st.error("Invalid XML: "+t),n},noop:function(){},globalEval:function(t){var e,n=eval;t=st.trim(t),t&&(1===t.indexOf("use strict")?(e=W.createElement("script"),e.text=t,W.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ht,"ms-").replace(ut,pt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,s=0,o=t.length,a=n(t);if(i){if(a)for(;o>s&&(r=e.apply(t[s],i),r!==!1);s++);else for(s in t)if(r=e.apply(t[s],i),r===!1)break}else if(a)for(;o>s&&(r=e.call(t[s],s,t[s]),r!==!1);s++);else for(s in t)if(r=e.call(t[s],s,t[s]),r===!1)break;return t},trim:function(t){return null==t?"":rt.call(t)},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?st.merge(i,"string"==typeof t?[t]:t):Z.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:et.call(e,t,n)},merge:function(t,n){var i=n.length,r=t.length,s=0;if("number"==typeof i)for(;i>s;s++)t[r++]=n[s];else for(;n[s]!==e;)t[r++]=n[s++];return t.length=r,t},grep:function(t,e,n){var i,r=[],s=0,o=t.length;for(n=!!n;o>s;s++)i=!!e(t[s],s),n!==i&&r.push(t[s]);return r},map:function(t,e,i){var r,s=0,o=t.length,a=n(t),c=[];if(a)for(;o>s;s++)r=e(t[s],s,i),null!=r&&(c[c.length]=r);else for(s in t)r=e(t[s],s,i),null!=r&&(c[c.length]=r);return K.apply([],c)},guid:1,proxy:function(t,n){var i,r,s;return"string"==typeof n&&(i=t[n],n=t,t=i),st.isFunction(t)?(r=tt.call(arguments,2),s=function(){return t.apply(n||this,r.concat(tt.call(arguments)))},s.guid=t.guid=t.guid||st.guid++,s):e},access:function(t,n,i,r,s,o,a){var c=0,l=t.length,h=null==i;if("object"===st.type(i)){s=!0;for(c in i)st.access(t,n,c,i[c],!0,o,a)}else if(r!==e&&(s=!0,st.isFunction(r)||(a=!0),h&&(a?(n.call(t,r),n=null):(h=n,n=function(t,e,n){return h.call(st(t),n)})),n))for(;l>c;c++)n(t[c],i,a?r:r.call(t[c],c,n(t[c],i)));return s?t:h?n.call(t):l?n(t[0],i):o},now:Date.now,swap:function(t,e,n,i){var r,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];r=n.apply(t,i||[]);for(s in e)t.style[s]=o[s];return r}}),st.ready.promise=function(e){return q||(q=st.Deferred(),"complete"===W.readyState?setTimeout(st.ready):(W.addEventListener("DOMContentLoaded",dt,!1),t.addEventListener("load",dt,!1))),q.promise(e)},st.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){z["[object "+e+"]"]=e.toLowerCase()}),U=st(W),function(t,e){function n(t,e,n,i){var r,s,o,a,c,l,h,u,f,g;if((e?e.ownerDocument||e:H)!==M&&I(e),e=e||M,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(D&&!i){if(r=_t.exec(t))if(o=r[1]){if(9===a){if(s=e.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(o))&&F(e,s)&&s.id===o)return n.push(s),n}else{if(r[2])return tt.apply(n,e.getElementsByTagName(t)),n;if((o=r[3])&&E.getElementsByClassName&&e.getElementsByClassName)return tt.apply(n,e.getElementsByClassName(o)),n}if(E.qsa&&(!R||!R.test(t))){if(u=h=B,f=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(l=p(t),(h=e.getAttribute("id"))?u=h.replace(wt,"\\$&"):e.setAttribute("id",u),u="[id='"+u+"'] ",c=l.length;c--;)l[c]=u+d(l[c]);f=dt.test(t)&&e.parentNode||e,g=l.join(",")}if(g)try{return tt.apply(n,f.querySelectorAll(g)),n}catch(m){}finally{h||e.removeAttribute("id")}}}return x(t.replace(ht,"$1"),e,n,i)}function i(){function t(n,i){return e.push(n+=" ")>T.cacheLength&&delete t[e.shift()],t[n]=i}var e=[];return t}function r(t){return t[B]=!0,t}function s(t){var e=M.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=t.length;i--;)T.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||z)-(~t.sourceIndex||z);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function c(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function h(t){return r(function(e){return e=+e,r(function(n,i){for(var r,s=t([],n.length,e),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))})})}function u(){}function p(t,e){var i,r,s,o,a,c,l,h=G[t+" "];if(h)return e?0:h.slice(0);for(a=t,c=[],l=T.preFilter;a;){(!i||(r=ut.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),c.push(s=[])),i=!1,(r=pt.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(ht," ")}),a=a.slice(i.length));for(o in T.filter)!(r=vt[o].exec(a))||l[o]&&!(r=l[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return e?a.length:a?n.error(t):G(t,c).slice(0)}function d(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,r=n&&"parentNode"===i,s=q++;return e.first?function(e,n,s){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,s)}:function(e,n,o){var a,c,l,h=U+" "+s;if(o){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,o))return!0}else for(;e=e[i];)if(1===e.nodeType||r)if(l=e[B]||(e[B]={}),(c=l[i])&&c[0]===h){if((a=c[1])===!0||a===S)return a===!0}else if(c=l[i]=[h],c[1]=t(e,n,o)||S,c[1]===!0)return!0}}function g(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function m(t,e,n,i,r){for(var s,o=[],a=0,c=t.length,l=null!=e;c>a;a++)(s=t[a])&&(!n||n(s,i,r))&&(o.push(s),l&&e.push(a));return o}function v(t,e,n,i,s,o){return i&&!i[B]&&(i=v(i)),s&&!s[B]&&(s=v(s,o)),r(function(r,o,a,c){var l,h,u,p=[],d=[],f=o.length,g=r||b(e||"*",a.nodeType?[a]:a,[]),v=!t||!r&&e?g:m(g,p,t,a,c),y=n?s||(r?t:f||i)?[]:o:v;if(n&&n(v,y,a,c),i)for(l=m(y,d),i(l,[],a,c),h=l.length;h--;)(u=l[h])&&(y[d[h]]=!(v[d[h]]=u));if(r){if(s||t){if(s){for(l=[],h=y.length;h--;)(u=y[h])&&l.push(v[h]=u);s(null,y=[],l,c)}for(h=y.length;h--;)(u=y[h])&&(l=s?nt.call(r,u):p[h])>-1&&(r[l]=!(o[l]=u))}}else y=m(y===o?y.splice(f,y.length):y),s?s(null,o,y,c):tt.apply(o,y)})}function y(t){for(var e,n,i,r=t.length,s=T.relative[t[0].type],o=s||T.relative[" "],a=s?1:0,c=f(function(t){return t===e},o,!0),l=f(function(t){return nt.call(e,t)>-1},o,!0),h=[function(t,n,i){return!s&&(i||n!==j)||((e=n).nodeType?c(t,n,i):l(t,n,i))}];r>a;a++)if(n=T.relative[t[a].type])h=[f(g(h),n)];else{if(n=T.filter[t[a].type].apply(null,t[a].matches),n[B]){for(i=++a;r>i&&!T.relative[t[i].type];i++);return v(a>1&&g(h),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ht,"$1"),n,i>a&&y(t.slice(a,i)),r>i&&y(t=t.slice(i)),r>i&&d(t))}h.push(n)}return g(h)}function _(t,e){var i=0,s=e.length>0,o=t.length>0,a=function(r,a,c,l,h){var u,p,d,f=[],g=0,v="0",y=r&&[],_=null!=h,b=j,x=r||o&&T.find.TAG("*",h&&a.parentNode||a),w=U+=null==b?1:Math.random()||.1;for(_&&(j=a!==M&&a,S=i);null!=(u=x[v]);v++){if(o&&u){for(p=0;d=t[p++];)if(d(u,a,c)){l.push(u);break}_&&(U=w,S=++i)}s&&((u=!d&&u)&&g--,r&&y.push(u))}if(g+=v,s&&v!==g){for(p=0;d=e[p++];)d(y,f,a,c);if(r){if(g>0)for(;v--;)y[v]||f[v]||(f[v]=K.call(l));f=m(f)}tt.apply(l,f),_&&!r&&f.length>0&&g+e.length>1&&n.uniqueSort(l)}return _&&(U=w,j=b),y};return s?r(a):a}function b(t,e,i){for(var r=0,s=e.length;s>r;r++)n(t,e[r],i);return i}function x(t,e,n,i){var r,s,o,a,c,l=p(t);if(!i&&1===l.length){if(s=l[0]=l[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&E.getById&&9===e.nodeType&&D&&T.relative[s[1].type]){if(e=(T.find.ID(o.matches[0].replace(Et,St),e)||[])[0],!e)return n;t=t.slice(s.shift().value.length)}for(r=vt.needsContext.test(t)?0:s.length;r--&&(o=s[r],!T.relative[a=o.type]);)if((c=T.find[a])&&(i=c(o.matches[0].replace(Et,St),dt.test(s[0].type)&&e.parentNode||e))){if(s.splice(r,1),t=i.length&&d(s),!t)return tt.apply(n,i),n;break}}return A(t,l)(i,e,!D,n,dt.test(t)),n}var w,E,S,T,L,C,A,j,k,I,M,P,D,R,N,O,F,B="sizzle"+-new Date,H=t.document,U=0,q=0,X=i(),G=i(),W=i(),V=!1,Q=function(t,e){return t===e?(V=!0,0):0},Y=typeof e,z=1<<31,$={}.hasOwnProperty,J=[],K=J.pop,Z=J.push,tt=J.push,et=J.slice,nt=J.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",at=ot.replace("w","w#"),ct="\\["+rt+"*("+ot+")"+rt+"*(?:([*^$|!~]?=)"+rt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+at+")|)|)"+rt+"*\\]",lt=":("+ot+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ct.replace(3,8)+")*)|.*)\\)|)",ht=RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),ut=RegExp("^"+rt+"*,"+rt+"*"),pt=RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),dt=RegExp(rt+"*[+~]"),ft=RegExp("="+rt+"*([^\\]'\"]*)"+rt+"*\\]","g"),gt=RegExp(lt),mt=RegExp("^"+at+"$"),vt={ID:RegExp("^#("+ot+")"),CLASS:RegExp("^\\.("+ot+")"),TAG:RegExp("^("+ot.replace("w","w*")+")"),ATTR:RegExp("^"+ct),PSEUDO:RegExp("^"+lt),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:RegExp("^(?:"+it+")$","i"),needsContext:RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},yt=/^[^{]+\{\s*\[native \w/,_t=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/^(?:input|select|textarea|button)$/i,xt=/^h\d$/i,wt=/'|\\/g,Et=RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),St=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{tt.apply(J=et.call(H.childNodes),H.childNodes),J[H.childNodes.length].nodeType}catch(Tt){tt={apply:J.length?function(t,e){Z.apply(t,et.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}C=n.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},E=n.support={},I=n.setDocument=function(t){var n=t?t.ownerDocument||t:H,i=n.defaultView;return n!==M&&9===n.nodeType&&n.documentElement?(M=n,P=n.documentElement,D=!C(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){I()}),E.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),E.getElementsByTagName=s(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),E.getElementsByClassName=s(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),E.getById=s(function(t){return P.appendChild(t).id=B,!n.getElementsByName||!n.getElementsByName(B).length}),E.getById?(T.find.ID=function(t,e){if(typeof e.getElementById!==Y&&D){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(t){var e=t.replace(Et,St);return function(t){return t.getAttribute("id")===e}}):(delete T.find.ID,T.filter.ID=function(t){var e=t.replace(Et,St);return function(t){var n=typeof t.getAttributeNode!==Y&&t.getAttributeNode("id");return n&&n.value===e}}),T.find.TAG=E.getElementsByTagName?function(t,n){return typeof n.getElementsByTagName!==Y?n.getElementsByTagName(t):e}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},T.find.CLASS=E.getElementsByClassName&&function(t,n){return typeof n.getElementsByClassName!==Y&&D?n.getElementsByClassName(t):e},N=[],R=[],(E.qsa=yt.test(n.querySelectorAll))&&(s(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||R.push("\\["+rt+"*(?:value|"+it+")"),t.querySelectorAll(":checked").length||R.push(":checked")}),s(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&R.push("[*^$]="+rt+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(E.matchesSelector=yt.test(O=P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&s(function(t){E.disconnectedMatch=O.call(t,"div"),O.call(t,"[s!='']:x"),N.push("!=",lt)}),R=R.length&&RegExp(R.join("|")),N=N.length&&RegExp(N.join("|")),F=yt.test(P.contains)||P.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Q=P.compareDocumentPosition?function(t,e){if(t===e)return V=!0,0;var i=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return i?1&i||!E.sortDetached&&e.compareDocumentPosition(t)===i?t===n||F(H,t)?-1:e===n||F(H,e)?1:k?nt.call(k,t)-nt.call(k,e):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var i,r=0,s=t.parentNode,o=e.parentNode,c=[t],l=[e];if(t===e)return V=!0,0;if(!s||!o)return t===n?-1:e===n?1:s?-1:o?1:k?nt.call(k,t)-nt.call(k,e):0;if(s===o)return a(t,e);for(i=t;i=i.parentNode;)c.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;c[r]===l[r];)r++;return r?a(c[r],l[r]):c[r]===H?-1:l[r]===H?1:0},n):M},n.matches=function(t,e){return n(t,null,null,e)},n.matchesSelector=function(t,e){if((t.ownerDocument||t)!==M&&I(t),e=e.replace(ft,"='$1']"),!(!E.matchesSelector||!D||N&&N.test(e)||R&&R.test(e)))try{var i=O.call(t,e);if(i||E.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return n(e,M,null,[t]).length>0},n.contains=function(t,e){return(t.ownerDocument||t)!==M&&I(t),F(t,e)},n.attr=function(t,n){(t.ownerDocument||t)!==M&&I(t);var i=T.attrHandle[n.toLowerCase()],r=i&&$.call(T.attrHandle,n.toLowerCase())?i(t,n,!D):e;return r===e?E.attributes||!D?t.getAttribute(n):(r=t.getAttributeNode(n))&&r.specified?r.value:null:r},n.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},n.uniqueSort=function(t){var e,n=[],i=0,r=0;if(V=!E.detectDuplicates,k=!E.sortStable&&t.slice(0),t.sort(Q),V){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return t},L=n.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=L(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=L(e);return n},T=n.selectors={cacheLength:50,createPseudo:r,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Et,St),t[3]=(t[4]||t[5]||"").replace(Et,St),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||n.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&n.error(t[0]),t},PSEUDO:function(t){var n,i=!t[5]&&t[2];return vt.CHILD.test(t[0])?null:(t[3]&&t[4]!==e?t[2]=t[4]:i&&gt.test(i)&&(n=p(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(t[0]=t[0].slice(0,n),t[2]=i.slice(0,n)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Et,St).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=X[t+" "];return e||(e=RegExp("(^|"+rt+")"+t+"("+rt+"|$)"))&&X(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==Y&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(r){var s=n.attr(r,t);return null==s?"!="===e:e?(s+="","="===e?s===i:"!="===e?s!==i:"^="===e?i&&0===s.indexOf(i):"*="===e?i&&s.indexOf(i)>-1:"$="===e?i&&s.slice(-i.length)===i:"~="===e?(" "+s+" ").indexOf(i)>-1:"|="===e?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,c){var l,h,u,p,d,f,g=s!==o?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!c&&!a;if(m){if(s){for(;g;){for(u=e;u=u[g];)if(a?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&y){for(h=m[B]||(m[B]={}),l=h[t]||[],d=l[0]===U&&l[1],p=l[0]===U&&l[2],u=d&&m.childNodes[d];u=++d&&u&&u[g]||(p=d=0)||f.pop();)if(1===u.nodeType&&++p&&u===e){h[t]=[U,d,p];break}}else if(y&&(l=(e[B]||(e[B]={}))[t])&&l[0]===U)p=l[1];else for(;(u=++d&&u&&u[g]||(p=d=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++p||(y&&((u[B]||(u[B]={}))[t]=[U,p]),u!==e)););return p-=r,p===i||0===p%i&&p/i>=0}}},PSEUDO:function(t,e){var i,s=T.pseudos[t]||T.setFilters[t.toLowerCase()]||n.error("unsupported pseudo: "+t);return s[B]?s(e):s.length>1?(i=[t,t,"",e],T.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,n){for(var i,r=s(t,e),o=r.length;o--;)i=nt.call(t,r[o]),t[i]=!(n[i]=r[o])}):function(t){return s(t,0,i)}):s}},pseudos:{not:r(function(t){var e=[],n=[],i=A(t.replace(ht,"$1"));return i[B]?r(function(t,e,n,r){for(var s,o=i(t,null,r,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))}):function(t,r,s){return e[0]=t,i(e,null,s,n),!n.pop()}}),has:r(function(t){return function(e){return n(t,e).length>0}}),contains:r(function(t){return function(e){return(e.textContent||e.innerText||L(e)).indexOf(t)>-1}}),lang:r(function(t){return mt.test(t||"")||n.error("unsupported lang: "+t),t=t.replace(Et,St).toLowerCase(),function(e){var n;do if(n=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===P},focus:function(t){return t===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!T.pseudos.empty(t)},header:function(t){return xt.test(t.nodeName)},input:function(t){return bt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,n){return[0>n?n+e:n]}),even:h(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:h(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:h(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:h(function(t,e,n){for(var i=0>n?n+e:n;e>++i;)t.push(i);return t})}},T.pseudos.nth=T.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,
image:!0})T.pseudos[w]=c(w);for(w in{submit:!0,reset:!0})T.pseudos[w]=l(w);u.prototype=T.filters=T.pseudos,T.setFilters=new u,A=n.compile=function(t,e){var n,i=[],r=[],s=W[t+" "];if(!s){for(e||(e=p(t)),n=e.length;n--;)s=y(e[n]),s[B]?i.push(s):r.push(s);s=W(t,_(r,i))}return s},E.sortStable=B.split("").sort(Q).join("")===B,E.detectDuplicates=V,I(),E.sortDetached=s(function(t){return 1&t.compareDocumentPosition(M.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,n,i){return i?e:t.getAttribute(n,"type"===n.toLowerCase()?1:2)}),E.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,n,i){return i||"input"!==t.nodeName.toLowerCase()?e:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||o(it,function(t,n,i){var r;return i?e:(r=t.getAttributeNode(n))&&r.specified?r.value:t[n]===!0?n.toLowerCase():null}),st.find=n,st.expr=n.selectors,st.expr[":"]=st.expr.pseudos,st.unique=n.uniqueSort,st.text=n.getText,st.isXMLDoc=n.isXML,st.contains=n.contains}(t);var ft={};st.Callbacks=function(t){t="string"==typeof t?ft[t]||i(t):st.extend({},t);var n,r,s,o,a,c,l=[],h=!t.once&&[],u=function(e){for(n=t.memory&&e,r=!0,c=o||0,o=0,a=l.length,s=!0;l&&a>c;c++)if(l[c].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}s=!1,l&&(h?h.length&&u(h.shift()):n?l=[]:p.disable())},p={add:function(){if(l){var e=l.length;!function i(e){st.each(e,function(e,n){var r=st.type(n);"function"===r?t.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),s?a=l.length:n&&(o=e,u(n))}return this},remove:function(){return l&&st.each(arguments,function(t,e){for(var n;(n=st.inArray(e,l,n))>-1;)l.splice(n,1),s&&(a>=n&&a--,c>=n&&c--)}),this},has:function(t){return t?st.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=h=n=e,this},disabled:function(){return!l},lock:function(){return h=e,n||p.disable(),this},locked:function(){return!h},fireWith:function(t,e){return!l||r&&!h||(e=e||[],e=[t,e.slice?e.slice():e],s?h.push(e):u(e)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!r}};return p},st.extend({Deferred:function(t){var e=[["resolve","done",st.Callbacks("once memory"),"resolved"],["reject","fail",st.Callbacks("once memory"),"rejected"],["notify","progress",st.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return st.Deferred(function(n){st.each(e,function(e,s){var o=s[0],a=st.isFunction(t[e])&&t[e];r[s[1]](function(){var t=a&&a.apply(this,arguments);t&&st.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?st.extend(t,i):i}},r={};return i.pipe=i.then,st.each(e,function(t,s){var o=s[2],a=s[3];i[s[1]]=o.add,a&&o.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?i:this,arguments),this},r[s[0]+"With"]=o.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,s=tt.call(arguments),o=s.length,a=1!==o||t&&st.isFunction(t.promise)?o:0,c=1===a?t:st.Deferred(),l=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?tt.call(arguments):r,i===e?c.notifyWith(n,i):--a||c.resolveWith(n,i)}};if(o>1)for(e=Array(o),n=Array(o),i=Array(o);o>r;r++)s[r]&&st.isFunction(s[r].promise)?s[r].promise().done(l(r,i,s)).fail(c.reject).progress(l(r,n,e)):--a;return a||c.resolveWith(i,s),c.promise()}}),st.support=function(e){var n=W.createElement("input"),i=W.createDocumentFragment(),r=W.createElement("div"),s=W.createElement("select"),o=s.appendChild(W.createElement("option"));return n.type?(n.type="checkbox",e.checkOn=""!==n.value,e.optSelected=o.selected,e.reliableMarginRight=!0,e.boxSizingReliable=!0,e.pixelPosition=!1,n.checked=!0,e.noCloneChecked=n.cloneNode(!0).checked,s.disabled=!0,e.optDisabled=!o.disabled,n=W.createElement("input"),n.value="t",n.type="radio",e.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),e.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,e.focusinBubbles="onfocusin"in t,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===r.style.backgroundClip,st(function(){var n,i,s="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",o=W.getElementsByTagName("body")[0];o&&(n=W.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",o.appendChild(n).appendChild(r),r.innerHTML="",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",st.swap(o,null!=o.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===r.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(r,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(r,null)||{width:"4px"}).width,i=r.appendChild(W.createElement("div")),i.style.cssText=r.style.cssText=s,i.style.marginRight=i.style.width="0",r.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),o.removeChild(n))}),e):e}({});var gt,mt,vt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,yt=/([A-Z])/g;r.uid=1,r.accepts=function(t){return t.nodeType?1===t.nodeType||9===t.nodeType:!0},r.prototype={key:function(t){if(!r.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=r.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,st.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,r=this.key(t),s=this.cache[r];if("string"==typeof e)s[e]=n;else if(st.isEmptyObject(s))st.extend(this.cache[r],e);else for(i in e)s[i]=e[i];return s},get:function(t,n){var i=this.cache[this.key(t)];return n===e?i:i[n]},access:function(t,n,i){var r;return n===e||n&&"string"==typeof n&&i===e?(r=this.get(t,n),r!==e?r:this.get(t,st.camelCase(n))):(this.set(t,n,i),i!==e?i:n)},remove:function(t,n){var i,r,s,o=this.key(t),a=this.cache[o];if(n===e)this.cache[o]={};else{st.isArray(n)?r=n.concat(n.map(st.camelCase)):(s=st.camelCase(n),n in a?r=[n,s]:(r=s,r=r in a?[r]:r.match(at)||[])),i=r.length;for(;i--;)delete a[r[i]]}},hasData:function(t){return!st.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},gt=new r,mt=new r,st.extend({acceptData:r.accepts,hasData:function(t){return gt.hasData(t)||mt.hasData(t)},data:function(t,e,n){return gt.access(t,e,n)},removeData:function(t,e){gt.remove(t,e)},_data:function(t,e,n){return mt.access(t,e,n)},_removeData:function(t,e){mt.remove(t,e)}}),st.fn.extend({data:function(t,n){var i,r,o=this[0],a=0,c=null;if(t===e){if(this.length&&(c=gt.get(o),1===o.nodeType&&!mt.get(o,"hasDataAttrs"))){for(i=o.attributes;i.length>a;a++)r=i[a].name,0===r.indexOf("data-")&&(r=st.camelCase(r.slice(5)),s(o,r,c[r]));mt.set(o,"hasDataAttrs",!0)}return c}return"object"==typeof t?this.each(function(){gt.set(this,t)}):st.access(this,function(n){var i,r=st.camelCase(t);if(o&&n===e){if(i=gt.get(o,t),i!==e)return i;if(i=gt.get(o,r),i!==e)return i;if(i=s(o,r,e),i!==e)return i}else this.each(function(){var i=gt.get(this,r);gt.set(this,r,n),-1!==t.indexOf("-")&&i!==e&&gt.set(this,t,n)})},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){gt.remove(this,t)})}}),st.extend({queue:function(t,n,i){var r;return t?(n=(n||"fx")+"queue",r=mt.get(t,n),i&&(!r||st.isArray(i)?r=mt.access(t,n,st.makeArray(i)):r.push(i)),r||[]):e},dequeue:function(t,e){e=e||"fx";var n=st.queue(t,e),i=n.length,r=n.shift(),s=st._queueHooks(t,e),o=function(){st.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,o,s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return mt.get(t,n)||mt.access(t,n,{empty:st.Callbacks("once memory").add(function(){mt.remove(t,[e+"queue",n])})})}}),st.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),i>arguments.length?st.queue(this[0],t):n===e?this:this.each(function(){var e=st.queue(this,t,n);st._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&st.dequeue(this,t)})},dequeue:function(t){return this.each(function(){st.dequeue(this,t)})},delay:function(t,e){return t=st.fx?st.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,r=1,s=st.Deferred(),o=this,a=this.length,c=function(){--r||s.resolveWith(o,[o])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)i=mt.get(o[a],t+"queueHooks"),i&&i.empty&&(r++,i.empty.add(c));return c(),s.promise(n)}});var _t,bt,xt=/[\t\r\n\f]/g,wt=/\r/g,Et=/^(?:input|select|textarea|button)$/i;st.fn.extend({attr:function(t,e){return st.access(this,st.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){st.removeAttr(this,t)})},prop:function(t,e){return st.access(this,st.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[st.propFix[t]||t]})},addClass:function(t){var e,n,i,r,s,o=0,a=this.length,c="string"==typeof t&&t;if(st.isFunction(t))return this.each(function(e){st(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(at)||[];a>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(xt," "):" ")){for(s=0;r=e[s++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");n.className=st.trim(i)}return this},removeClass:function(t){var e,n,i,r,s,o=0,a=this.length,c=0===arguments.length||"string"==typeof t&&t;if(st.isFunction(t))return this.each(function(e){st(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(at)||[];a>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(xt," "):"")){for(s=0;r=e[s++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=t?st.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):st.isFunction(t)?this.each(function(n){st(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,r=st(this),s=t.match(at)||[];e=s[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(n===X||"boolean"===n)&&(this.className&&mt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":mt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(xt," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,r,s=this[0];return arguments.length?(r=st.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=r?t.call(this,i,st(this).val()):t,null==s?s="":"number"==typeof s?s+="":st.isArray(s)&&(s=st.map(s,function(t){return null==t?"":t+""})),n=st.valHooks[this.type]||st.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,s,"value")!==e||(this.value=s))})):s?(n=st.valHooks[s.type]||st.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(s,"value"))!==e?i:(i=s.value,"string"==typeof i?i.replace(wt,""):null==i?"":i)):void 0}}),st.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,s="select-one"===t.type||0>r,o=s?null:[],a=s?r+1:i.length,c=0>r?a:s?r:0;a>c;c++)if(n=i[c],!(!n.selected&&c!==r||(st.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&st.nodeName(n.parentNode,"optgroup"))){if(e=st(n).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var n,i,r=t.options,s=st.makeArray(e),o=r.length;o--;)i=r[o],(i.selected=st.inArray(st(i).val(),s)>=0)&&(n=!0);return n||(t.selectedIndex=-1),s}}},attr:function(t,n,i){var r,s,o=t.nodeType;return t&&3!==o&&8!==o&&2!==o?typeof t.getAttribute===X?st.prop(t,n,i):(1===o&&st.isXMLDoc(t)||(n=n.toLowerCase(),r=st.attrHooks[n]||(st.expr.match.bool.test(n)?bt:_t)),i===e?r&&"get"in r&&null!==(s=r.get(t,n))?s:(s=st.find.attr(t,n),null==s?e:s):null!==i?r&&"set"in r&&(s=r.set(t,i,n))!==e?s:(t.setAttribute(n,i+""),i):(st.removeAttr(t,n),e)):void 0},removeAttr:function(t,e){var n,i,r=0,s=e&&e.match(at);if(s&&1===t.nodeType)for(;n=s[r++];)i=st.propFix[n]||n,st.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!st.support.radioValue&&"radio"===e&&st.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,n,i){var r,s,o,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?(o=1!==a||!st.isXMLDoc(t),o&&(n=st.propFix[n]||n,s=st.propHooks[n]),i!==e?s&&"set"in s&&(r=s.set(t,i,n))!==e?r:t[n]=i:s&&"get"in s&&null!==(r=s.get(t,n))?r:t[n]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||Et.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),bt={set:function(t,e,n){return e===!1?st.removeAttr(t,n):t.setAttribute(n,n),n}},st.each(st.expr.match.bool.source.match(/\w+/g),function(t,n){var i=st.expr.attrHandle[n]||st.find.attr;st.expr.attrHandle[n]=function(t,n,r){var s=st.expr.attrHandle[n],o=r?e:(st.expr.attrHandle[n]=e)!=i(t,n,r)?n.toLowerCase():null;return st.expr.attrHandle[n]=s,o}}),st.support.optSelected||(st.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),st.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){st.propFix[this.toLowerCase()]=this}),st.each(["radio","checkbox"],function(){st.valHooks[this]={set:function(t,n){return st.isArray(n)?t.checked=st.inArray(st(t).val(),n)>=0:e}},st.support.checkOn||(st.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var St=/^key/,Tt=/^(?:mouse|contextmenu)|click/,Lt=/^(?:focusinfocus|focusoutblur)$/,Ct=/^([^.]*)(?:\.(.+)|)$/;st.event={global:{},add:function(t,n,i,r,s){var o,a,c,l,h,u,p,d,f,g,m,v=mt.get(t);if(v){for(i.handler&&(o=i,i=o.handler,s=o.selector),i.guid||(i.guid=st.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return typeof st===X||t&&st.event.triggered===t.type?e:st.event.dispatch.apply(a.elem,arguments)},a.elem=t),n=(n||"").match(at)||[""],h=n.length;h--;)c=Ct.exec(n[h])||[],f=m=c[1],g=(c[2]||"").split(".").sort(),f&&(p=st.event.special[f]||{},f=(s?p.delegateType:p.bindType)||f,p=st.event.special[f]||{},u=st.extend({type:f,origType:m,data:r,handler:i,guid:i.guid,selector:s,needsContext:s&&st.expr.match.needsContext.test(s),namespace:g.join(".")},o),(d=l[f])||(d=l[f]=[],d.delegateCount=0,p.setup&&p.setup.call(t,r,g,a)!==!1||t.addEventListener&&t.addEventListener(f,a,!1)),p.add&&(p.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),s?d.splice(d.delegateCount++,0,u):d.push(u),st.event.global[f]=!0);t=null}},remove:function(t,e,n,i,r){var s,o,a,c,l,h,u,p,d,f,g,m=mt.hasData(t)&&mt.get(t);if(m&&(c=m.events)){for(e=(e||"").match(at)||[""],l=e.length;l--;)if(a=Ct.exec(e[l])||[],d=g=a[1],f=(a[2]||"").split(".").sort(),d){for(u=st.event.special[d]||{},d=(i?u.delegateType:u.bindType)||d,p=c[d]||[],a=a[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=p.length;s--;)h=p[s],!r&&g!==h.origType||n&&n.guid!==h.guid||a&&!a.test(h.namespace)||i&&i!==h.selector&&("**"!==i||!h.selector)||(p.splice(s,1),h.selector&&p.delegateCount--,u.remove&&u.remove.call(t,h));o&&!p.length&&(u.teardown&&u.teardown.call(t,f,m.handle)!==!1||st.removeEvent(t,d,m.handle),delete c[d])}else for(d in c)st.event.remove(t,d+e[l],n,i,!0);st.isEmptyObject(c)&&(delete m.handle,mt.remove(t,"events"))}},trigger:function(n,i,r,s){var o,a,c,l,h,u,p,d=[r||W],f=it.call(n,"type")?n.type:n,g=it.call(n,"namespace")?n.namespace.split("."):[];if(a=c=r=r||W,3!==r.nodeType&&8!==r.nodeType&&!Lt.test(f+st.event.triggered)&&(f.indexOf(".")>=0&&(g=f.split("."),f=g.shift(),g.sort()),h=0>f.indexOf(":")&&"on"+f,n=n[st.expando]?n:new st.Event(f,"object"==typeof n&&n),n.isTrigger=s?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=r),i=null==i?[n]:st.makeArray(i,[n]),p=st.event.special[f]||{},s||!p.trigger||p.trigger.apply(r,i)!==!1)){if(!s&&!p.noBubble&&!st.isWindow(r)){for(l=p.delegateType||f,Lt.test(l+f)||(a=a.parentNode);a;a=a.parentNode)d.push(a),c=a;c===(r.ownerDocument||W)&&d.push(c.defaultView||c.parentWindow||t)}for(o=0;(a=d[o++])&&!n.isPropagationStopped();)n.type=o>1?l:p.bindType||f,u=(mt.get(a,"events")||{})[n.type]&&mt.get(a,"handle"),u&&u.apply(a,i),u=h&&a[h],u&&st.acceptData(a)&&u.apply&&u.apply(a,i)===!1&&n.preventDefault();return n.type=f,s||n.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),i)!==!1||!st.acceptData(r)||h&&st.isFunction(r[f])&&!st.isWindow(r)&&(c=r[h],c&&(r[h]=null),st.event.triggered=f,r[f](),st.event.triggered=e,c&&(r[h]=c)),n.result}},dispatch:function(t){t=st.event.fix(t);var n,i,r,s,o,a=[],c=tt.call(arguments),l=(mt.get(this,"events")||{})[t.type]||[],h=st.event.special[t.type]||{};if(c[0]=t,t.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,t)!==!1){for(a=st.event.handlers.call(this,t,l),n=0;(s=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,i=0;(o=s.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,r=((st.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,c),r!==e&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,r,s,o,a=[],c=n.delegateCount,l=t.target;if(c&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(r=[],i=0;c>i;i++)o=n[i],s=o.selector+" ",r[s]===e&&(r[s]=o.needsContext?st(s,this).index(l)>=0:st.find(s,this,null,[l]).length),r[s]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return n.length>c&&a.push({elem:this,handlers:n.slice(c)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,r,s,o=n.button;return null==t.pageX&&null!=n.clientX&&(i=t.target.ownerDocument||W,r=i.documentElement,s=i.body,t.pageX=n.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),t.pageY=n.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)),t.which||o===e||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[st.expando])return t;var e,n,i,r=t.type,s=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=Tt.test(r)?this.mouseHooks:St.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,t=new st.Event(s),e=i.length;e--;)n=i[e],t[n]=s[n];return t.target||(t.target=W),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==c()&&this.focus?(this.focus(),!1):e},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&st.nodeName(this,"input")?(this.click(),!1):e},_default:function(t){return st.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=st.extend(new st.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?st.event.trigger(r,null,e):st.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},st.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},st.Event=function(t,n){return this instanceof st.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?o:a):this.type=t,n&&st.extend(this,n),this.timeStamp=t&&t.timeStamp||st.now(),this[st.expando]=!0,e):new st.Event(t,n)},st.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=o,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=o,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()}},st.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){st.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,s=t.handleObj;return(!r||r!==i&&!st.contains(i,r))&&(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}}),st.support.focusinBubbles||st.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){st.event.simulate(e,t.target,st.event.fix(t),!0)};st.event.special[e]={setup:function(){0===n++&&W.addEventListener(t,i,!0)},teardown:function(){0===--n&&W.removeEventListener(t,i,!0)}}}),st.fn.extend({on:function(t,n,i,r,s){var o,c;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(c in t)this.on(c,n,i,t[c],s);return this}if(null==i&&null==r?(r=n,i=n=e):null==r&&("string"==typeof n?(r=i,i=e):(r=i,i=n,n=e)),r===!1)r=a;else if(!r)return this;return 1===s&&(o=r,r=function(t){return st().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=st.guid++)),this.each(function(){st.event.add(this,t,r,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var r,s;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,st(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(s in t)this.off(s,n,t[s]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=a),this.each(function(){st.event.remove(this,t,i,n)})},trigger:function(t,e){return this.each(function(){st.event.trigger(t,e,this)})},triggerHandler:function(t,n){var i=this[0];return i?st.event.trigger(t,n,i,!0):e}});var At=/^.[^:#\[\.,]*$/,jt=/^(?:parents|prev(?:Until|All))/,kt=st.expr.match.needsContext,It={children:!0,contents:!0,next:!0,prev:!0};st.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(st(t).filter(function(){for(e=0;r>e;e++)if(st.contains(i[e],this))return!0}));for(e=0;r>e;e++)st.find(t,i[e],n);return n=this.pushStack(r>1?st.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e=st(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(st.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(h(this,t||[],!0))},filter:function(t){return this.pushStack(h(this,t||[],!1))},is:function(t){return!!h(this,"string"==typeof t&&kt.test(t)?st(t):t||[],!1).length},closest:function(t,e){for(var n,i=0,r=this.length,s=[],o=kt.test(t)||"string"!=typeof t?st(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(11>n.nodeType&&(o?o.index(n)>-1:1===n.nodeType&&st.find.matchesSelector(n,t))){n=s.push(n);break}return this.pushStack(s.length>1?st.unique(s):s)},index:function(t){return t?"string"==typeof t?et.call(st(t),this[0]):et.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?st(t,e):st.makeArray(t&&t.nodeType?[t]:t),i=st.merge(this.get(),n);return this.pushStack(st.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),st.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return st.dir(t,"parentNode")},parentsUntil:function(t,e,n){return st.dir(t,"parentNode",n)},next:function(t){return l(t,"nextSibling")},prev:function(t){return l(t,"previousSibling")},nextAll:function(t){return st.dir(t,"nextSibling")},prevAll:function(t){return st.dir(t,"previousSibling")},nextUntil:function(t,e,n){return st.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return st.dir(t,"previousSibling",n)},siblings:function(t){return st.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return st.sibling(t.firstChild)},contents:function(t){return t.contentDocument||st.merge([],t.childNodes)}},function(t,e){st.fn[t]=function(n,i){var r=st.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=st.filter(i,r)),this.length>1&&(It[t]||st.unique(r),jt.test(t)&&r.reverse()),this.pushStack(r)}}),st.extend({filter:function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?st.find.matchesSelector(i,t)?[i]:[]:st.find.matches(t,st.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,n,i){for(var r=[],s=i!==e;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&st(t).is(i))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var Mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pt=/<([\w:]+)/,Dt=/<|&#?\w+;/,Rt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ot=/checked\s*(?:[^=]|=\s*.checked.)/i,Ft=/^$|\/(?:java|ecma)script/i,Bt=/^true\/(.*)/,Ht=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ut={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ut.optgroup=Ut.option,Ut.tbody=Ut.tfoot=Ut.colgroup=Ut.caption=Ut.thead,Ut.th=Ut.td,st.fn.extend({text:function(t){return st.access(this,function(t){return t===e?st.text(this):this.empty().append((this[0]&&this[0].ownerDocument||W).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=u(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=u(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?st.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||st.cleanData(m(n)),n.parentNode&&(e&&st.contains(n.ownerDocument,n)&&f(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(st.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return st.clone(this,t,e)})},html:function(t){return st.access(this,function(t){var n=this[0]||{},i=0,r=this.length;if(t===e&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!Rt.test(t)&&!Ut[(Pt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Mt,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(st.cleanData(m(n,!1)),n.innerHTML=t);n=0}catch(s){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=st.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(n){var i=t[e++],r=t[e++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),st(this).remove(),r.insertBefore(n,i))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,n){t=K.apply([],t);var i,r,s,o,a,c,l=0,h=this.length,u=this,f=h-1,g=t[0],v=st.isFunction(g);if(v||!(1>=h||"string"!=typeof g||st.support.checkClone)&&Ot.test(g))return this.each(function(i){var r=u.eq(i);v&&(t[0]=g.call(this,i,r.html())),r.domManip(t,e,n)});if(h&&(i=st.buildFragment(t,this[0].ownerDocument,!1,!n&&this),r=i.firstChild,1===i.childNodes.length&&(i=r),r)){for(s=st.map(m(i,"script"),p),o=s.length;h>l;l++)a=i,l!==f&&(a=st.clone(a,!0,!0),o&&st.merge(s,m(a,"script"))),e.call(this[l],a,l);if(o)for(c=s[s.length-1].ownerDocument,st.map(s,d),l=0;o>l;l++)a=s[l],Ft.test(a.type||"")&&!mt.access(a,"globalEval")&&st.contains(c,a)&&(a.src?st._evalUrl(a.src):st.globalEval(a.textContent.replace(Ht,"")))}return this}}),st.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){st.fn[t]=function(t){for(var n,i=[],r=st(t),s=r.length-1,o=0;s>=o;o++)n=o===s?this:this.clone(!0),st(r[o])[e](n),Z.apply(i,n.get());return this.pushStack(i)}}),st.extend({clone:function(t,e,n){var i,r,s,o,a=t.cloneNode(!0),c=st.contains(t.ownerDocument,t);if(!(st.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||st.isXMLDoc(t)))for(o=m(a),s=m(t),i=0,r=s.length;r>i;i++)v(s[i],o[i]);if(e)if(n)for(s=s||m(t),o=o||m(a),i=0,r=s.length;r>i;i++)g(s[i],o[i]);else g(t,a);return o=m(a,"script"),o.length>0&&f(o,!c&&m(t,"script")),a},buildFragment:function(t,e,n,i){for(var r,s,o,a,c,l,h=0,u=t.length,p=e.createDocumentFragment(),d=[];u>h;h++)if(r=t[h],r||0===r)if("object"===st.type(r))st.merge(d,r.nodeType?[r]:r);else if(Dt.test(r)){for(s=s||p.appendChild(e.createElement("div")),o=(Pt.exec(r)||["",""])[1].toLowerCase(),a=Ut[o]||Ut._default,s.innerHTML=a[1]+r.replace(Mt,"<$1></$2>")+a[2],l=a[0];l--;)s=s.lastChild;st.merge(d,s.childNodes),s=p.firstChild,s.textContent=""}else d.push(e.createTextNode(r));for(p.textContent="",h=0;r=d[h++];)if((!i||-1===st.inArray(r,i))&&(c=st.contains(r.ownerDocument,r),s=m(p.appendChild(r),"script"),c&&f(s),n))for(l=0;r=s[l++];)Ft.test(r.type||"")&&n.push(r);return p},cleanData:function(t){for(var n,i,s,o,a,c,l=st.event.special,h=0;(i=t[h])!==e;h++){if(r.accepts(i)&&(a=i[mt.expando],a&&(n=mt.cache[a]))){if(s=Object.keys(n.events||{}),s.length)for(c=0;(o=s[c])!==e;c++)l[o]?st.event.remove(i,o):st.removeEvent(i,o,n.handle);mt.cache[a]&&delete mt.cache[a]}delete gt.cache[i[gt.expando]]}},_evalUrl:function(t){return st.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),st.fn.extend({wrapAll:function(t){var e;return st.isFunction(t)?this.each(function(e){st(this).wrapAll(t.call(this,e))}):(this[0]&&(e=st(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return st.isFunction(t)?this.each(function(e){st(this).wrapInner(t.call(this,e))}):this.each(function(){var e=st(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=st.isFunction(t);return this.each(function(n){st(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){st.nodeName(this,"body")||st(this).replaceWith(this.childNodes)}).end()}});var qt,Xt,Gt=/^(none|table(?!-c[ea]).+)/,Wt=/^margin/,Vt=RegExp("^("+ot+")(.*)$","i"),Qt=RegExp("^("+ot+")(?!px)[a-z%]+$","i"),Yt=RegExp("^([+-])=("+ot+")","i"),zt={BODY:"block"},$t={position:"absolute",visibility:"hidden",display:"block"},Jt={letterSpacing:0,fontWeight:400},Kt=["Top","Right","Bottom","Left"],Zt=["Webkit","O","Moz","ms"];st.fn.extend({css:function(t,n){return st.access(this,function(t,n,i){var r,s,o={},a=0;if(st.isArray(n)){
for(r=b(t),s=n.length;s>a;a++)o[n[a]]=st.css(t,n[a],!1,r);return o}return i!==e?st.style(t,n,i):st.css(t,n)},t,n,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){_(this)?st(this).show():st(this).hide()})}}),st.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=qt(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,n,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,a,c=st.camelCase(n),l=t.style;return n=st.cssProps[c]||(st.cssProps[c]=y(l,c)),a=st.cssHooks[n]||st.cssHooks[c],i===e?a&&"get"in a&&(s=a.get(t,!1,r))!==e?s:l[n]:(o=typeof i,"string"===o&&(s=Yt.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(st.css(t,n)),o="number"),null==i||"number"===o&&isNaN(i)||("number"!==o||st.cssNumber[c]||(i+="px"),st.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(l[n]="inherit"),a&&"set"in a&&(i=a.set(t,i,r))===e||(l[n]=i)),e)}},css:function(t,n,i,r){var s,o,a,c=st.camelCase(n);return n=st.cssProps[c]||(st.cssProps[c]=y(t.style,c)),a=st.cssHooks[n]||st.cssHooks[c],a&&"get"in a&&(s=a.get(t,!0,i)),s===e&&(s=qt(t,n,r)),"normal"===s&&n in Jt&&(s=Jt[n]),""===i||i?(o=parseFloat(s),i===!0||st.isNumeric(o)?o||0:s):s}}),qt=function(t,n,i){var r,s,o,a=i||b(t),c=a?a.getPropertyValue(n)||a[n]:e,l=t.style;return a&&(""!==c||st.contains(t.ownerDocument,t)||(c=st.style(t,n)),Qt.test(c)&&Wt.test(n)&&(r=l.width,s=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=c,c=a.width,l.width=r,l.minWidth=s,l.maxWidth=o)),c},st.each(["height","width"],function(t,n){st.cssHooks[n]={get:function(t,i,r){return i?0===t.offsetWidth&&Gt.test(st.css(t,"display"))?st.swap(t,$t,function(){return S(t,n,r)}):S(t,n,r):e},set:function(t,e,i){var r=i&&b(t);return w(t,e,i?E(t,n,i,st.support.boxSizing&&"border-box"===st.css(t,"boxSizing",!1,r),r):0)}}}),st(function(){st.support.reliableMarginRight||(st.cssHooks.marginRight={get:function(t,n){return n?st.swap(t,{display:"inline-block"},qt,[t,"marginRight"]):e}}),!st.support.pixelPosition&&st.fn.position&&st.each(["top","left"],function(t,n){st.cssHooks[n]={get:function(t,i){return i?(i=qt(t,n),Qt.test(i)?st(t).position()[n]+"px":i):e}}})}),st.expr&&st.expr.filters&&(st.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight},st.expr.filters.visible=function(t){return!st.expr.filters.hidden(t)}),st.each({margin:"",padding:"",border:"Width"},function(t,e){st.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+Kt[i]+e]=s[i]||s[i-2]||s[0];return r}},Wt.test(t)||(st.cssHooks[t+e].set=w)});var te=/%20/g,ee=/\[\]$/,ne=/\r?\n/g,ie=/^(?:submit|button|image|reset|file)$/i,re=/^(?:input|select|textarea|keygen)/i;st.fn.extend({serialize:function(){return st.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=st.prop(this,"elements");return t?st.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!st(this).is(":disabled")&&re.test(this.nodeName)&&!ie.test(t)&&(this.checked||!Nt.test(t))}).map(function(t,e){var n=st(this).val();return null==n?null:st.isArray(n)?st.map(n,function(t){return{name:e.name,value:t.replace(ne,"\r\n")}}):{name:e.name,value:n.replace(ne,"\r\n")}}).get()}}),st.param=function(t,n){var i,r=[],s=function(t,e){e=st.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=st.ajaxSettings&&st.ajaxSettings.traditional),st.isArray(t)||t.jquery&&!st.isPlainObject(t))st.each(t,function(){s(this.name,this.value)});else for(i in t)C(i,t[i],n,s);return r.join("&").replace(te,"+")},st.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){st.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),st.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var se,oe,ae=st.now(),ce=/\?/,le=/#.*$/,he=/([?&])_=[^&]*/,ue=/^(.*?):[ \t]*([^\r\n]*)$/gm,pe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,de=/^(?:GET|HEAD)$/,fe=/^\/\//,ge=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,me=st.fn.load,ve={},ye={},_e="*/".concat("*");try{oe=G.href}catch(be){oe=W.createElement("a"),oe.href="",oe=oe.href}se=ge.exec(oe.toLowerCase())||[],st.fn.load=function(t,n,i){if("string"!=typeof t&&me)return me.apply(this,arguments);var r,s,o,a=this,c=t.indexOf(" ");return c>=0&&(r=t.slice(c),t=t.slice(0,c)),st.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(s="POST"),a.length>0&&st.ajax({url:t,type:s,dataType:"html",data:n}).done(function(t){o=arguments,a.html(r?st("<div>").append(st.parseHTML(t)).find(r):t)}).complete(i&&function(t,e){a.each(i,o||[t.responseText,e,t])}),this},st.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){st.fn[e]=function(t){return this.on(e,t)}}),st.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:oe,type:"GET",isLocal:pe.test(se[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_e,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":st.parseJSON,"text xml":st.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?k(k(t,st.ajaxSettings),e):k(st.ajaxSettings,t)},ajaxPrefilter:A(ve),ajaxTransport:A(ye),ajax:function(t,n){function i(t,n,i,a){var l,u,y,_,x,E=n;2!==b&&(b=2,c&&clearTimeout(c),r=e,o=a||"",w.readyState=t>0?4:0,l=t>=200&&300>t||304===t,i&&(_=I(p,w,i)),_=M(p,_,w,l),l?(p.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(st.lastModified[s]=x),x=w.getResponseHeader("etag"),x&&(st.etag[s]=x)),204===t||"HEAD"===p.type?E="nocontent":304===t?E="notmodified":(E=_.state,u=_.data,y=_.error,l=!y)):(y=E,(t||!E)&&(E="error",0>t&&(t=0))),w.status=t,w.statusText=(n||E)+"",l?g.resolveWith(d,[u,E,w]):g.rejectWith(d,[w,E,y]),w.statusCode(v),v=e,h&&f.trigger(l?"ajaxSuccess":"ajaxError",[w,p,l?u:y]),m.fireWith(d,[w,E]),h&&(f.trigger("ajaxComplete",[w,p]),--st.active||st.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var r,s,o,a,c,l,h,u,p=st.ajaxSetup({},n),d=p.context||p,f=p.context&&(d.nodeType||d.jquery)?st(d):st.event,g=st.Deferred(),m=st.Callbacks("once memory"),v=p.statusCode||{},y={},_={},b=0,x="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!a)for(a={};e=ue.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=_[n]=_[n]||t,y[t]=e),this},overrideMimeType:function(t){return b||(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)v[e]=[v[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||x;return r&&r.abort(e),i(0,e),this}};if(g.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,p.url=((t||p.url||oe)+"").replace(le,"").replace(fe,se[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=st.trim(p.dataType||"*").toLowerCase().match(at)||[""],null==p.crossDomain&&(l=ge.exec(p.url.toLowerCase()),p.crossDomain=!(!l||l[1]===se[1]&&l[2]===se[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(se[3]||("http:"===se[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=st.param(p.data,p.traditional)),j(ve,p,n,w),2===b)return w;h=p.global,h&&0===st.active++&&st.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!de.test(p.type),s=p.url,p.hasContent||(p.data&&(s=p.url+=(ce.test(s)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=he.test(s)?s.replace(he,"$1_="+ae++):s+(ce.test(s)?"&":"?")+"_="+ae++)),p.ifModified&&(st.lastModified[s]&&w.setRequestHeader("If-Modified-Since",st.lastModified[s]),st.etag[s]&&w.setRequestHeader("If-None-Match",st.etag[s])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+_e+"; q=0.01":""):p.accepts["*"]);for(u in p.headers)w.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(p.beforeSend.call(d,w,p)===!1||2===b))return w.abort();x="abort";for(u in{success:1,error:1,complete:1})w[u](p[u]);if(r=j(ye,p,n,w)){w.readyState=1,h&&f.trigger("ajaxSend",[w,p]),p.async&&p.timeout>0&&(c=setTimeout(function(){w.abort("timeout")},p.timeout));try{b=1,r.send(y,i)}catch(E){if(!(2>b))throw E;i(-1,E)}}else i(-1,"No Transport");return w},getJSON:function(t,e,n){return st.get(t,e,n,"json")},getScript:function(t,n){return st.get(t,e,n,"script")}}),st.each(["get","post"],function(t,n){st[n]=function(t,i,r,s){return st.isFunction(i)&&(s=s||r,r=i,i=e),st.ajax({url:t,type:n,dataType:s,data:i,success:r})}}),st.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return st.globalEval(t),t}}}),st.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),st.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=st("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),W.head.appendChild(e[0])},abort:function(){n&&n()}}}});var xe=[],we=/(=)\?(?=&|$)|\?\?/;st.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=xe.pop()||st.expando+"_"+ae++;return this[t]=!0,t}}),st.ajaxPrefilter("json jsonp",function(n,i,r){var s,o,a,c=n.jsonp!==!1&&(we.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&we.test(n.data)&&"data");return c||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=st.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,c?n[c]=n[c].replace(we,"$1"+s):n.jsonp!==!1&&(n.url+=(ce.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return a||st.error(s+" was not called"),a[0]},n.dataTypes[0]="json",o=t[s],t[s]=function(){a=arguments},r.always(function(){t[s]=o,n[s]&&(n.jsonpCallback=i.jsonpCallback,xe.push(s)),a&&st.isFunction(o)&&o(a[0]),a=o=e}),"script"):e}),st.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ee=st.ajaxSettings.xhr(),Se={0:200,1223:204},Te=0,Le={};t.ActiveXObject&&st(t).on("unload",function(){for(var t in Le)Le[t]();Le=e}),st.support.cors=!!Ee&&"withCredentials"in Ee,st.support.ajax=Ee=!!Ee,st.ajaxTransport(function(t){var n;return st.support.cors||Ee&&!t.crossDomain?{send:function(i,r){var s,o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)a.setRequestHeader(s,i[s]);n=function(t){return function(){n&&(delete Le[o],n=a.onload=a.onerror=null,"abort"===t?a.abort():"error"===t?r(a.status||404,a.statusText):r(Se[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:e,a.getAllResponseHeaders()))}},a.onload=n(),a.onerror=n("error"),n=Le[o=Te++]=n("abort"),a.send(t.hasContent&&t.data||null)},abort:function(){n&&n()}}:e});var Ce,Ae,je=/^(?:toggle|show|hide)$/,ke=RegExp("^(?:([+-])=|)("+ot+")([a-z%]*)$","i"),Ie=/queueHooks$/,Me=[O],Pe={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=ke.exec(e),s=r&&r[3]||(st.cssNumber[t]?"":"px"),o=(st.cssNumber[t]||"px"!==s&&+i)&&ke.exec(st.css(n.elem,t)),a=1,c=20;if(o&&o[3]!==s){s=s||o[3],r=r||[],o=+i||1;do a=a||".5",o/=a,st.style(n.elem,t,o+s);while(a!==(a=n.cur()/i)&&1!==a&&--c)}return r&&(o=n.start=+o||+i||0,n.unit=s,n.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),n}]};st.Animation=st.extend(R,{tweener:function(t,e){st.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],Pe[n]=Pe[n]||[],Pe[n].unshift(e)},prefilter:function(t,e){e?Me.unshift(t):Me.push(t)}}),st.Tween=F,F.prototype={constructor:F,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(st.cssNumber[n]?"":"px")},cur:function(){var t=F.propHooks[this.prop];return t&&t.get?t.get(this):F.propHooks._default.get(this)},run:function(t){var e,n=F.propHooks[this.prop];return this.pos=e=this.options.duration?st.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):F.propHooks._default.set(this),this}},F.prototype.init.prototype=F.prototype,F.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=st.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){st.fx.step[t.prop]?st.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[st.cssProps[t.prop]]||st.cssHooks[t.prop])?st.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},st.each(["toggle","show","hide"],function(t,e){var n=st.fn[e];st.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(B(e,!0),t,i,r)}}),st.fn.extend({fadeTo:function(t,e,n,i){return this.filter(_).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=st.isEmptyObject(t),s=st.speed(e,n,i),o=function(){var e=R(this,st.extend({},t),s);(r||mt.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(t,n,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",s=st.timers,o=mt.get(this);if(n)o[n]&&o[n].stop&&r(o[n]);else for(n in o)o[n]&&o[n].stop&&Ie.test(n)&&r(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=t&&s[n].queue!==t||(s[n].anim.stop(i),e=!1,s.splice(n,1));(e||!i)&&st.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=mt.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=st.timers,o=i?i.length:0;for(n.finish=!0,st.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;o>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),st.each({slideDown:B("show"),slideUp:B("hide"),slideToggle:B("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){st.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),st.speed=function(t,e,n){var i=t&&"object"==typeof t?st.extend({},t):{complete:n||!n&&e||st.isFunction(t)&&t,duration:t,easing:n&&e||e&&!st.isFunction(e)&&e};return i.duration=st.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in st.fx.speeds?st.fx.speeds[i.duration]:st.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){st.isFunction(i.old)&&i.old.call(this),i.queue&&st.dequeue(this,i.queue)},i},st.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},st.timers=[],st.fx=F.prototype.init,st.fx.tick=function(){var t,n=st.timers,i=0;for(Ce=st.now();n.length>i;i++)t=n[i],t()||n[i]!==t||n.splice(i--,1);n.length||st.fx.stop(),Ce=e},st.fx.timer=function(t){t()&&st.timers.push(t)&&st.fx.start()},st.fx.interval=13,st.fx.start=function(){Ae||(Ae=setInterval(st.fx.tick,st.fx.interval))},st.fx.stop=function(){clearInterval(Ae),Ae=null},st.fx.speeds={slow:600,fast:200,_default:400},st.fx.step={},st.expr&&st.expr.filters&&(st.expr.filters.animated=function(t){return st.grep(st.timers,function(e){return t===e.elem}).length}),st.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){st.offset.setOffset(this,t,e)});var n,i,r=this[0],s={top:0,left:0},o=r&&r.ownerDocument;return o?(n=o.documentElement,st.contains(n,r)?(typeof r.getBoundingClientRect!==X&&(s=r.getBoundingClientRect()),i=H(o),{top:s.top+i.pageYOffset-n.clientTop,left:s.left+i.pageXOffset-n.clientLeft}):s):void 0},st.offset={setOffset:function(t,e,n){var i,r,s,o,a,c,l,h=st.css(t,"position"),u=st(t),p={};"static"===h&&(t.style.position="relative"),a=u.offset(),s=st.css(t,"top"),c=st.css(t,"left"),l=("absolute"===h||"fixed"===h)&&(s+c).indexOf("auto")>-1,l?(i=u.position(),o=i.top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(c)||0),st.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(p.top=e.top-a.top+o),null!=e.left&&(p.left=e.left-a.left+r),"using"in e?e.using.call(t,p):u.css(p)}},st.fn.extend({position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===st.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),st.nodeName(t[0],"html")||(i=t.offset()),i.top+=st.css(t[0],"borderTopWidth",!0),i.left+=st.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-st.css(n,"marginTop",!0),left:e.left-i.left-st.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||V;t&&!st.nodeName(t,"html")&&"static"===st.css(t,"position");)t=t.offsetParent;return t||V})}}),st.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){var r="pageYOffset"===i;st.fn[n]=function(s){return st.access(this,function(n,s,o){var a=H(n);return o===e?a?a[i]:n[s]:(a?a.scrollTo(r?t.pageXOffset:o,r?o:t.pageYOffset):n[s]=o,e)},n,s,arguments.length,null)}}),st.each({Height:"height",Width:"width"},function(t,n){st.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,r){st.fn[r]=function(r,s){var o=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||s===!0?"margin":"border");return st.access(this,function(n,i,r){var s;return st.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+t],s["scroll"+t],n.body["offset"+t],s["offset"+t],s["client"+t])):r===e?st.css(n,i,a):st.style(n,i,r,a)},n,o?r:e,o,null)}})}),st.fn.size=function(){return this.length},st.fn.andSelf=st.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=st:"function"==typeof define&&define.amd&&define("jquery",[],function(){return st}),"object"==typeof t&&"object"==typeof t.document&&(t.jQuery=t.$=st)}(window),t.$=$}.apply(t,arguments)})}(this),function(t){define("lib/easel",[],function(){return function(){return this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var n=t.prototype,i=Object.getPrototypeOf&&Object.getPrototypeOf(n)||n.__proto__;if(i){n[(e+="_")+"constructor"]=i.constructor;for(var r in i)n.hasOwnProperty(r)&&"function"==typeof i[r]&&(n[e+r]=i[r])}return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var n=0,i=t.length;i>n;n++)if(e===t[n])return n;return-1},this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!n,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,n){var i;i=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var r=i[t];return r&&this.removeEventListener(t,e,n),r=i[t],r?r.push(e):i[t]=[e],e},e.on=function(t,e,n,i,r,s){return e.handleEvent&&(n=n||e,e=e.handleEvent),n=n||this,this.addEventListener(t,function(t){e.call(n,t,r),i&&t.remove()},s)},e.removeEventListener=function(t,e,n){var i=n?this._captureListeners:this._listeners;if(i){var r=i[t];if(r)for(var s=0,o=r.length;o>s;s++)if(r[s]==e){1==o?delete i[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,n){if("string"==typeof t){var i=this._listeners;if(!(e||i&&i[t]))return!0;t=new createjs.Event(t,e,n)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(r){}if(t.bubbles&&this.parent){for(var s=this,o=[s];s.parent;)o.push(s=s.parent);var a,c=o.length;for(a=c-1;a>=0&&!t.propagationStopped;a--)o[a]._dispatchEvent(t,1+(0==a));for(a=1;c>a&&!t.propagationStopped;a++)o[a]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,n=this._captureListeners;return!!(e&&e[t]||n&&n[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var n,i=1==e?this._captureListeners:this._listeners;if(t&&i){var r=i[t.type];if(!r||!(n=r.length))return;try{t.currentTarget=this}catch(s){}try{t.eventPhase=e}catch(s){}t.removed=!1,r=r.slice();for(var o=0;n>o&&!t.immediatePropagationStopped;o++){var a=r[o];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.useRAF=!1,t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval};try{Object.defineProperties(t,{interval:{get:t.getInterval,set:t.setInterval},framerate:{get:t.getFPS,set:t.setFPS}})}catch(e){console.log(e)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=0,t._inited=!1},t.getMeasuredTickTime=function(e){var n=0,i=t._tickTimes;if(!i||i.length<1)return-1;e=Math.min(i.length,e||0|t.getFPS());for(var r=0;e>r;r++)n+=i[r];return n/e},t.getMeasuredFPS=function(e){var n=t._times;return!n||n.length<2?-1:(e=Math.min(n.length-1,e||0|t.getFPS()),1e3/((n[0]-n[e])/e))},t.setPaused=function(e){t.paused=e},t.getPaused=function(){return t.paused},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode||t.useRAF&&t.RAF_SYNCHED;if(e==t.RAF_SYNCHED||e==t.RAF){var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(n)return t._timerId=n(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,n=t._getTime(),i=n-t._lastTime;if(t._lastTime=n,t._ticks++,e&&(t._pausedTicks++,t._pausedTime+=i),t.hasEventListener("tick")){var r=new createjs.Event("tick"),s=t.maxDelta;r.delta=s&&i>s?s:i,r.paused=e,r.time=n,r.runTime=n-t._pausedTime,t.dispatchEvent(r)}for(t._tickTimes.unshift(t._getTime()-n);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(n);t._times.length>100;)t._times.pop()};var n=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return(n&&n.call(performance)||(new Date).getTime())-t._startTime},createjs.Ticker=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"UID cannot be instantiated"}t._nextID=0,t.get=function(){return t._nextID++},createjs.UID=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,i,r,s,o,a,c,l,h){this.Event_constructor(t,e,n),this.stageX=i,this.stageY=r,this.rawX=null==c?i:c,this.rawY=null==l?r:l,this.nativeEvent=s,this.pointerID=o,this.primary=!!a,this.relatedTarget=h}var e=createjs.extend(t,createjs.Event);e._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},e._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},e._get_isTouch=function(){return-1!==this.pointerID};try{Object.defineProperties(e,{localX:{get:e._get_localX},localY:{get:e._get_localY},isTouch:{get:e._get_isTouch}})}catch(n){}e.clone=function(){return new t(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},e.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,i,r,s){this.setValues(t,e,n,i,r,s)}var e=t.prototype;t.DEG_TO_RAD=Math.PI/180,t.identity=null,e.setValues=function(t,e,n,i,r,s){return this.a=null==t?1:t,this.b=e||0,this.c=n||0,this.d=null==i?1:i,this.tx=r||0,this.ty=s||0,this},e.append=function(t,e,n,i,r,s){var o=this.a,a=this.b,c=this.c,l=this.d;return(1!=t||0!=e||0!=n||1!=i)&&(this.a=o*t+c*e,this.b=a*t+l*e,this.c=o*n+c*i,this.d=a*n+l*i),this.tx=o*r+c*s+this.tx,this.ty=a*r+l*s+this.ty,this},e.prepend=function(t,e,n,i,r,s){var o=this.a,a=this.c,c=this.tx;return this.a=t*o+n*this.b,this.b=e*o+i*this.b,this.c=t*a+n*this.d,this.d=e*a+i*this.d,this.tx=t*c+n*this.ty+r,this.ty=e*c+i*this.ty+s,this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.appendTransform=function(e,n,i,r,s,o,a,c,l){if(s%360)var h=s*t.DEG_TO_RAD,u=Math.cos(h),p=Math.sin(h);else u=1,p=0;return o||a?(o*=t.DEG_TO_RAD,a*=t.DEG_TO_RAD,this.append(Math.cos(a),Math.sin(a),-Math.sin(o),Math.cos(o),e,n),this.append(u*i,p*i,-p*r,u*r,0,0)):this.append(u*i,p*i,-p*r,u*r,e,n),(c||l)&&(this.tx-=c*this.a+l*this.c,this.ty-=c*this.b+l*this.d),this},e.prependTransform=function(e,n,i,r,s,o,a,c,l){if(s%360)var h=s*t.DEG_TO_RAD,u=Math.cos(h),p=Math.sin(h);else u=1,p=0;return(c||l)&&(this.tx-=c,this.ty-=l),o||a?(o*=t.DEG_TO_RAD,a*=t.DEG_TO_RAD,this.prepend(u*i,p*i,-p*r,u*r,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(o),Math.cos(o),e,n)):this.prepend(u*i,p*i,-p*r,u*r,e,n),this},e.rotate=function(e){e*=t.DEG_TO_RAD;var n=Math.cos(e),i=Math.sin(e),r=this.a,s=this.b;return this.a=r*n+this.c*i,this.b=s*n+this.d*i,this.c=-r*i+this.c*n,this.d=-s*i+this.d*n,this},e.skew=function(e,n){return e*=t.DEG_TO_RAD,n*=t.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},e.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},e.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},e.invert=function(){var t=this.a,e=this.b,n=this.c,i=this.d,r=this.tx,s=t*i-e*n;return this.a=i/s,this.b=-e/s,this.c=-n/s,this.d=t/s,this.tx=(n*this.ty-i*r)/s,this.ty=-(t*this.ty-e*r)/s,this},e.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},e.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},e.transformPoint=function(t,e,n){return n=n||{},n.x=t*this.a+e*this.c+this.tx,n.y=t*this.b+e*this.d+this.ty,n},e.decompose=function(e){null==e&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),i=Math.atan2(this.b,this.a),r=Math.abs(1-n/i);return 1e-5>r?(e.rotation=i/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=n/t.DEG_TO_RAD,e.skewY=i/t.DEG_TO_RAD),e},e.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t.identity=new t,createjs.Matrix2D=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,i,r){this.setValues(t,e,n,i,r)}var e=t.prototype;e.setValues=function(t,e,n,i,r){return this.visible=null==t?!0:!!t,this.alpha=null==e?1:e,this.shadow=n,this.compositeOperation=n,this.matrix=r||this.matrix&&this.matrix.identity()||new createjs.Matrix2D,this},e.append=function(t,e,n,i,r){return this.alpha*=e,this.shadow=n||this.shadow,this.compositeOperation=i||this.compositeOperation,this.visible=this.visible&&t,r&&this.matrix.appendMatrix(r),this},e.prepend=function(t,e,n,i,r){return this.alpha*=e,this.shadow=this.shadow||n,this.compositeOperation=this.compositeOperation||i,this.visible=this.visible&&t,r&&this.matrix.prependMatrix(r),this},e.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},e.clone=function(){return new t(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone());
},createjs.DisplayProps=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.setValues(t,e)}var e=t.prototype;e.setValues=function(t,e){return this.x=t||0,this.y=e||0,this},e.copy=function(t){return this.x=t.x,this.y=t.y,this},e.clone=function(){return new t(this.x,this.y)},e.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,i){this.setValues(t,e,n,i)}var e=t.prototype;e.setValues=function(t,e,n,i){return this.x=t||0,this.y=e||0,this.width=n||0,this.height=i||0,this},e.extend=function(t,e,n,i){return n=n||0,i=i||0,t+n>this.x+this.width&&(this.width=t+n-this.x),e+i>this.y+this.height&&(this.height=e+i-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),this},e.pad=function(t,e,n,i){return this.x-=e,this.y-=t,this.width+=e+i,this.height+=t+n,this},e.copy=function(t){return this.setValues(t.x,t.y,t.width,t.height)},e.contains=function(t,e,n,i){return n=n||0,i=i||0,t>=this.x&&t+n<=this.x+this.width&&e>=this.y&&e+i<=this.y+this.height},e.union=function(t){return this.clone().extend(t.x,t.y,t.width,t.height)},e.intersection=function(e){var n=e.x,i=e.y,r=n+e.width,s=i+e.height;return this.x>n&&(n=this.x),this.y>i&&(i=this.y),this.x+this.width<r&&(r=this.x+this.width),this.y+this.height<s&&(s=this.y+this.height),n>=r||i>=s?null:new t(n,i,r-n,s-i)},e.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height},e.isEmpty=function(){return this.width<=0||this.height<=0},e.clone=function(){return new t(this.x,this.y,this.width,this.height)},e.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,i,r,s,o){t.addEventListener&&(this.target=t,this.overLabel=null==n?"over":n,this.outLabel=null==e?"out":e,this.downLabel=null==i?"down":i,this.play=r,this._isPressed=!1,this._isOver=!1,this._enabled=!1,t.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),s&&(o&&(s.actionsEnabled=!1,s.gotoAndStop&&s.gotoAndStop(o)),t.hitArea=s))}var e=t.prototype;e.setEnabled=function(t){if(t!=this._enabled){var e=this.target;this._enabled=t,t?(e.cursor="pointer",e.addEventListener("rollover",this),e.addEventListener("rollout",this),e.addEventListener("mousedown",this),e.addEventListener("pressup",this),e._reset&&(e.__reset=e._reset,e._reset=this._reset)):(e.cursor=null,e.removeEventListener("rollover",this),e.removeEventListener("rollout",this),e.removeEventListener("mousedown",this),e.removeEventListener("pressup",this),e.__reset&&(e._reset=e.__reset,delete e.__reset))}},e.getEnabled=function(){return this._enabled};try{Object.defineProperties(e,{enabled:{get:e.getEnabled,set:e.setEnabled}})}catch(n){}e.toString=function(){return"[ButtonHelper]"},e.handleEvent=function(t){var e,n=this.target,i=t.type;"mousedown"==i?(this._isPressed=!0,e=this.downLabel):"pressup"==i?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"rollover"==i?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?n.gotoAndPlay&&n.gotoAndPlay(e):n.gotoAndStop&&n.gotoAndStop(e)},e._reset=function(){var t=this.paused;this.__reset(),this.paused=t},createjs.ButtonHelper=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,i){this.color=t||"black",this.offsetX=e||0,this.offsetY=n||0,this.blur=i||0}var e=t.prototype;t.identity=new t("transparent",0,0,0),e.toString=function(){return"[Shadow]"},e.clone=function(){return new t(this.color,this.offsetX,this.offsetY,this.blur)},createjs.Shadow=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}var e=createjs.extend(t,createjs.EventDispatcher);e.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(e,{animations:{get:e.getAnimations}})}catch(n){}e.getNumFrames=function(t){if(null==t)return this._frames?this._frames.length:this._numFrames||0;var e=this._data[t];return null==e?0:e.frames.length},e.getAnimation=function(t){return this._data[t]},e.getFrame=function(t){var e;return this._frames&&(e=this._frames[t])?e:null},e.getFrameBounds=function(t,e){var n=this.getFrame(t);return n?(e||new createjs.Rectangle).setValues(-n.regX,-n.regY,n.rect.width,n.rect.height):null},e.toString=function(){return"[SpriteSheet]"},e.clone=function(){throw"SpriteSheet cannot be cloned."},e._parseData=function(t){var e,n,i,r;if(null!=t){if(this.framerate=t.framerate||0,t.images&&(n=t.images.length)>0)for(r=this._images=[],e=0;n>e;e++){var s=t.images[e];if("string"==typeof s){var o=s;s=document.createElement("img"),s.src=o}r.push(s),s.getContext||s.naturalWidth||(this._loadCount++,this.complete=!1,function(t){s.onload=function(){t._handleImageLoad()}}(this))}if(null==t.frames);else if(t.frames instanceof Array)for(this._frames=[],r=t.frames,e=0,n=r.length;n>e;e++){var a=r[e];this._frames.push({image:this._images[a[4]?a[4]:0],rect:new createjs.Rectangle(a[0],a[1],a[2],a[3]),regX:a[5]||0,regY:a[6]||0})}else i=t.frames,this._frameWidth=i.width,this._frameHeight=i.height,this._regX=i.regX||0,this._regY=i.regY||0,this._spacing=i.spacing||0,this._margin=i.margin||0,this._numFrames=i.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(i=t.animations)){this._data={};var c;for(c in i){var l={name:c},h=i[c];if("number"==typeof h)r=l.frames=[h];else if(h instanceof Array)if(1==h.length)l.frames=[h[0]];else for(l.speed=h[3],l.next=h[2],r=l.frames=[],e=h[0];e<=h[1];e++)r.push(e);else{l.speed=h.speed,l.next=h.next;var u=h.frames;r=l.frames="number"==typeof u?[u]:u.slice(0)}(l.next===!0||void 0===l.next)&&(l.next=c),(l.next===!1||r.length<2&&l.next==c)&&(l.next=null),l.speed||(l.speed=1),this._animations.push(c),this._data[c]=l}}}},e._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},e._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var t=this._numFrames||1e5,e=0,n=this._frameWidth,i=this._frameHeight,r=this._spacing,s=this._margin;t:for(var o=0,a=this._images;o<a.length;o++)for(var c=a[o],l=c.width,h=c.height,u=s;h-s-i>=u;){for(var p=s;l-s-n>=p;){if(e>=t)break t;e++,this._frames.push({image:c,rect:new createjs.Rectangle(p,u,n,i),regX:this._regX,regY:this._regY}),p+=n+r}u+=i+r}this._numFrames=e}},createjs.SpriteSheet=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var e=t.prototype,n=t;t.getRGB=function(t,e,n,i){return null!=t&&null==n&&(i=e,n=255&t,e=t>>8&255,t=t>>16&255),null==i?"rgb("+t+","+e+","+n+")":"rgba("+t+","+e+","+n+","+i+")"},t.getHSL=function(t,e,n,i){return null==i?"hsl("+t%360+","+e+"%,"+n+"%)":"hsla("+t%360+","+e+"%,"+n+"%,"+i+")"},t.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},t.STROKE_CAPS_MAP=["butt","round","square"],t.STROKE_JOINTS_MAP=["miter","round","bevel"];var i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._ctx=i.getContext("2d"),i.width=i.height=1),e.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(e,{instructions:{get:e.getInstructions}})}catch(r){}e.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},e.draw=function(t,e){this._updateInstructions();for(var n=this._instructions,i=this._storeIndex,r=n.length;r>i;i++)n[i].exec(t,e)},e.drawAsPath=function(t){this._updateInstructions();for(var e,n=this._instructions,i=this._storeIndex,r=n.length;r>i;i++)(e=n[i]).path!==!1&&e.exec(t)},e.moveTo=function(t,e){return this.append(new n.MoveTo(t,e),!0)},e.lineTo=function(t,e){return this.append(new n.LineTo(t,e))},e.arcTo=function(t,e,i,r,s){return this.append(new n.ArcTo(t,e,i,r,s))},e.arc=function(t,e,i,r,s,o){return this.append(new n.Arc(t,e,i,r,s,o))},e.quadraticCurveTo=function(t,e,i,r){return this.append(new n.QuadraticCurveTo(t,e,i,r))},e.bezierCurveTo=function(t,e,i,r,s,o){return this.append(new n.BezierCurveTo(t,e,i,r,s,o))},e.rect=function(t,e,i,r){return this.append(new n.Rect(t,e,i,r))},e.closePath=function(){return this._activeInstructions.length?this.append(new n.ClosePath):this},e.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},e.beginFill=function(t){return this._setFill(t?new n.Fill(t):null)},e.beginLinearGradientFill=function(t,e,i,r,s,o){return this._setFill((new n.Fill).linearGradient(t,e,i,r,s,o))},e.beginRadialGradientFill=function(t,e,i,r,s,o,a,c){return this._setFill((new n.Fill).radialGradient(t,e,i,r,s,o,a,c))},e.beginBitmapFill=function(t,e,i){return this._setFill(new n.Fill(null,i).bitmap(t,e))},e.endFill=function(){return this.beginFill()},e.setStrokeStyle=function(t,e,i,r,s){return this._updateInstructions(!0),this._strokeStyle=this.command=new n.StrokeStyle(t,e,i,r,s),this._stroke&&(this._stroke.ignoreScale=s),this._strokeIgnoreScale=s,this},e.setStrokeDash=function(t,e){return this._updateInstructions(!0),this._strokeDash=this.command=new n.StrokeDash(t,e),this},e.beginStroke=function(t){return this._setStroke(t?new n.Stroke(t):null)},e.beginLinearGradientStroke=function(t,e,i,r,s,o){return this._setStroke((new n.Stroke).linearGradient(t,e,i,r,s,o))},e.beginRadialGradientStroke=function(t,e,i,r,s,o,a,c){return this._setStroke((new n.Stroke).radialGradient(t,e,i,r,s,o,a,c))},e.beginBitmapStroke=function(t,e){return this._setStroke((new n.Stroke).bitmap(t,e))},e.endStroke=function(){return this.beginStroke()},e.curveTo=e.quadraticCurveTo,e.drawRect=e.rect,e.drawRoundRect=function(t,e,n,i,r){return this.drawRoundRectComplex(t,e,n,i,r,r,r,r)},e.drawRoundRectComplex=function(t,e,i,r,s,o,a,c){return this.append(new n.RoundRect(t,e,i,r,s,o,a,c))},e.drawCircle=function(t,e,i){return this.append(new n.Circle(t,e,i))},e.drawEllipse=function(t,e,i,r){return this.append(new n.Ellipse(t,e,i,r))},e.drawPolyStar=function(t,e,i,r,s,o){return this.append(new n.PolyStar(t,e,i,r,s,o))},e.append=function(t,e){return this._activeInstructions.push(t),this.command=t,e||(this._dirty=!0),this},e.decodePath=function(e){for(var n=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],i=[2,2,4,6,0],r=0,s=e.length,o=[],a=0,c=0,l=t.BASE_64;s>r;){var h=e.charAt(r),u=l[h],p=u>>3,d=n[p];if(!d||3&u)throw"bad path data (@"+r+"): "+h;var f=i[p];p||(a=c=0),o.length=0,r++;for(var g=(u>>2&1)+2,m=0;f>m;m++){var v=l[e.charAt(r)],y=v>>5?-1:1;v=(31&v)<<6|l[e.charAt(r+1)],3==g&&(v=v<<6|l[e.charAt(r+2)]),v=y*v/10,m%2?a=v+=a:c=v+=c,o[m]=v,r+=g}d.apply(this,o)}return this},e.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},e.unstore=function(){return this._storeIndex=0,this},e.clone=function(){var e=new t;return e.command=this.command,e._stroke=this._stroke,e._strokeStyle=this._strokeStyle,e._strokeDash=this._strokeDash,e._strokeIgnoreScale=this._strokeIgnoreScale,e._fill=this._fill,e._instructions=this._instructions.slice(),e._commitIndex=this._commitIndex,e._activeInstructions=this._activeInstructions.slice(),e._dirty=this._dirty,e._storeIndex=this._storeIndex,e},e.toString=function(){return"[Graphics]"},e.mt=e.moveTo,e.lt=e.lineTo,e.at=e.arcTo,e.bt=e.bezierCurveTo,e.qt=e.quadraticCurveTo,e.a=e.arc,e.r=e.rect,e.cp=e.closePath,e.c=e.clear,e.f=e.beginFill,e.lf=e.beginLinearGradientFill,e.rf=e.beginRadialGradientFill,e.bf=e.beginBitmapFill,e.ef=e.endFill,e.ss=e.setStrokeStyle,e.sd=e.setStrokeDash,e.s=e.beginStroke,e.ls=e.beginLinearGradientStroke,e.rs=e.beginRadialGradientStroke,e.bs=e.beginBitmapStroke,e.es=e.endStroke,e.dr=e.drawRect,e.rr=e.drawRoundRect,e.rc=e.drawRoundRectComplex,e.dc=e.drawCircle,e.de=e.drawEllipse,e.dp=e.drawPolyStar,e.p=e.decodePath,e._updateInstructions=function(e){var n=this._instructions,i=this._activeInstructions,r=this._commitIndex;if(this._dirty&&i.length){n.length=r,n.push(t.beginCmd);var s=i.length,o=n.length;n.length=o+s;for(var a=0;s>a;a++)n[a+o]=i[a];this._fill&&n.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,n.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,n.push(this._strokeStyle)),n.push(this._stroke)),this._dirty=!1}e&&(i.length=0,this._commitIndex=n.length)},e._setFill=function(t){return this._updateInstructions(!0),this.command=this._fill=t,this},e._setStroke=function(t){return this._updateInstructions(!0),(this.command=this._stroke=t)&&(t.ignoreScale=this._strokeIgnoreScale),this},(n.LineTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.lineTo(this.x,this.y)},(n.MoveTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.moveTo(this.x,this.y)},(n.ArcTo=function(t,e,n,i,r){this.x1=t,this.y1=e,this.x2=n,this.y2=i,this.radius=r}).prototype.exec=function(t){t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(n.Arc=function(t,e,n,i,r,s){this.x=t,this.y=e,this.radius=n,this.startAngle=i,this.endAngle=r,this.anticlockwise=!!s}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(n.QuadraticCurveTo=function(t,e,n,i){this.cpx=t,this.cpy=e,this.x=n,this.y=i}).prototype.exec=function(t){t.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(n.BezierCurveTo=function(t,e,n,i,r,s){this.cp1x=t,this.cp1y=e,this.cp2x=n,this.cp2y=i,this.x=r,this.y=s}).prototype.exec=function(t){t.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(n.Rect=function(t,e,n,i){this.x=t,this.y=e,this.w=n,this.h=i}).prototype.exec=function(t){t.rect(this.x,this.y,this.w,this.h)},(n.ClosePath=function(){}).prototype.exec=function(t){t.closePath()},(n.BeginPath=function(){}).prototype.exec=function(t){t.beginPath()},e=(n.Fill=function(t,e){this.style=t,this.matrix=e}).prototype,e.exec=function(t){if(this.style){t.fillStyle=this.style;var e=this.matrix;e&&(t.save(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),t.fill(),e&&t.restore()}},e.linearGradient=function(e,n,i,r,s,o){for(var a=this.style=t._ctx.createLinearGradient(i,r,s,o),c=0,l=e.length;l>c;c++)a.addColorStop(n[c],e[c]);return a.props={colors:e,ratios:n,x0:i,y0:r,x1:s,y1:o,type:"linear"},this},e.radialGradient=function(e,n,i,r,s,o,a,c){for(var l=this.style=t._ctx.createRadialGradient(i,r,s,o,a,c),h=0,u=e.length;u>h;h++)l.addColorStop(n[h],e[h]);return l.props={colors:e,ratios:n,x0:i,y0:r,r0:s,x1:o,y1:a,r1:c,type:"radial"},this},e.bitmap=function(e,n){if(e.naturalWidth||e.getContext||e.readyState>=2){var i=this.style=t._ctx.createPattern(e,n||"");i.props={image:e,repetition:n,type:"bitmap"}}return this},e.path=!1,e=(n.Stroke=function(t,e){this.style=t,this.ignoreScale=e}).prototype,e.exec=function(t){this.style&&(t.strokeStyle=this.style,this.ignoreScale&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.stroke(),this.ignoreScale&&t.restore())},e.linearGradient=n.Fill.prototype.linearGradient,e.radialGradient=n.Fill.prototype.radialGradient,e.bitmap=n.Fill.prototype.bitmap,e.path=!1,e=(n.StrokeStyle=function(t,e,n,i){this.width=t,this.caps=e,this.joints=n,this.miterLimit=i}).prototype,e.exec=function(e){e.lineWidth=null==this.width?"1":this.width,e.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:t.STROKE_CAPS_MAP[this.caps],e.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:t.STROKE_JOINTS_MAP[this.joints],e.miterLimit=null==this.miterLimit?"10":this.miterLimit},e.path=!1,(n.StrokeDash=function(t,e){this.segments=t,this.offset=e||0}).prototype.exec=function(t){t.setLineDash&&(t.setLineDash(this.segments||n.StrokeDash.EMPTY_SEGMENTS),t.lineDashOffset=this.offset||0)},n.StrokeDash.EMPTY_SEGMENTS=[],(n.RoundRect=function(t,e,n,i,r,s,o,a){this.x=t,this.y=e,this.w=n,this.h=i,this.radiusTL=r,this.radiusTR=s,this.radiusBR=o,this.radiusBL=a}).prototype.exec=function(t){var e=(l>c?c:l)/2,n=0,i=0,r=0,s=0,o=this.x,a=this.y,c=this.w,l=this.h,h=this.radiusTL,u=this.radiusTR,p=this.radiusBR,d=this.radiusBL;0>h&&(h*=n=-1),h>e&&(h=e),0>u&&(u*=i=-1),u>e&&(u=e),0>p&&(p*=r=-1),p>e&&(p=e),0>d&&(d*=s=-1),d>e&&(d=e),t.moveTo(o+c-u,a),t.arcTo(o+c+u*i,a-u*i,o+c,a+u,u),t.lineTo(o+c,a+l-p),t.arcTo(o+c+p*r,a+l+p*r,o+c-p,a+l,p),t.lineTo(o+d,a+l),t.arcTo(o-d*s,a+l+d*s,o,a+l-d,d),t.lineTo(o,a+h),t.arcTo(o-h*n,a-h*n,o+h,a,h),t.closePath()},(n.Circle=function(t,e,n){this.x=t,this.y=e,this.radius=n}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,0,2*Math.PI)},(n.Ellipse=function(t,e,n,i){this.x=t,this.y=e,this.w=n,this.h=i}).prototype.exec=function(t){var e=this.x,n=this.y,i=this.w,r=this.h,s=.5522848,o=i/2*s,a=r/2*s,c=e+i,l=n+r,h=e+i/2,u=n+r/2;t.moveTo(e,u),t.bezierCurveTo(e,u-a,h-o,n,h,n),t.bezierCurveTo(h+o,n,c,u-a,c,u),t.bezierCurveTo(c,u+a,h+o,l,h,l),t.bezierCurveTo(h-o,l,e,u+a,e,u)},(n.PolyStar=function(t,e,n,i,r,s){this.x=t,this.y=e,this.radius=n,this.sides=i,this.pointSize=r,this.angle=s}).prototype.exec=function(t){var e=this.x,n=this.y,i=this.radius,r=(this.angle||0)/180*Math.PI,s=this.sides,o=1-(this.pointSize||0),a=Math.PI/s;t.moveTo(e+Math.cos(r)*i,n+Math.sin(r)*i);for(var c=0;s>c;c++)r+=a,1!=o&&t.lineTo(e+Math.cos(r)*i*o,n+Math.sin(r)*i*o),r+=a,t.lineTo(e+Math.cos(r)*i,n+Math.sin(r)*i);t.closePath()},t.beginCmd=new n.BeginPath,createjs.Graphics=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=createjs.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new createjs.DisplayProps,this._rectangle=new createjs.Rectangle,this._bounds=null}var e=createjs.extend(t,createjs.EventDispatcher);t._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],t.suppressCrossDomainErrors=!1,t._snapToPixelEnabled=!1;var n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");n.getContext&&(t._hitTestCanvas=n,t._hitTestContext=n.getContext("2d"),n.width=n.height=1),t._nextCacheID=1,e.getStage=function(){for(var t=this,e=createjs.Stage;t.parent;)t=t.parent;return t instanceof e?t:null};try{Object.defineProperties(e,{stage:{get:e.getStage}})}catch(i){}e.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},e.draw=function(t,e){var n=this.cacheCanvas;if(e||!n)return!1;var i=this._cacheScale;return t.drawImage(n,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,n.width/i,n.height/i),!0},e.updateContext=function(e){var n=this,i=n.mask,r=n._props.matrix;i&&i.graphics&&!i.graphics.isEmpty()&&(i.getMatrix(r),e.transform(r.a,r.b,r.c,r.d,r.tx,r.ty),i.graphics.drawAsPath(e),e.clip(),r.invert(),e.transform(r.a,r.b,r.c,r.d,r.tx,r.ty)),this.getMatrix(r);var s=r.tx,o=r.ty;t._snapToPixelEnabled&&n.snapToPixel&&(s=s+(0>s?-.5:.5)|0,o=o+(0>o?-.5:.5)|0),e.transform(r.a,r.b,r.c,r.d,s,o),e.globalAlpha*=n.alpha,n.compositeOperation&&(e.globalCompositeOperation=n.compositeOperation),n.shadow&&this._applyShadow(e,n.shadow)},e.cache=function(t,e,n,i,r){r=r||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this._cacheWidth=n,this._cacheHeight=i,this._cacheOffsetX=t,this._cacheOffsetY=e,this._cacheScale=r,this.updateCache()},e.updateCache=function(e){var n=this.cacheCanvas;if(!n)throw"cache() must be called before updateCache()";var i=this._cacheScale,r=this._cacheOffsetX*i,s=this._cacheOffsetY*i,o=this._cacheWidth,a=this._cacheHeight,c=n.getContext("2d"),l=this._getFilterBounds();r+=this._filterOffsetX=l.x,s+=this._filterOffsetY=l.y,o=Math.ceil(o*i)+l.width,a=Math.ceil(a*i)+l.height,o!=n.width||a!=n.height?(n.width=o,n.height=a):e||c.clearRect(0,0,o+1,a+1),c.save(),c.globalCompositeOperation=e,c.setTransform(i,0,0,i,-r,-s),this.draw(c,!0),this._applyFilters(),c.restore(),this.cacheID=t._nextCacheID++},e.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},e.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},e.localToGlobal=function(t,e,n){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(t,e,n||new createjs.Point)},e.globalToLocal=function(t,e,n){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(t,e,n||new createjs.Point)},e.localToLocal=function(t,e,n,i){return i=this.localToGlobal(t,e,i),n.globalToLocal(i.x,i.y,i)},e.setTransform=function(t,e,n,i,r,s,o,a,c){return this.x=t||0,this.y=e||0,this.scaleX=null==n?1:n,this.scaleY=null==i?1:i,this.rotation=r||0,this.skewX=s||0,this.skewY=o||0,this.regX=a||0,this.regY=c||0,this},e.getMatrix=function(t){var e=this,n=t&&t.identity()||new createjs.Matrix2D;return e.transformMatrix?n.copy(e.transformMatrix):n.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY)},e.getConcatenatedMatrix=function(t){for(var e=this,n=this.getMatrix(t);e=e.parent;)n.prependMatrix(e.getMatrix(e._props.matrix));return n},e.getConcatenatedDisplayProps=function(t){t=t?t.identity():new createjs.DisplayProps;var e=this,n=e.getMatrix(t.matrix);do t.prepend(e.visible,e.alpha,e.shadow,e.compositeOperation),e!=this&&n.prependMatrix(e.getMatrix(e._props.matrix));while(e=e.parent);return t},e.hitTest=function(e,n){var i=t._hitTestContext;i.setTransform(1,0,0,1,-e,-n),this.draw(i);var r=this._testHit(i);return i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,2,2),r},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var t=this.cacheCanvas;if(t){var e=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null},e.getTransformedBounds=function(){return this._getBounds()},e.setBounds=function(t,e,n,i){null==t&&(this._bounds=t),this._bounds=(this._bounds||new createjs.Rectangle).setValues(t,e,n,i)},e.clone=function(){return this._cloneProps(new t)},e.toString=function(){return"[DisplayObject (name="+this.name+")]"},e._cloneProps=function(t){return t.alpha=this.alpha,t.mouseEnabled=this.mouseEnabled,t.tickEnabled=this.tickEnabled,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t.compositeOperation=this.compositeOperation,t.snapToPixel=this.snapToPixel,t.filters=null==this.filters?null:this.filters.slice(0),t.mask=this.mask,t.hitArea=this.hitArea,t.cursor=this.cursor,t._bounds=this._bounds,t},e._applyShadow=function(t,e){e=e||Shadow.identity,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur},e._tick=function(t){var e=this._listeners;e&&e.tick&&(t.target=null,t.propagationStopped=t.immediatePropagationStopped=!1,this.dispatchEvent(t))},e._testHit=function(e){try{var n=e.getImageData(0,0,1,1).data[3]>1}catch(i){if(!t.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n},e._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var t=this.filters.length,e=this.cacheCanvas.getContext("2d"),n=this.cacheCanvas.width,i=this.cacheCanvas.height,r=0;t>r;r++)this.filters[r].applyFilter(e,0,0,n,i)},e._getFilterBounds=function(t){var e,n=this.filters,i=this._rectangle.setValues(0,0,0,0);if(!n||!(e=n.length))return i;for(var r=0;e>r;r++){var s=this.filters[r];s.getBounds&&s.getBounds(i)}return i},e._getBounds=function(t,e){return this._transformBounds(this.getBounds(),t,e)},e._transformBounds=function(t,e,n){if(!t)return t;var i=t.x,r=t.y,s=t.width,o=t.height,a=this._props.matrix;a=n?a.identity():this.getMatrix(a),(i||r)&&a.appendTransform(0,0,1,1,0,0,0,-i,-r),e&&a.prependMatrix(e);var c=s*a.a,l=s*a.b,h=o*a.c,u=o*a.d,p=a.tx,d=a.ty,f=p,g=p,m=d,v=d;return(i=c+p)<f?f=i:i>g&&(g=i),(i=c+h+p)<f?f=i:i>g&&(g=i),(i=h+p)<f?f=i:i>g&&(g=i),(r=l+d)<m?m=r:r>v&&(v=r),(r=l+u+d)<m?m=r:r>v&&(v=r),(r=u+d)<m?m=r:r>v&&(v=r),t.setValues(f,m,g-f,v-m)},e._hasMouseEventListener=function(){for(var e=t._MOUSE_EVENTS,n=0,i=e.length;i>n;n++)if(this.hasEventListener(e[n]))return!0;return!!this.cursor},createjs.DisplayObject=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var e=createjs.extend(t,createjs.DisplayObject);e.getNumChildren=function(){return this.children.length};try{Object.defineProperties(e,{numChildren:{get:e.getNumChildren}})}catch(n){}e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;for(var n=this.children.slice(),i=0,r=n.length;r>i;i++){var s=n[i];s.isVisible()&&(t.save(),s.updateContext(t),s.draw(t),t.restore())}return!0},e.addChild=function(t){if(null==t)return t;var e=arguments.length;if(e>1){for(var n=0;e>n;n++)this.addChild(arguments[n]);return arguments[e-1]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),t.dispatchEvent("added"),t},e.addChildAt=function(t,e){var n=arguments.length,i=arguments[n-1];if(0>i||i>this.children.length)return arguments[n-2];if(n>2){for(var r=0;n-1>r;r++)this.addChildAt(arguments[r],i+r);return arguments[n-2]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t.dispatchEvent("added"),t},e.removeChild=function(t){var e=arguments.length;if(e>1){for(var n=!0,i=0;e>i;i++)n=n&&this.removeChild(arguments[i]);return n}return this.removeChildAt(createjs.indexOf(this.children,t))},e.removeChildAt=function(t){var e=arguments.length;if(e>1){for(var n=[],i=0;e>i;i++)n[i]=arguments[i];n.sort(function(t,e){return e-t});for(var r=!0,i=0;e>i;i++)r=r&&this.removeChildAt(n[i]);return r}if(0>t||t>this.children.length-1)return!1;var s=this.children[t];return s&&(s.parent=null),this.children.splice(t,1),s.dispatchEvent("removed"),!0},e.removeAllChildren=function(){for(var t=this.children;t.length;)this.removeChildAt(0)},e.getChildAt=function(t){return this.children[t]},e.getChildByName=function(t){for(var e=this.children,n=0,i=e.length;i>n;n++)if(e[n].name==t)return e[n];return null},e.sortChildren=function(t){this.children.sort(t)},e.getChildIndex=function(t){return createjs.indexOf(this.children,t)},e.swapChildrenAt=function(t,e){var n=this.children,i=n[t],r=n[e];i&&r&&(n[t]=r,n[e]=i)},e.swapChildren=function(t,e){for(var n,i,r=this.children,s=0,o=r.length;o>s&&(r[s]==t&&(n=s),r[s]==e&&(i=s),null==n||null==i);s++);s!=o&&(r[n]=e,r[i]=t)},e.setChildIndex=function(t,e){var n=this.children,i=n.length;if(!(t.parent!=this||0>e||e>=i)){for(var r=0;i>r&&n[r]!=t;r++);r!=i&&r!=e&&(n.splice(r,1),n.splice(e,0,t))}},e.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},e.hitTest=function(t,e){return null!=this.getObjectUnderPoint(t,e)},e.getObjectsUnderPoint=function(t,e,n){var i=[],r=this.localToGlobal(t,e);return this._getObjectsUnderPoint(r.x,r.y,i,n>0,1==n),i},e.getObjectUnderPoint=function(t,e,n){var i=this.localToGlobal(t,e);return this._getObjectsUnderPoint(i.x,i.y,null,n>0,1==n)},e.getBounds=function(){return this._getBounds(null,!0)},e.getTransformedBounds=function(){return this._getBounds()},e.clone=function(e){var n=this._cloneProps(new t);return e&&this._cloneChildren(n),n},e.toString=function(){return"[Container (name="+this.name+")]"},e._tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;e>=0;e--){var n=this.children[e];n.tickEnabled&&n._tick&&n._tick(t)}this.DisplayObject__tick(t)},e._cloneChildren=function(t){t.children.length&&t.removeAllChildren();for(var e=t.children,n=0,i=this.children.length;i>n;n++){var r=this.children[n].clone(!0);r.parent=t,e.push(r)}},e._getObjectsUnderPoint=function(e,n,i,r,s,o){if(o=o||0,!o&&!this._testMask(this,e,n))return null;var a,c=createjs.DisplayObject._hitTestContext;s=s||r&&this._hasMouseEventListener();for(var l=this.children,h=l.length,u=h-1;u>=0;u--){var p=l[u],d=p.hitArea;if(p.visible&&(d||p.isVisible())&&(!r||p.mouseEnabled)&&(d||this._testMask(p,e,n)))if(!d&&p instanceof t){var f=p._getObjectsUnderPoint(e,n,i,r,s,o+1);if(!i&&f)return r&&!this.mouseChildren?this:f}else{if(r&&!s&&!p._hasMouseEventListener())continue;var g=p.getConcatenatedDisplayProps(p._props);if(a=g.matrix,d&&(a.appendMatrix(d.getMatrix(d._props.matrix)),g.alpha=d.alpha),c.globalAlpha=g.alpha,c.setTransform(a.a,a.b,a.c,a.d,a.tx-e,a.ty-n),(d||p).draw(c),!this._testHit(c))continue;if(c.setTransform(1,0,0,1,0,0),c.clearRect(0,0,2,2),!i)return r&&!this.mouseChildren?this:p;i.push(p)}}return null},e._testMask=function(t,e,n){var i=t.mask;if(!i||!i.graphics||i.graphics.isEmpty())return!0;var r=this._props.matrix,s=t.parent;r=s?s.getConcatenatedMatrix(r):r.identity(),r=i.getMatrix(i._props.matrix).prependMatrix(r);var o=createjs.DisplayObject._hitTestContext;return o.setTransform(r.a,r.b,r.c,r.d,r.tx-e,r.ty-n),i.graphics.drawAsPath(o),o.fillStyle="#000",o.fill(),this._testHit(o)?(o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,2,2),!0):!1},e._getBounds=function(t,e){var n=this.DisplayObject_getBounds();if(n)return this._transformBounds(n,t,e);var i=this._props.matrix;i=e?i.identity():this.getMatrix(i),t&&i.prependMatrix(t);for(var r=this.children.length,s=null,o=0;r>o;o++){var a=this.children[o];a.visible&&(n=a._getBounds(i))&&(s?s.extend(n.x,n.y,n.width,n.height):s=n.clone())}return s},createjs.Container=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof t?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var e=createjs.extend(t,createjs.Container);
e._get_nextStage=function(){return this._nextStage},e._set_nextStage=function(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t};try{Object.defineProperties(e,{nextStage:{get:e._get_nextStage,set:e._set_nextStage}})}catch(n){}e.update=function(t){if(this.canvas&&(this.tickOnUpdate&&this.tick(t),this.dispatchEvent("drawstart",!1,!0)!==!1)){createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var e=this.drawRect,n=this.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),this.autoClear&&(e?n.clearRect(e.x,e.y,e.width,e.height):n.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),n.save(),this.drawRect&&(n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.clip()),this.updateContext(n),this.draw(n,!1),n.restore(),this.dispatchEvent("drawend")}},e.tick=function(t){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var e=new createjs.Event("tick");if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);this._tick(e),this.dispatchEvent("tickend")}},e.handleEvent=function(t){"tick"==t.type&&this.update(t)},e.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},e.toDataURL=function(t,e){var n,i=this.canvas.getContext("2d"),r=this.canvas.width,s=this.canvas.height;if(t){n=i.getImageData(0,0,r,s);var o=i.globalCompositeOperation;i.globalCompositeOperation="destination-over",i.fillStyle=t,i.fillRect(0,0,r,s)}var a=this.canvas.toDataURL(e||"image/png");return t&&(i.putImageData(n,0,0),i.globalCompositeOperation=o),a},e.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==t&&this._testMouseOver(!0)),null==t)t=20;else if(0>=t)return;var e=this;this._mouseOverIntervalID=setInterval(function(){e._testMouseOver()},1e3/Math.min(50,t))},e.enableDOMEvents=function(t){null==t&&(t=!0);var e,n,i=this._eventListeners;if(!t&&i){for(e in i)n=i[e],n.t.removeEventListener(e,n.f,!1);this._eventListeners=null}else if(t&&!i&&this.canvas){var r=window.addEventListener?window:document,s=this;i=this._eventListeners={},i.mouseup={t:r,f:function(t){s._handleMouseUp(t)}},i.mousemove={t:r,f:function(t){s._handleMouseMove(t)}},i.dblclick={t:this.canvas,f:function(t){s._handleDoubleClick(t)}},i.mousedown={t:this.canvas,f:function(t){s._handleMouseDown(t)}};for(e in i)n=i[e],n.t.addEventListener(e,n.f,!1)}},e.clone=function(){throw"Stage cannot be cloned."},e.toString=function(){return"[Stage (name="+this.name+")]"},e._getElementRect=function(t){var e;try{e=t.getBoundingClientRect()}catch(n){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var i=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),r=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),s=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,o=parseInt(s.paddingLeft)+parseInt(s.borderLeftWidth),a=parseInt(s.paddingTop)+parseInt(s.borderTopWidth),c=parseInt(s.paddingRight)+parseInt(s.borderRightWidth),l=parseInt(s.paddingBottom)+parseInt(s.borderBottomWidth);return{left:e.left+i+o,right:e.right+i-c,top:e.top+r+a,bottom:e.bottom+r-l}},e._getPointerData=function(t){var e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0}),e},e._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},e._handlePointerMove=function(t,e,n,i,r){if((!this._prevStage||void 0!==r)&&this.canvas){var s=this._nextStage,o=this._getPointerData(t),a=o.inBounds;this._updatePointerPosition(t,e,n,i),(a||o.inBounds||this.mouseMoveOutside)&&(-1===t&&o.inBounds==!a&&this._dispatchMouseEvent(this,a?"mouseleave":"mouseenter",!1,t,o,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,o,e),this._dispatchMouseEvent(o.target,"pressmove",!0,t,o,e)),s&&s._handlePointerMove(t,e,n,i,null)}},e._updatePointerPosition=function(t,e,n,i){var r=this._getElementRect(this.canvas);n-=r.left,i-=r.top;var s=this.canvas.width,o=this.canvas.height;n/=(r.right-r.left)/s,i/=(r.bottom-r.top)/o;var a=this._getPointerData(t);(a.inBounds=n>=0&&i>=0&&s-1>=n&&o-1>=i)?(a.x=n,a.y=i):this.mouseMoveOutside&&(a.x=0>n?0:n>s-1?s-1:n,a.y=0>i?0:i>o-1?o-1:i),a.posEvtObj=e,a.rawX=n,a.rawY=i,(t===this._primaryPointerID||-1===t)&&(this.mouseX=a.x,this.mouseY=a.y,this.mouseInBounds=a.inBounds)},e._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},e._handlePointerUp=function(t,e,n,i){var r=this._nextStage,s=this._getPointerData(t);if(!this._prevStage||void 0!==i){var o=null,a=s.target;i||!a&&!r||(o=this._getObjectsUnderPoint(s.x,s.y,null,!0)),s.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,t,s,e,o),s.down=!1),o==a&&this._dispatchMouseEvent(a,"click",!0,t,s,e),this._dispatchMouseEvent(a,"pressup",!0,t,s,e),n?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):s.target=null,r&&r._handlePointerUp(t,e,n,i||o&&this)}},e._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},e._handlePointerDown=function(t,e,n,i,r){this.preventSelection&&e.preventDefault(),(null==this._primaryPointerID||-1===t)&&(this._primaryPointerID=t),null!=i&&this._updatePointerPosition(t,e,n,i);var s=null,o=this._nextStage,a=this._getPointerData(t);r||(s=a.target=this._getObjectsUnderPoint(a.x,a.y,null,!0)),a.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,a,e,s),a.down=!0),this._dispatchMouseEvent(s,"mousedown",!0,t,a,e),o&&o._handlePointerDown(t,e,n,i,r||s&&this)},e._testMouseOver=function(t,e,n){if(!this._prevStage||void 0!==e){var i=this._nextStage;if(!this._mouseOverIntervalID)return void(i&&i._testMouseOver(t,e,n));var r=this._getPointerData(-1);if(r&&(t||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var s,o,a,c=r.posEvtObj,l=n||c&&c.target==this.canvas,h=null,u=-1,p="";!e&&(t||this.mouseInBounds&&l)&&(h=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var d=this._mouseOverTarget||[],f=d[d.length-1],g=this._mouseOverTarget=[];for(s=h;s;)g.unshift(s),p||(p=s.cursor),s=s.parent;for(this.canvas.style.cursor=p,!e&&n&&(n.canvas.style.cursor=p),o=0,a=g.length;a>o&&g[o]==d[o];o++)u=o;for(f!=h&&this._dispatchMouseEvent(f,"mouseout",!0,-1,r,c,h),o=d.length-1;o>u;o--)this._dispatchMouseEvent(d[o],"rollout",!1,-1,r,c,h);for(o=g.length-1;o>u;o--)this._dispatchMouseEvent(g[o],"rollover",!1,-1,r,c,f);f!=h&&this._dispatchMouseEvent(h,"mouseover",!0,-1,r,c,f),i&&i._testMouseOver(t,e||h&&this,n||l&&this)}}},e._handleDoubleClick=function(t,e){var n=null,i=this._nextStage,r=this._getPointerData(-1);e||(n=this._getObjectsUnderPoint(r.x,r.y,null,!0),this._dispatchMouseEvent(n,"dblclick",!0,-1,r,t)),i&&i._handleDoubleClick(t,e||n&&this)},e._dispatchMouseEvent=function(t,e,n,i,r,s,o){if(t&&(n||t.hasEventListener(e))){var a=new createjs.MouseEvent(e,n,!1,r.x,r.y,s,i,i===this._primaryPointerID||-1===i,r.rawX,r.rawY,o);t.dispatchEvent(a)}},createjs.Stage=createjs.promote(t,"Container")}(),this.createjs=this.createjs||{},function(){function t(t){this.DisplayObject_constructor(),"string"==typeof t?(this.image=document.createElement("img"),this.image.src=t):this.image=t,this.sourceRect=null}var e=createjs.extend(t,createjs.DisplayObject);e.initialize=t,e.isVisible=function(){var t=this.image,e=this.cacheCanvas||t&&(t.naturalWidth||t.getContext||t.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e)||!this.image)return!0;var n=this.image,i=this.sourceRect;if(i){var r=i.x,s=i.y,o=r+i.width,a=s+i.height,c=0,l=0,h=n.width,u=n.height;0>r&&(c-=r,r=0),o>h&&(o=h),0>s&&(l-=s,s=0),a>u&&(a=u),t.drawImage(n,r,s,o-r,a-s,c,l,o-r,a-s)}else t.drawImage(n,0,0);return!0},e.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var e=this.image,n=this.sourceRect||e,i=e&&(e.naturalWidth||e.getContext||e.readyState>=2);return i?this._rectangle.setValues(0,0,n.width,n.height):null},e.clone=function(){var e=new t(this.image);return this.sourceRect&&(e.sourceRect=this.sourceRect.clone()),this._cloneProps(e),e},e.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,null!=e&&this.gotoAndPlay(e)}var e=createjs.extend(t,createjs.DisplayObject);e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(0|this._currentFrame);if(!n)return!1;var i=n.rect;return i.width&&i.height&&t.drawImage(n.image,i.x,i.y,i.width,i.height,-n.regX,-n.regY,i.width,i.height),!0},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.advance=function(t){var e=this.framerate||this.spriteSheet.framerate,n=e&&null!=t?t/(1e3/e):1;this._normalizeFrame(n)},e.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},e.clone=function(){return this._cloneProps(new t(this.spriteSheet))},e.toString=function(){return"[Sprite (name="+this.name+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t},e._tick=function(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),this.DisplayObject__tick(t)},e._normalizeFrame=function(t){t=t||0;var e,n=this._animation,i=this.paused,r=this._currentFrame;if(n){var s=n.speed||1,o=this.currentAnimationFrame;if(e=n.frames.length,o+t*s>=e){var a=n.next;if(this._dispatchAnimationEnd(n,r,i,a,e-1))return;if(a)return this._goto(a,t-(e-o)/s);this.paused=!0,o=n.frames.length-1}else o+=t*s;this.currentAnimationFrame=o,this._currentFrame=n.frames[0|o]}else if(r=this._currentFrame+=t,e=this.spriteSheet.getNumFrames(),r>=e&&e>0&&!this._dispatchAnimationEnd(n,r,i,e-1)&&(this._currentFrame-=e)>=e)return this._normalizeFrame();r=0|this._currentFrame,this.currentFrame!=r&&(this.currentFrame=r,this.dispatchEvent("change"))},e._dispatchAnimationEnd=function(t,e,n,i,r){var s=t?t.name:null;if(this.hasEventListener("animationend")){var o=new createjs.Event("animationend");o.name=s,o.next=i,this.dispatchEvent(o)}var a=this._animation!=t||this._currentFrame!=e;return a||n||!this.paused||(this.currentAnimationFrame=r,a=!0),a},e._goto=function(t,e){if(this.currentAnimationFrame=0,isNaN(t)){var n=this.spriteSheet.getAnimation(t);n&&(this._animation=n,this.currentAnimation=t,this._normalizeFrame(e))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},createjs.Sprite=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.DisplayObject_constructor(),this.graphics=t?t:new createjs.Graphics}var e=createjs.extend(t,createjs.DisplayObject);e.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){return this.DisplayObject_draw(t,e)?!0:(this.graphics.draw(t,this),!0)},e.clone=function(e){var n=e&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new t(n))},e.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n){this.DisplayObject_constructor(),this.text=t,this.font=e,this.color=n,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var e=createjs.extend(t,createjs.DisplayObject),n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");n.getContext&&(t._workingContext=n.getContext("2d"),n.width=n.height=1),t.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},t.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},e.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var n=this.color||"#000";return this.outline?(t.strokeStyle=n,t.lineWidth=1*this.outline):t.fillStyle=n,this._drawText(this._prepContext(t)),!0},e.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},e.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},e.getMeasuredHeight=function(){return this._drawText(null,{}).height},e.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;if(null==this.text||""===this.text)return null;var n=this._drawText(null,{}),i=this.maxWidth&&this.maxWidth<n.width?this.maxWidth:n.width,r=i*t.H_OFFSETS[this.textAlign||"left"],s=this.lineHeight||this.getMeasuredLineHeight(),o=s*t.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(r,o,i,n.height)},e.getMetrics=function(){var e={lines:[]};return e.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),e.vOffset=e.lineHeight*t.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,e,e.lines)},e.clone=function(){return this._cloneProps(new t(this.text,this.font,this.color))},e.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth,t},e._prepContext=function(t){return t.font=this.font||"10px sans-serif",t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t},e._drawText=function(e,n,i){var r=!!e;r||(e=t._workingContext,e.save(),this._prepContext(e));for(var s=this.lineHeight||this.getMeasuredLineHeight(),o=0,a=0,c=String(this.text).split(/(?:\r\n|\r|\n)/),l=0,h=c.length;h>l;l++){var u=c[l],p=null;if(null!=this.lineWidth&&(p=e.measureText(u).width)>this.lineWidth){var d=u.split(/(\s)/);u=d[0],p=e.measureText(u).width;for(var f=1,g=d.length;g>f;f+=2){var m=e.measureText(d[f]+d[f+1]).width;p+m>this.lineWidth?(r&&this._drawTextLine(e,u,a*s),i&&i.push(u),p>o&&(o=p),u=d[f+1],p=e.measureText(u).width,a++):(u+=d[f]+d[f+1],p+=m)}}r&&this._drawTextLine(e,u,a*s),i&&i.push(u),n&&null==p&&(p=e.measureText(u).width),p>o&&(o=p),a++}return n&&(n.width=o,n.height=a*s),r||e.restore(),n},e._drawTextLine=function(t,e,n){this.outline?t.strokeText(e,0,n,this.maxWidth||65535):t.fillText(e,0,n,this.maxWidth||65535)},e._getMeasuredWidth=function(e){var n=t._workingContext;n.save();var i=this._prepContext(n).measureText(e).width;return n.restore(),i},createjs.Text=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.Container_constructor(),this.text=t||"",this.spriteSheet=e,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var e=createjs.extend(t,createjs.Container);t.maxPoolSize=100,t._spritePool=[],e.draw=function(t,e){this.DisplayObject_draw(t,e)||(this._updateText(),this.Container_draw(t,e))},e.getBounds=function(){return this._updateText(),this.Container_getBounds()},e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&t)},e.clone=function(){return this._cloneProps(new t(this.text,this.spriteSheet))},e.addChild=e.addChildAt=e.removeChild=e.removeChildAt=e.removeAllChildren=function(){},e._cloneProps=function(t){return this.Container__cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t},e._getFrameIndex=function(t,e){var n,i=e.getAnimation(t);return i||(t!=(n=t.toUpperCase())||t!=(n=t.toLowerCase())||(n=null),n&&(i=e.getAnimation(n))),i&&i.frames[0]},e._getFrame=function(t,e){var n=this._getFrameIndex(t,e);return null==n?n:e.getFrame(n)},e._getLineHeight=function(t){var e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1},e._getSpaceWidth=function(t){var e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1},e._updateText=function(){var e,n=0,i=0,r=this._oldProps,s=!1,o=this.spaceWidth,a=this.lineHeight,c=this.spriteSheet,l=t._spritePool,h=this.children,u=0,p=h.length;for(var d in r)r[d]!=this[d]&&(r[d]=this[d],s=!0);if(s){var f=!!this._getFrame(" ",c);f||o||(o=this._getSpaceWidth(c)),a||(a=this._getLineHeight(c));for(var g=0,m=this.text.length;m>g;g++){var v=this.text.charAt(g);if(" "!=v||f)if("\n"!=v&&"\r"!=v){var y=this._getFrameIndex(v,c);null!=y&&(p>u?e=h[u]:(h.push(e=l.length?l.pop():new createjs.Sprite),e.parent=this,p++),e.spriteSheet=c,e.gotoAndStop(y),e.x=n,e.y=i,u++,n+=e.getBounds().width+this.letterSpacing)}else"\r"==v&&"\n"==this.text.charAt(g+1)&&g++,n=0,i+=a;else n+=o}for(;p>u;)l.push(e=h.pop()),e.parent=null,p--;l.length>t.maxPoolSize&&(l.length=t.maxPoolSize)}},createjs.BitmapText=createjs.promote(t,"Container")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"SpriteSheetUtils cannot be instantiated"}var e=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");e.getContext&&(t._workingCanvas=e,t._workingContext=e.getContext("2d"),e.width=e.height=1),t.addFlippedFrames=function(e,n,i,r){if(n||i||r){var s=0;n&&t._flip(e,++s,!0,!1),i&&t._flip(e,++s,!1,!0),r&&t._flip(e,++s,!0,!0)}},t.extractFrame=function(e,n){isNaN(n)&&(n=e.getAnimation(n).frames[0]);var i=e.getFrame(n);if(!i)return null;var r=i.rect,s=t._workingCanvas;s.width=r.width,s.height=r.height,t._workingContext.drawImage(i.image,r.x,r.y,r.width,r.height,0,0,r.width,r.height);var o=document.createElement("img");return o.src=s.toDataURL("image/png"),o},t.mergeAlpha=function(t,e,n){n||(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),n.width=Math.max(e.width,t.width),n.height=Math.max(e.height,t.height);var i=n.getContext("2d");return i.save(),i.drawImage(t,0,0),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),i.restore(),n},t._flip=function(e,n,i,r){for(var s=e._images,o=t._workingCanvas,a=t._workingContext,c=s.length/n,l=0;c>l;l++){var h=s[l];h.__tmp=l,a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,o.width+1,o.height+1),o.width=h.width,o.height=h.height,a.setTransform(i?-1:1,0,0,r?-1:1,i?h.width:0,r?h.height:0),a.drawImage(h,0,0);var u=document.createElement("img");u.src=o.toDataURL("image/png"),u.width=h.width,u.height=h.height,s.push(u)}var p=e._frames,d=p.length/n;for(l=0;d>l;l++){h=p[l];var f=h.rect.clone();u=s[h.image.__tmp+c*n];var g={image:u,rect:f,regX:h.regX,regY:h.regY};i&&(f.x=u.width-f.x-f.width,g.regX=f.width-h.regX),r&&(f.y=u.height-f.y-f.height,g.regY=f.height-h.regY),p.push(g)}var m="_"+(i?"h":"")+(r?"v":""),v=e._animations,y=e._data,_=v.length/n;for(l=0;_>l;l++){var b=v[l];h=y[b];var x={name:b+m,speed:h.speed,next:h.next,frames:[]};h.next&&(x.next+=m),p=h.frames;for(var w=0,E=p.length;E>w;w++)x.frames.push(p[w]+d*n);y[x.name]=x,v.push(x.name)}},createjs.SpriteSheetUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var e=createjs.extend(t,createjs.EventDispatcher);t.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",t.ERR_RUNNING="a build is already running",e.addFrame=function(e,n,i,r,s){if(this._data)throw t.ERR_RUNNING;var o=n||e.bounds||e.nominalBounds;return!o&&e.getBounds&&(o=e.getBounds()),o?(i=i||1,this._frames.push({source:e,sourceRect:o,scale:i,funct:r,data:s,index:this._frames.length,height:o.height*i})-1):null},e.addAnimation=function(e,n,i,r){if(this._data)throw t.ERR_RUNNING;this._animations[e]={frames:n,next:i,frequency:r}},e.addMovieClip=function(e,n,i,r,s,o){if(this._data)throw t.ERR_RUNNING;var a=e.frameBounds,c=n||e.bounds||e.nominalBounds;if(!c&&e.getBounds&&(c=e.getBounds()),c||a){var l,h,u=this._frames.length,p=e.timeline.duration;for(l=0;p>l;l++){var d=a&&a[l]?a[l]:c;this.addFrame(e,d,i,this._setupMovieClipFrame,{i:l,f:r,d:s})}var f=e.timeline._labels,g=[];for(var m in f)g.push({index:f[m],label:m});if(g.length)for(g.sort(function(t,e){return t.index-e.index}),l=0,h=g.length;h>l;l++){for(var v=g[l].label,y=u+g[l].index,_=u+(l==h-1?p:g[l+1].index),b=[],x=y;_>x;x++)b.push(x);(!o||(v=o(v,e,y,_)))&&this.addAnimation(v,b,!0)}}},e.build=function(){if(this._data)throw t.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},e.buildAsync=function(e){if(this._data)throw t.ERR_RUNNING;this.timeSlice=e,this._startBuild();var n=this;this._timerID=setTimeout(function(){n._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},e.stopAsync=function(){clearTimeout(this._timerID),this._data=null},e.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},e.toString=function(){return"[SpriteSheetBuilder]"},e._startBuild=function(){var e=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var n=[];this._data={images:[],frames:n,animations:this._animations};var i=this._frames.slice();if(i.sort(function(t,e){return t.height<=e.height?-1:1}),i[i.length-1].height+2*e>this.maxHeight)throw t.ERR_DIMENSIONS;for(var r=0,s=0,o=0;i.length;){var a=this._fillRow(i,r,o,n,e);if(a.w>s&&(s=a.w),r+=a.h,!a.h||!i.length){var c=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");c.width=this._getSize(s,this.maxWidth),c.height=this._getSize(r,this.maxHeight),this._data.images[o]=c,a.h||(s=r=0,o++)}}},e._setupMovieClipFrame=function(t,e){var n=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e.i),t.actionsEnabled=n,e.f&&e.f(t,e.d,e.i)},e._getSize=function(t,e){for(var n=4;Math.pow(2,++n)<t;);return Math.min(e,Math.pow(2,n))},e._fillRow=function(e,n,i,r,s){var o=this.maxWidth,a=this.maxHeight;n+=s;for(var c=a-n,l=s,h=0,u=e.length-1;u>=0;u--){var p=e[u],d=this._scale*p.scale,f=p.sourceRect,g=p.source,m=Math.floor(d*f.x-s),v=Math.floor(d*f.y-s),y=Math.ceil(d*f.height+2*s),_=Math.ceil(d*f.width+2*s);if(_>o)throw t.ERR_DIMENSIONS;y>c||l+_>o||(p.img=i,p.rect=new createjs.Rectangle(l,n,_,y),h=h||y,e.splice(u,1),r[p.index]=[l,n,_,y,i,Math.round(-m+d*g.regX-s),Math.round(-v+d*g.regY-s)],l+=_)}return{w:l,h:h}},e._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},e._run=function(){for(var t=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),e=(new Date).getTime()+t,n=!1;e>(new Date).getTime();)if(!this._drawNext()){n=!0;break}if(n)this._endBuild();else{var i=this;this._timerID=setTimeout(function(){i._run()},50-t)}var r=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var s=new createjs.Event("progress");s.progress=r,this.dispatchEvent(s)}},e._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,n=t.rect,i=t.sourceRect,r=this._data.images[t.img],s=r.getContext("2d");return t.funct&&t.funct(t.source,t.data),s.save(),s.beginPath(),s.rect(n.x,n.y,n.width,n.height),s.clip(),s.translate(Math.ceil(n.x-i.x*e),Math.ceil(n.y-i.y*e)),s.scale(e,e),t.source.draw(s),s.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.DisplayObject_constructor(),"string"==typeof t&&(t=document.getElementById(t)),this.mouseEnabled=!1;var e=t.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%",this.htmlElement=t,this._oldProps=null}var e=createjs.extend(t,createjs.DisplayObject);e.isVisible=function(){return null!=this.htmlElement},e.draw=function(t,e){return!0},e.cache=function(){},e.uncache=function(){},e.updateCache=function(){},e.hitTest=function(){},e.localToGlobal=function(){},e.globalToLocal=function(){},e.localToLocal=function(){},e.clone=function(){throw"DOMElement cannot be cloned."},e.toString=function(){return"[DOMElement (name="+this.name+")]"},e._tick=function(t){var e=this.getStage();e&&e.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(t)},e._handleDrawEnd=function(t){var e=this.htmlElement;if(e){var n=e.style,i=this.getConcatenatedDisplayProps(this._props),r=i.matrix,s=i.visible?"visible":"hidden";if(s!=n.visibility&&(n.visibility=s),i.visible){var o=this._oldProps,a=o&&o.matrix,c=1e4;if(!a||!a.equals(r)){var l="matrix("+(r.a*c|0)/c+","+(r.b*c|0)/c+","+(r.c*c|0)/c+","+(r.d*c|0)/c+","+(r.tx+.5|0);n.transform=n.WebkitTransform=n.OTransform=n.msTransform=l+","+(r.ty+.5|0)+")",n.MozTransform=l+"px,"+(r.ty+.5|0)+"px)",o||(o=this._oldProps=new createjs.DisplayProps(!0,NaN)),o.matrix.copy(r)}o.alpha!=i.alpha&&(n.opacity=""+(i.alpha*c|0)/c,o.alpha=i.alpha)}}},createjs.DOMElement=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){}var e=t.prototype;e.getBounds=function(t){return t},e.applyFilter=function(t,e,n,i,r,s,o,a){s=s||t,null==o&&(o=e),null==a&&(a=n);try{var c=t.getImageData(e,n,i,r)}catch(l){return!1}return this._applyFilter(c)?(s.putImageData(c,o,a),!0):!1},e.toString=function(){return"[Filter]"},e.clone=function(){return new t},e._applyFilter=function(t){return!0},createjs.Filter=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n){(isNaN(t)||0>t)&&(t=0),(isNaN(e)||0>e)&&(e=0),(isNaN(n)||1>n)&&(n=1),this.blurX=0|t,this.blurY=0|e,this.quality=0|n}var e=createjs.extend(t,createjs.Filter);t.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],t.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],e.getBounds=function(t){var e=0|this.blurX,n=0|this.blurY;if(0>=e&&0>=n)return t;var i=Math.pow(this.quality,.2);return(t||new createjs.Rectangle).pad(e*i+1,n*i+1,e*i+1,n*i+1)},e.clone=function(){return new t(this.blurX,this.blurY,this.quality)},e.toString=function(){return"[BlurFilter]"},e._applyFilter=function(e){var n=this.blurX>>1;if(isNaN(n)||0>n)return!1;var i=this.blurY>>1;if(isNaN(i)||0>i)return!1;if(0==n&&0==i)return!1;var r=this.quality;(isNaN(r)||1>r)&&(r=1),r|=0,r>3&&(r=3),1>r&&(r=1);var s=e.data,o=0,a=0,c=0,l=0,h=0,u=0,p=0,d=0,f=0,g=0,m=0,v=0,y=0,_=0,b=0,x=n+n+1|0,w=i+i+1|0,E=0|e.width,S=0|e.height,T=E-1|0,L=S-1|0,C=n+1|0,A=i+1|0,j={r:0,b:0,g:0,a:0},k=j;for(c=1;x>c;c++)k=k.n={r:0,b:0,g:0,a:0};k.n=j;var I={r:0,b:0,g:0,a:0},M=I;for(c=1;w>c;c++)M=M.n={r:0,b:0,g:0,a:0};M.n=I;for(var P=null,D=0|t.MUL_TABLE[n],R=0|t.SHG_TABLE[n],N=0|t.MUL_TABLE[i],O=0|t.SHG_TABLE[i];r-- >0;){p=u=0;var F=D,B=R;for(a=S;--a>-1;){for(d=C*(v=s[0|u]),f=C*(y=s[u+1|0]),g=C*(_=s[u+2|0]),m=C*(b=s[u+3|0]),k=j,c=C;--c>-1;)k.r=v,k.g=y,k.b=_,k.a=b,k=k.n;for(c=1;C>c;c++)l=u+((c>T?T:c)<<2)|0,d+=k.r=s[l],f+=k.g=s[l+1],g+=k.b=s[l+2],m+=k.a=s[l+3],k=k.n;for(P=j,o=0;E>o;o++)s[u++]=d*F>>>B,s[u++]=f*F>>>B,s[u++]=g*F>>>B,s[u++]=m*F>>>B,l=p+((l=o+n+1)<T?l:T)<<2,d-=P.r-(P.r=s[l]),f-=P.g-(P.g=s[l+1]),g-=P.b-(P.b=s[l+2]),m-=P.a-(P.a=s[l+3]),P=P.n;p+=E}for(F=N,B=O,o=0;E>o;o++){for(u=o<<2|0,d=A*(v=s[u])|0,f=A*(y=s[u+1|0])|0,g=A*(_=s[u+2|0])|0,m=A*(b=s[u+3|0])|0,M=I,c=0;A>c;c++)M.r=v,M.g=y,M.b=_,M.a=b,M=M.n;for(h=E,c=1;i>=c;c++)u=h+o<<2,d+=M.r=s[u],f+=M.g=s[u+1],g+=M.b=s[u+2],m+=M.a=s[u+3],M=M.n,L>c&&(h+=E);if(u=o,P=I,r>0)for(a=0;S>a;a++)l=u<<2,s[l+3]=b=m*F>>>B,b>0?(s[l]=d*F>>>B,s[l+1]=f*F>>>B,s[l+2]=g*F>>>B):s[l]=s[l+1]=s[l+2]=0,l=o+((l=a+A)<L?l:L)*E<<2,d-=P.r-(P.r=s[l]),f-=P.g-(P.g=s[l+1]),g-=P.b-(P.b=s[l+2]),m-=P.a-(P.a=s[l+3]),P=P.n,u+=E;else for(a=0;S>a;a++)l=u<<2,s[l+3]=b=m*F>>>B,b>0?(b=255/b,s[l]=(d*F>>>B)*b,s[l+1]=(f*F>>>B)*b,s[l+2]=(g*F>>>B)*b):s[l]=s[l+1]=s[l+2]=0,l=o+((l=a+A)<L?l:L)*E<<2,d-=P.r-(P.r=s[l]),f-=P.g-(P.g=s[l+1]),g-=P.b-(P.b=s[l+2]),m-=P.a-(P.a=s[l+3]),P=P.n,u+=E}}return!0},createjs.BlurFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.alphaMap=t,this._alphaMap=null,this._mapData=null}var e=createjs.extend(t,createjs.Filter);e.clone=function(){var e=new t(this.alphaMap);return e._alphaMap=this._alphaMap,e._mapData=this._mapData,e},e.toString=function(){return"[AlphaMapFilter]"},e._applyFilter=function(t){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var e=t.data,n=this._mapData,i=0,r=e.length;r>i;i+=4)e[i+3]=n[i]||0;return!0},e._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var t,e=this._alphaMap=this.alphaMap,n=e;e instanceof HTMLCanvasElement?t=n.getContext("2d"):(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),n.width=e.width,n.height=e.height,t=n.getContext("2d"),t.drawImage(e,0,0));try{var i=t.getImageData(0,0,e.width,e.height)}catch(r){return!1}return this._mapData=i.data,!0},createjs.AlphaMapFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.mask=t}var e=createjs.extend(t,createjs.Filter);e.applyFilter=function(t,e,n,i,r,s,o,a){return this.mask?(s=s||t,null==o&&(o=e),null==a&&(a=n),s.save(),t!=s?!1:(s.globalCompositeOperation="destination-in",s.drawImage(this.mask,o,a),
s.restore(),!0)):!0},e.clone=function(){return new t(this.mask)},e.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,i,r,s,o,a){this.redMultiplier=null!=t?t:1,this.greenMultiplier=null!=e?e:1,this.blueMultiplier=null!=n?n:1,this.alphaMultiplier=null!=i?i:1,this.redOffset=r||0,this.greenOffset=s||0,this.blueOffset=o||0,this.alphaOffset=a||0}var e=createjs.extend(t,createjs.Filter);e.toString=function(){return"[ColorFilter]"},e.clone=function(){return new t(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},e._applyFilter=function(t){for(var e=t.data,n=e.length,i=0;n>i;i+=4)e[i]=e[i]*this.redMultiplier+this.redOffset,e[i+1]=e[i+1]*this.greenMultiplier+this.greenOffset,e[i+2]=e[i+2]*this.blueMultiplier+this.blueOffset,e[i+3]=e[i+3]*this.alphaMultiplier+this.alphaOffset;return!0},createjs.ColorFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,i){this.setColor(t,e,n,i)}var e=t.prototype;t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t.LENGTH=t.IDENTITY_MATRIX.length,e.setColor=function(t,e,n,i){return this.reset().adjustColor(t,e,n,i)},e.reset=function(){return this.copy(t.IDENTITY_MATRIX)},e.adjustColor=function(t,e,n,i){return this.adjustHue(i),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(n)},e.adjustBrightness=function(t){return 0==t||isNaN(t)?this:(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},e.adjustContrast=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,100);var n;return 0>e?n=127+e/100*127:(n=e%1,n=0==n?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-n)+t.DELTA_INDEX[(e<<0)+1]*n,n=127*n+127),this._multiplyMatrix([n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1]),this},e.adjustSaturation=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,100);var e=1+(t>0?3*t/100:t/100),n=.3086,i=.6094,r=.082;return this._multiplyMatrix([n*(1-e)+e,i*(1-e),r*(1-e),0,0,n*(1-e),i*(1-e)+e,r*(1-e),0,0,n*(1-e),i*(1-e),r*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.adjustHue=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),n=Math.sin(t),i=.213,r=.715,s=.072;return this._multiplyMatrix([i+e*(1-i)+n*-i,r+e*-r+n*-r,s+e*-s+n*(1-s),0,0,i+e*-i+.143*n,r+e*(1-r)+.14*n,s+e*-s+n*-.283,0,0,i+e*-i+n*-(1-i),r+e*-r+n*r,s+e*(1-s)+n*s,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.concat=function(e){return e=this._fixMatrix(e),e.length!=t.LENGTH?this:(this._multiplyMatrix(e),this)},e.clone=function(){return(new t).copy(this)},e.toArray=function(){for(var e=[],n=0,i=t.LENGTH;i>n;n++)e[n]=this[n];return e},e.copy=function(e){for(var n=t.LENGTH,i=0;n>i;i++)this[i]=e[i];return this},e.toString=function(){return"[ColorMatrix]"},e._multiplyMatrix=function(t){var e,n,i,r=[];for(e=0;5>e;e++){for(n=0;5>n;n++)r[n]=this[n+5*e];for(n=0;5>n;n++){var s=0;for(i=0;5>i;i++)s+=t[n+5*i]*r[i];this[n+5*e]=s}}},e._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},e._fixMatrix=function(e){return e instanceof t&&(e=e.toArray()),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e},createjs.ColorMatrix=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.matrix=t}var e=createjs.extend(t,createjs.Filter);e.toString=function(){return"[ColorMatrixFilter]"},e.clone=function(){return new t(this.matrix)},e._applyFilter=function(t){for(var e,n,i,r,s=t.data,o=s.length,a=this.matrix,c=a[0],l=a[1],h=a[2],u=a[3],p=a[4],d=a[5],f=a[6],g=a[7],m=a[8],v=a[9],y=a[10],_=a[11],b=a[12],x=a[13],w=a[14],E=a[15],S=a[16],T=a[17],L=a[18],C=a[19],A=0;o>A;A+=4)e=s[A],n=s[A+1],i=s[A+2],r=s[A+3],s[A]=e*c+n*l+i*h+r*u+p,s[A+1]=e*d+n*f+i*g+r*m+v,s[A+2]=e*y+n*_+i*b+r*x+w,s[A+3]=e*E+n*S+i*T+r*L+C;return!0},createjs.ColorMatrixFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Touch cannot be instantiated"}t.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},t.enable=function(e,n,i){return e&&e.canvas&&t.isSupported()?e.__touch?!0:(e.__touch={pointers:{},multitouch:!n,preventDefault:!i,count:0},"ontouchstart"in window?t._IOS_enable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_enable(e),!0):!1},t.disable=function(e){e&&("ontouchstart"in window?t._IOS_disable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_disable(e),delete e.__touch)},t._IOS_enable=function(e){var n=e.canvas,i=e.__touch.f=function(n){t._IOS_handleEvent(e,n)};n.addEventListener("touchstart",i,!1),n.addEventListener("touchmove",i,!1),n.addEventListener("touchend",i,!1),n.addEventListener("touchcancel",i,!1)},t._IOS_disable=function(t){var e=t.canvas;if(e){var n=t.__touch.f;e.removeEventListener("touchstart",n,!1),e.removeEventListener("touchmove",n,!1),e.removeEventListener("touchend",n,!1),e.removeEventListener("touchcancel",n,!1)}},t._IOS_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();for(var n=e.changedTouches,i=e.type,r=0,s=n.length;s>r;r++){var o=n[r],a=o.identifier;o.target==t.canvas&&("touchstart"==i?this._handleStart(t,a,e,o.pageX,o.pageY):"touchmove"==i?this._handleMove(t,a,e,o.pageX,o.pageY):("touchend"==i||"touchcancel"==i)&&this._handleEnd(t,a,e))}}},t._IE_enable=function(e){var n=e.canvas,i=e.__touch.f=function(n){t._IE_handleEvent(e,n)};void 0===window.navigator.pointerEnabled?(n.addEventListener("MSPointerDown",i,!1),window.addEventListener("MSPointerMove",i,!1),window.addEventListener("MSPointerUp",i,!1),window.addEventListener("MSPointerCancel",i,!1),e.__touch.preventDefault&&(n.style.msTouchAction="none")):(n.addEventListener("pointerdown",i,!1),window.addEventListener("pointermove",i,!1),window.addEventListener("pointerup",i,!1),window.addEventListener("pointercancel",i,!1),e.__touch.preventDefault&&(n.style.touchAction="none")),e.__touch.activeIDs={}},t._IE_disable=function(t){var e=t.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)):(window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",e,!1),window.removeEventListener("pointercancel",e,!1),t.canvas&&t.canvas.removeEventListener("pointerdown",e,!1))},t._IE_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var n=e.type,i=e.pointerId,r=t.__touch.activeIDs;if("MSPointerDown"==n||"pointerdown"==n){if(e.srcElement!=t.canvas)return;r[i]=!0,this._handleStart(t,i,e,e.pageX,e.pageY)}else r[i]&&("MSPointerMove"==n||"pointermove"==n?this._handleMove(t,i,e,e.pageX,e.pageY):("MSPointerUp"==n||"MSPointerCancel"==n||"pointerup"==n||"pointercancel"==n)&&(delete r[i],this._handleEnd(t,i,e)))}},t._handleStart=function(t,e,n,i,r){var s=t.__touch;if(s.multitouch||!s.count){var o=s.pointers;o[e]||(o[e]=!0,s.count++,t._handlePointerDown(e,n,i,r))}},t._handleMove=function(t,e,n,i,r){t.__touch.pointers[e]&&t._handlePointerMove(e,n,i,r)},t._handleEnd=function(t,e,n){var i=t.__touch,r=i.pointers;r[e]&&(i.count--,t._handlePointerUp(e,n,!0),delete r[e])},createjs.Touch=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.EaselJS=createjs.EaselJS||{};t.version="0.8.1",t.buildDate="Thu, 21 May 2015 16:17:39 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.Container_constructor(),this.spriteSheet=t}var e=createjs.extend(t,createjs.Container);e.addChild=function(t){return null==t?t:arguments.length>1?this.addChildAt.apply(this,Array.prototype.slice.call(arguments).concat([this.children.length])):this.addChildAt(t,this.children.length)},e.addChildAt=function(t,e){var n=arguments.length,i=arguments[n-1];if(0>i||i>this.children.length)return arguments[n-2];if(n>2){for(var r=0;n-1>r;r++)this.addChildAt(arguments[r],i+r);return arguments[n-2]}if(!(t._spritestage_compatibility>=1))return console&&console.log("Error: You can only add children of type SpriteContainer, Sprite, BitmapText, or DOMElement ["+t.toString()+"]"),t;if(t._spritestage_compatibility<=4){var s=t.spriteSheet;if(!s||!s._images||s._images.length>1||this.spriteSheet&&this.spriteSheet!==s)return console&&console.log("Error: A child's spriteSheet must be equal to its parent spriteSheet and only use one image. ["+t.toString()+"]"),t;this.spriteSheet=s}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t},e.toString=function(){return"[SpriteContainer (name="+this.name+")]"},createjs.SpriteContainer=createjs.promote(t,"Container")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n){this.Stage_constructor(t),this._preserveDrawingBuffer=e||!1,this._antialias=n||!1,this._viewportWidth=0,this._viewportHeight=0,this._projectionMatrix=null,this._webGLContext=null,this._webGLErrorDetected=!1,this._clearColor=null,this._maxTexturesPerDraw=1,this._maxBoxesPointsPerDraw=null,this._maxBoxesPerDraw=null,this._maxIndicesPerDraw=null,this._shaderProgram=null,this._vertices=null,this._verticesBuffer=null,this._indices=null,this._indicesBuffer=null,this._currentBoxIndex=-1,this._drawTexture=null,this._initializeWebGL()}[createjs.SpriteContainer,createjs.Sprite,createjs.BitmapText,createjs.Bitmap,createjs.DOMElement].forEach(function(t,e){t.prototype._spritestage_compatibility=e+1});var e=createjs.extend(t,createjs.Stage);t.NUM_VERTEX_PROPERTIES=5,t.POINTS_PER_BOX=4,t.NUM_VERTEX_PROPERTIES_PER_BOX=t.POINTS_PER_BOX*t.NUM_VERTEX_PROPERTIES,t.INDICES_PER_BOX=6,t.MAX_INDEX_SIZE=Math.pow(2,16),t.MAX_BOXES_POINTS_INCREMENT=t.MAX_INDEX_SIZE/4,e._get_isWebGL=function(){return!!this._webGLContext};try{Object.defineProperties(e,{isWebGL:{get:e._get_isWebGL}})}catch(n){}e.addChild=function(t){return null==t?t:arguments.length>1?this.addChildAt.apply(this,Array.prototype.slice.call(arguments).concat([this.children.length])):this.addChildAt(t,this.children.length)},e.addChildAt=function(t,e){var n=arguments.length,i=arguments[n-1];if(0>i||i>this.children.length)return arguments[n-2];if(n>2){for(var r=0;n-1>r;r++)this.addChildAt(arguments[r],i+r);return arguments[n-2]}return t._spritestage_compatibility>=1?!t.image&&!t.spriteSheet&&t._spritestage_compatibility<=4?(console&&console.log("Error: You can only add children that have an image or spriteSheet defined on them. ["+t.toString()+"]"),t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t):(console&&console.log("Error: You can only add children of type SpriteContainer, Sprite, Bitmap, BitmapText, or DOMElement. ["+t.toString()+"]"),t)},e.update=function(t){if(this.canvas){this.tickOnUpdate&&this.tick(t),this.dispatchEvent("drawstart"),this.autoClear&&this.clear();var e=this._setWebGLContext();e?this.draw(e,!1):(e=this.canvas.getContext("2d"),e.save(),this.updateContext(e),this.draw(e,!1),e.restore()),this.dispatchEvent("drawend")}},e.clear=function(){if(this.canvas){var t=this._setWebGLContext();t?t.clear(t.COLOR_BUFFER_BIT):(t=this.canvas.getContext("2d"),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1))}},e.draw=function(t,e){return"undefined"!=typeof WebGLRenderingContext&&(t===this._webGLContext||t instanceof WebGLRenderingContext)?(this._drawWebGLKids(this.children,t),!0):this.Stage_draw(t,e)},e.updateViewport=function(t,e,n,i){n=n||0,i=i||0,this._viewportWidth=t,this._viewportHeight=e,this._webGLContext&&(this._webGLContext.viewport(n,i,this._viewportWidth,this._viewportHeight),this._projectionMatrix||(this._projectionMatrix=new Float32Array([0,0,0,0,0,1,-1,1,1])),this._projectionMatrix[0]=2/t,this._projectionMatrix[4]=-2/e)},e.clearImageTexture=function(t){t.__easeljs_texture=null},e.toString=function(){return"[SpriteStage (name="+this.name+")]"},e._initializeWebGL=function(){this._clearColor={r:0,g:0,b:0,a:0},this._setWebGLContext()},e._setWebGLContext=function(){return this.canvas?this._webGLContext&&this._webGLContext.canvas===this.canvas||this._initializeWebGLContext():this._webGLContext=null,this._webGLContext},e._initializeWebGLContext=function(){var t={depth:!1,alpha:!0,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias,premultipliedAlpha:!0},e=this._webGLContext=this.canvas.getContext("webgl",t)||this.canvas.getContext("experimental-webgl",t);if(e){if(this._maxTexturesPerDraw=1,this._setClearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),e.enable(e.BLEND),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this._createShaderProgram(e),this._webGLErrorDetected)return void(this._webGLContext=null);this._createBuffers(e),this.updateViewport(this._viewportWidth||this.canvas.width||0,this._viewportHeight||this.canvas.height||0)}},e._setClearColor=function(t,e,n,i){this._clearColor.r=t,this._clearColor.g=e,this._clearColor.b=n,this._clearColor.a=i,this._webGLContext&&this._webGLContext.clearColor(t,e,n,i)},e._createShaderProgram=function(t){var e=this._createShader(t,t.FRAGMENT_SHADER,"precision mediump float;uniform sampler2D uSampler0;varying vec3 vTextureCoord;void main(void) {vec4 color = texture2D(uSampler0, vTextureCoord.st);gl_FragColor = vec4(color.rgb, color.a * vTextureCoord.z);}"),n=this._createShader(t,t.VERTEX_SHADER,"attribute vec2 aVertexPosition;attribute vec3 aTextureCoord;uniform mat3 uPMatrix;varying vec3 vTextureCoord;void main(void) {vTextureCoord = aTextureCoord;gl_Position = vec4((uPMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);}");if(!this._webGLErrorDetected&&e&&n){var i=t.createProgram();if(t.attachShader(i,e),t.attachShader(i,n),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))return void(this._webGLErrorDetected=!0);i.vertexPositionAttribute=t.getAttribLocation(i,"aVertexPosition"),i.textureCoordAttribute=t.getAttribLocation(i,"aTextureCoord"),i.sampler0uniform=t.getUniformLocation(i,"uSampler0"),t.enableVertexAttribArray(i.vertexPositionAttribute),t.enableVertexAttribArray(i.textureCoordAttribute),i.pMatrixUniform=t.getUniformLocation(i,"uPMatrix"),t.useProgram(i),this._shaderProgram=i}},e._createShader=function(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(this._webGLErrorDetected=!0,null)},e._createBuffers=function(e){this._verticesBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._verticesBuffer);var n=4*t.NUM_VERTEX_PROPERTIES;e.vertexAttribPointer(this._shaderProgram.vertexPositionAttribute,2,e.FLOAT,e.FALSE,n,0),e.vertexAttribPointer(this._shaderProgram.textureCoordAttribute,3,e.FLOAT,e.FALSE,n,8),this._indicesBuffer=e.createBuffer(),this._setMaxBoxesPoints(e,t.MAX_BOXES_POINTS_INCREMENT)},e._setMaxBoxesPoints=function(e,n){this._maxBoxesPointsPerDraw=n,this._maxBoxesPerDraw=this._maxBoxesPointsPerDraw/t.POINTS_PER_BOX|0,this._maxIndicesPerDraw=this._maxBoxesPerDraw*t.INDICES_PER_BOX,e.bindBuffer(e.ARRAY_BUFFER,this._verticesBuffer),this._vertices=new Float32Array(this._maxBoxesPerDraw*t.NUM_VERTEX_PROPERTIES_PER_BOX),e.bufferData(e.ARRAY_BUFFER,this._vertices,e.DYNAMIC_DRAW),this._indices=new Uint16Array(this._maxIndicesPerDraw);for(var i=0,r=this._indices.length;r>i;i+=t.INDICES_PER_BOX){var s=i*t.POINTS_PER_BOX/t.INDICES_PER_BOX;this._indices[i]=s,this._indices[i+1]=s+1,this._indices[i+2]=s+2,this._indices[i+3]=s,this._indices[i+4]=s+2,this._indices[i+5]=s+3}e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indicesBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW)},e._setupImageTexture=function(t,e){if(e&&(e.naturalWidth||e.getContext||e.readyState>=2)){var n=e.__easeljs_texture;return n||(n=e.__easeljs_texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),n}},e._drawWebGLKids=function(e,n,i){for(var r,s,o=this.snapToPixelEnabled,a=null,c=0,l=0,h=0,u=0,p=this._vertices,d=t.NUM_VERTEX_PROPERTIES_PER_BOX,f=t.MAX_INDEX_SIZE,g=this._maxBoxesPerDraw-1,m=0,v=e.length;v>m;m++)if(r=e[m],r.isVisible()){var a=r.image||r.spriteSheet&&r.spriteSheet._images[0],y=a.__easeljs_texture;if(y||(y=this._setupImageTexture(n,a))){s=r._props.matrix,s=(i?s.copy(i):s.identity()).appendTransform(r.x,r.y,r.scaleX,r.scaleY,r.rotation,r.skewX,r.skewY,r.regX,r.regY);var _=0,b=1,x=0,w=1;if(4===r._spritestage_compatibility)c=0,l=0,h=a.width,u=a.height;else if(2===r._spritestage_compatibility){var E=r.spriteSheet.getFrame(r.currentFrame),S=E.rect;c=-E.regX,l=-E.regY,h=c+S.width,u=l+S.height,_=S.x/a.width,x=S.y/a.height,b=_+S.width/a.width,w=x+S.height/a.height}else a=null,3===r._spritestage_compatibility&&r._updateText();if(!i&&r._spritestage_compatibility<=4&&y!==this._drawTexture&&(this._drawToGPU(n),this._drawTexture=y),null!==a){var T=++this._currentBoxIndex*d,L=s.a,C=s.b,A=s.c,j=s.d,k=s.tx,I=s.ty;o&&r.snapToPixel&&(k=k+(0>k?-.5:.5)|0,I=I+(0>I?-.5:.5)|0),p[T]=c*L+l*A+k,p[T+1]=c*C+l*j+I,p[T+5]=c*L+u*A+k,p[T+6]=c*C+u*j+I,p[T+10]=h*L+u*A+k,p[T+11]=h*C+u*j+I,p[T+15]=h*L+l*A+k,p[T+16]=h*C+l*j+I,p[T+2]=p[T+7]=_,p[T+12]=p[T+17]=b,p[T+3]=p[T+18]=x,p[T+8]=p[T+13]=w,p[T+4]=p[T+9]=p[T+14]=p[T+19]=r.alpha,this._currentBoxIndex===g&&(this._drawToGPU(n),this._drawTexture=y,this._maxBoxesPointsPerDraw<f&&(this._setMaxBoxesPoints(n,this._maxBoxesPointsPerDraw+t.MAX_BOXES_POINTS_INCREMENT),g=this._maxBoxesPerDraw-1))}r.children&&(this._drawWebGLKids(r.children,n,s),g=this._maxBoxesPerDraw-1)}}i||this._drawToGPU(n)},e._drawToGPU=function(e){if(this._drawTexture){var n=this._currentBoxIndex+1;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._drawTexture),e.uniform1i(this._shaderProgram.sampler0uniform,0),e.bindBuffer(e.ARRAY_BUFFER,this._verticesBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indicesBuffer),e.uniformMatrix3fv(this._shaderProgram.pMatrixUniform,!1,this._projectionMatrix),e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices),e.drawElements(e.TRIANGLES,n*t.INDICES_PER_BOX,e.UNSIGNED_SHORT,0),this._currentBoxIndex=-1,this._drawTexture=null}},createjs.SpriteStage=createjs.promote(t,"Stage")}(),t.createjs=createjs}.apply(t,arguments)})}(this),function(root){define("lib/preload",[],function(){return function(){return this.createjs=this.createjs||{},function(){"use strict";var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="0.4.1",t.buildDate="Thu, 12 Dec 2013 23:33:38 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,n){this.initialize(t,e,n)},e=t.prototype;e.type=null,e.target=null,e.currentTarget=null,e.eventPhase=0,e.bubbles=!1,e.cancelable=!1,e.timeStamp=0,e.defaultPrevented=!1,e.propagationStopped=!1,e.immediatePropagationStopped=!1,e.removed=!1,e.initialize=function(t,e,n){this.type=t,this.bubbles=e,this.cancelable=n,this.timeStamp=(new Date).getTime()},e.preventDefault=function(){this.defaultPrevented=!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){},e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e._listeners=null,e._captureListeners=null,e.initialize=function(){},e.addEventListener=function(t,e,n){var i;i=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var r=i[t];return r&&this.removeEventListener(t,e,n),r=i[t],r?r.push(e):i[t]=[e],e},e.on=function(t,e,n,i,r,s){return e.handleEvent&&(n=n||e,e=e.handleEvent),n=n||this,this.addEventListener(t,function(t){e.call(n,t,r),i&&t.remove()},s)},e.removeEventListener=function(t,e,n){var i=n?this._captureListeners:this._listeners;if(i){var r=i[t];if(r)for(var s=0,o=r.length;o>s;s++)if(r[s]==e){1==o?delete i[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e){if("string"==typeof t){var n=this._listeners;if(!n||!n[t])return!1;t=new createjs.Event(t)}if(t.target=e||this,t.bubbles&&this.parent){for(var i=this,r=[i];i.parent;)r.push(i=i.parent);var s,o=r.length;for(s=o-1;s>=0&&!t.propagationStopped;s--)r[s]._dispatchEvent(t,1+(0==s));for(s=1;o>s&&!t.propagationStopped;s++)r[s]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,n=this._captureListeners;return!!(e&&e[t]||n&&n[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var n,i=1==e?this._captureListeners:this._listeners;if(t&&i){var r=i[t.type];if(!r||!(n=r.length))return;t.currentTarget=this,t.eventPhase=e,t.removed=!1,r=r.slice();for(var s=0;n>s&&!t.immediatePropagationStopped;s++){var o=r[s];o.handleEvent?o.handleEvent(t):o(t),t.removed&&(this.off(t.type,o,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";createjs.indexOf=function(t,e){for(var n=0,i=t.length;i>n;n++)if(e===t[n])return n;return-1}}(),this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(n))}}}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.init()};t.prototype=new createjs.EventDispatcher;var e=t.prototype,n=t;n.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?)|(.{0,2}\/{1}))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,n.PATH_PATTERN=/^(?:(\w+:)\/{2})|(.{0,2}\/{1})?([/.]*?(?:[^?]+)?\/?)?$/,e.loaded=!1,e.canceled=!1,e.progress=0,e._item=null,e.getItem=function(){return this._item},e.init=function(){},e.load=function(){},e.close=function(){},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.Event("progress"),e.loaded=this.progress,e.total=1):(e=t,this.progress=t.loaded/t.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),e.progress=this.progress,this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){this._isCanceled()||this.dispatchEvent("complete")},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.Event("error")),this.dispatchEvent(t))},e._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},e._parseURI=function(t){return t?t.match(n.FILE_PATTERN):null},e._parsePath=function(t){return t?t.match(n.PATH_PATTERN):null},e._formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var n=[];for(var i in t)n.push(i+"="+escape(t[i]));return e&&(n=n.concat(e)),n.join("&")},e.buildPath=function(t,e){if(null==e)return t;var n=[],i=t.indexOf("?");if(-1!=i){var r=t.slice(i+1);n=n.concat(r.split("&"))}return-1!=i?t.slice(0,i)+"?"+this._formatQueryString(e,n):t+"?"+this._formatQueryString(e,n)},e._isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var n=document.createElement("a");n.href=location.href;var i=""!=e.hostname&&(e.port!=n.port||e.protocol!=n.protocol||e.hostname!=n.hostname);return i},e._isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,n){this.init(t,e,n)},e=t.prototype=new createjs.AbstractLoader,n=t;n.loadTimeout=8e3,n.LOAD_TIMEOUT=0,n.BINARY="binary",n.CSS="css",n.IMAGE="image",n.JAVASCRIPT="javascript",n.JSON="json",n.JSONP="jsonp",n.MANIFEST="manifest",n.SOUND="sound",n.SVG="svg",n.TEXT="text",n.XML="xml",n.POST="POST",n.GET="GET",e._basePath=null,e._crossOrigin="",e.useXHR=!0,e.stopOnError=!1,e.maintainScriptOrder=!0,e.next=null,e._typeCallbacks=null,e._extensionCallbacks=null,e._loadStartWasDispatched=!1,e._maxConnections=1,e._currentlyLoadingScript=null,e._currentLoads=null,e._loadQueue=null,e._loadQueueBackup=null,e._loadItemsById=null,e._loadItemsBySrc=null,e._loadedResults=null,e._loadedRawResults=null,e._numItems=0,e._numItemsLoaded=0,e._scriptOrder=null,e._loadedScripts=null,e.init=function(t,e,n){this._numItems=this._numItemsLoaded=0,this._paused=!1,this._loadStartWasDispatched=!1,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._scriptOrder=[],this._loadedScripts=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._typeCallbacks={},this._extensionCallbacks={},this._basePath=e,this.setUseXHR(t),this._crossOrigin=n===!0?"Anonymous":n===!1||null==n?"":n},e.setUseXHR=function(t){return this.useXHR=0!=t&&null!=window.XMLHttpRequest,this.useXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(!t||t instanceof Array){if(t)e=t;else if(arguments.length>0)return}else e=[t];var n=!1;if(e){for(;e.length;){var i=e.pop(),r=this.getResult(i);for(s=this._loadQueue.length-1;s>=0;s--)if(o=this._loadQueue[s].getItem(),o.id==i||o.src==i){this._loadQueue.splice(s,1)[0].cancel();break}for(s=this._loadQueueBackup.length-1;s>=0;s--)if(o=this._loadQueueBackup[s].getItem(),o.id==i||o.src==i){this._loadQueueBackup.splice(s,1)[0].cancel();break}if(r)delete this._loadItemsById[r.id],delete this._loadItemsBySrc[r.src],this._disposeItem(r);else for(var s=this._currentLoads.length-1;s>=0;s--){var o=this._currentLoads[s].getItem();if(o.id==i||o.src==i){this._currentLoads.splice(s,1)[0].cancel(),n=!0;break}}}n&&this._loadNext()}else{this.close();for(var a in this._loadItemsById)this._disposeItem(this._loadItemsById[a]);this.init(this.useXHR)}},e.reset=function(){this.close();for(var t in this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],n=0,i=this._loadQueueBackup.length;i>n;n++)e.push(this._loadQueueBackup[n].getItem());this.loadManifest(e,!1)},n.isBinary=function(t){switch(t){case createjs.LoadQueue.IMAGE:case createjs.LoadQueue.BINARY:return!0;default:return!1}},n.isText=function(t){switch(t){case createjs.LoadQueue.TEXT:case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:case createjs.LoadQueue.XML:case createjs.LoadQueue.HTML:case createjs.LoadQueue.CSS:case createjs.LoadQueue.SVG:case createjs.LoadQueue.JAVASCRIPT:return!0;default:return!1}},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var n=0,i=e.types.length;i>n;n++)this._typeCallbacks[e.types[n]]=e;if(null!=e.extensions)for(n=0,i=e.extensions.length;i>n;n++)this._extensionCallbacks[e.extensions[n]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,n){if(null==t){var i=new createjs.Event("error");return i.text="PRELOAD_NO_FILE",void this._sendError(i)}this._addItem(t,null,n),e!==!1?this.setPaused(!1):this.setPaused(!0)},e.loadManifest=function(t,e,i){var r=null,s=null;if(t instanceof Array){if(0==t.length){var o=new createjs.Event("error");return o.text="PRELOAD_MANIFEST_EMPTY",void this._sendError(o)}r=t}else if("string"==typeof t)r=[{src:t,type:n.MANIFEST}];else{if("object"!=typeof t){var o=new createjs.Event("error");return o.text="PRELOAD_MANIFEST_NULL",void this._sendError(o)}if(void 0!==t.src){if(null==t.type)t.type=n.MANIFEST;else if(t.type!=n.MANIFEST){var o=new createjs.Event("error");o.text="PRELOAD_MANIFEST_ERROR",this._sendError(o)}r=[t]}else void 0!==t.manifest&&(r=t.manifest,s=t.path)}for(var a=0,c=r.length;c>a;a++)this._addItem(r[a],s,i);e!==!1?this.setPaused(!1):this.setPaused(!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var n=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==n)return null;var i=n.id;return e&&this._loadedRawResults[i]?this._loadedRawResults[i]:this._loadedResults[i]},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1},e._addItem=function(t,e,n){var i=this._createLoadItem(t,e,n);if(null!=i){var r=this._createLoader(i);null!=r&&(this._loadQueue.push(r),this._loadQueueBackup.push(r),this._numItems++,this._updateProgress(),this.maintainScriptOrder&&i.type==createjs.LoadQueue.JAVASCRIPT&&r instanceof createjs.XHRLoader&&(this._scriptOrder.push(i),this._loadedScripts.push(null)))}},e._createLoadItem=function(t,e,n){var i=null;switch(typeof t){case"string":i={src:t};break;case"object":i=window.HTMLAudioElement&&t instanceof window.HTMLAudioElement?{tag:t,src:i.tag.src,type:createjs.LoadQueue.SOUND}:t;break;default:return null}var r=this._parseURI(i.src);null!=r&&(i.ext=r[6]),null==i.type&&(i.type=this._getTypeByExtension(i.ext));var s="",o=n||this._basePath,a=i.src;if(r&&null==r[1]&&null==r[3])if(e){s=e;var c=this._parsePath(e);a=e+a,null!=o&&c&&null==c[1]&&null==c[2]&&(s=o+s)}else null!=o&&(s=o);if(i.src=s+i.src,i.path=s,(i.type==createjs.LoadQueue.JSON||i.type==createjs.LoadQueue.MANIFEST)&&(i._loadAsJSONP=null!=i.callback),i.type==createjs.LoadQueue.JSONP&&null==i.callback)throw new Error("callback is required for loading JSONP requests.");(void 0===i.tag||null===i.tag)&&(i.tag=this._createTag(i)),(void 0===i.id||null===i.id||""===i.id)&&(i.id=a);var l=this._typeCallbacks[i.type]||this._extensionCallbacks[i.ext];if(l){var h=l.callback.call(l.scope,i.src,i.type,i.id,i.data,s,this);if(h===!1)return null;h===!0||(null!=h.src&&(i.src=h.src),null!=h.id&&(i.id=h.id),null!=h.tag&&(i.tag=h.tag),null!=h.completeHandler&&(i.completeHandler=h.completeHandler),h.type&&(i.type=h.type),r=this._parseURI(i.src),null!=r&&null!=r[6]&&(i.ext=r[6].toLowerCase()))}return this._loadItemsById[i.id]=i,this._loadItemsBySrc[i.src]=i,i},e._createLoader=function(t){var e=this.useXHR;switch(t.type){case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:e=!t._loadAsJSONP;break;case createjs.LoadQueue.XML:case createjs.LoadQueue.TEXT:
e=!0;break;case createjs.LoadQueue.SOUND:case createjs.LoadQueue.JSONP:e=!1;break;case null:return null}return e?new createjs.XHRLoader(t,this._crossOrigin):new createjs.TagLoader(t)},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];if(this.maintainScriptOrder&&e instanceof createjs.TagLoader&&e.getItem().type==createjs.LoadQueue.JAVASCRIPT){if(this._currentlyLoadingScript)continue;this._currentlyLoadingScript=!0}this._loadQueue.splice(t,1),t--,this._loadItem(e)}}},e._loadItem=function(t){t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileError=function(t){var e=t.target;this._numItemsLoaded++,this._updateProgress();var n=new createjs.Event("error");n.text="FILE_LOAD_ERROR",n.item=e.getItem(),this._sendError(n),this.stopOnError||(this._removeLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,n=e.getItem();if(this._loadedResults[n.id]=e.getResult(),e instanceof createjs.XHRLoader&&(this._loadedRawResults[n.id]=e.getResult(!0)),this._removeLoadItem(e),this.maintainScriptOrder&&n.type==createjs.LoadQueue.JAVASCRIPT){if(!(e instanceof createjs.TagLoader))return this._loadedScripts[createjs.indexOf(this._scriptOrder,n)]=n,void this._checkScriptLoadOrder(e);this._currentlyLoadingScript=!1}if(delete n._loadAsJSONP,n.type==createjs.LoadQueue.MANIFEST){var i=e.getResult();null!=i&&void 0!==i.manifest&&this.loadManifest(i,!0)}this._processFinishedLoad(n,e)},e._processFinishedLoad=function(t,e){this._numItemsLoaded++,this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var n=this._loadedScripts[e];if(null===n)break;if(n!==!0){var i=this._loadedResults[n.id];(document.body||document.getElementsByTagName("body")[0]).appendChild(i),this._processFinishedLoad(n),this._loadedScripts[e]=!0}}},e._removeLoadItem=function(t){for(var e=this._currentLoads.length,n=0;e>n;n++)if(this._currentLoads[n]==t){this._currentLoads.splice(n,1);break}},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var n=0,i=0,r=this._currentLoads.length;r>i;i++)n+=this._currentLoads[i].progress;t+=n/e*(e/this._numItems)}this._sendProgress(t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._createTag=function(t){var e=null;switch(t.type){case createjs.LoadQueue.IMAGE:return e=document.createElement("img"),""==this._crossOrigin||this._isLocal(t)||(e.crossOrigin=this._crossOrigin),e;case createjs.LoadQueue.SOUND:return e=document.createElement("audio"),e.autoplay=!1,e;case createjs.LoadQueue.JSON:case createjs.LoadQueue.JSONP:case createjs.LoadQueue.JAVASCRIPT:case createjs.LoadQueue.MANIFEST:return e=document.createElement("script"),e.type="text/javascript",e;case createjs.LoadQueue.CSS:return e=this.useXHR?document.createElement("style"):document.createElement("link"),e.rel="stylesheet",e.type="text/css",e;case createjs.LoadQueue.SVG:return this.useXHR?e=document.createElement("svg"):(e=document.createElement("object"),e.type="image/svg+xml"),e}return null},e._getTypeByExtension=function(t){if(null==t)return createjs.LoadQueue.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.LoadQueue.IMAGE;case"ogg":case"mp3":case"wav":return createjs.LoadQueue.SOUND;case"json":return createjs.LoadQueue.JSON;case"xml":return createjs.LoadQueue.XML;case"css":return createjs.LoadQueue.CSS;case"js":return createjs.LoadQueue.JAVASCRIPT;case"svg":return createjs.LoadQueue.SVG;default:return createjs.LoadQueue.TEXT}},e._sendFileProgress=function(t,e){if(this._isCanceled())return void this._cleanUp();if(this.hasEventListener("fileprogress")){var n=new createjs.Event("fileprogress");n.progress=e,n.loaded=e,n.total=1,n.item=t,this.dispatchEvent(n)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()){var n=new createjs.Event("fileload");n.loader=e,n.item=t,n.result=this._loadedResults[t.id],n.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(n),this.hasEventListener("fileload")&&this.dispatchEvent(n)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=t;var i=function(){};i.init=function(){var t=navigator.userAgent;i.isFirefox=t.indexOf("Firefox")>-1,i.isOpera=null!=window.opera,i.isChrome=t.indexOf("Chrome")>-1,i.isIOS=t.indexOf("iPod")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1},i.init(),createjs.LoadQueue.BrowserDetect=i}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.init(t)},e=t.prototype=new createjs.AbstractLoader;e._loadTimeout=null,e._tagCompleteProxy=null,e._isAudio=!1,e._tag=null,e._jsonResult=null,e.init=function(t){this._item=t,this._tag=t.tag,this._isAudio=window.HTMLAudioElement&&t.tag instanceof window.HTMLAudioElement,this._tagCompleteProxy=createjs.proxy(this._handleLoad,this)},e.getResult=function(){return this._item.type==createjs.LoadQueue.JSONP||this._item.type==createjs.LoadQueue.MANIFEST?this._jsonResult:this._tag},e.cancel=function(){this.canceled=!0,this._clean()},e.load=function(){var t=this._item,e=this._tag;clearTimeout(this._loadTimeout);var n=createjs.LoadQueue.LOAD_TIMEOUT;0==n&&(n=createjs.LoadQueue.loadTimeout),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),n),this._isAudio&&(e.src=null,e.preload="auto"),e.onerror=createjs.proxy(this._handleError,this),this._isAudio?(e.onstalled=createjs.proxy(this._handleStalled,this),e.addEventListener("canplaythrough",this._tagCompleteProxy,!1)):(e.onload=createjs.proxy(this._handleLoad,this),e.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this));var i=this.buildPath(t.src,t.values);switch(t.type){case createjs.LoadQueue.CSS:e.href=i;break;case createjs.LoadQueue.SVG:e.data=i;break;default:e.src=i}if(t.type==createjs.LoadQueue.JSONP||t.type==createjs.LoadQueue.JSON||t.type==createjs.LoadQueue.MANIFEST){if(null==t.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[t.callback])throw new Error('JSONP callback "'+t.callback+'" already exists on window. You need to specify a different callback. Or re-name the current one.');window[t.callback]=createjs.proxy(this._handleJSONPLoad,this)}(t.type==createjs.LoadQueue.SVG||t.type==createjs.LoadQueue.JSONP||t.type==createjs.LoadQueue.JSON||t.type==createjs.LoadQueue.MANIFEST||t.type==createjs.LoadQueue.JAVASCRIPT||t.type==createjs.LoadQueue.CSS)&&(this._startTagVisibility=e.style.visibility,e.style.visibility="hidden",(document.body||document.getElementsByTagName("body")[0]).appendChild(e)),null!=e.load&&e.load()},e._handleJSONPLoad=function(t){this._jsonResult=t},e._handleTimeout=function(){this._clean();var t=new createjs.Event("error");t.text="PRELOAD_TIMEOUT",this._sendError(t)},e._handleStalled=function(){},e._handleError=function(){this._clean();var t=new createjs.Event("error");this._sendError(t)},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this.getItem().tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleLoad()},e._handleLoad=function(){if(!this._isCanceled()){var t=this.getItem(),e=t.tag;if(!(this.loaded||this._isAudio&&4!==e.readyState)){switch(this.loaded=!0,t.type){case createjs.LoadQueue.SVG:case createjs.LoadQueue.JSON:case createjs.LoadQueue.JSONP:case createjs.LoadQueue.MANIFEST:case createjs.LoadQueue.CSS:e.style.visibility=this._startTagVisibility,(document.body||document.getElementsByTagName("body")[0]).removeChild(e)}this._clean(),this._sendComplete()}}},e._clean=function(){clearTimeout(this._loadTimeout);var t=this.getItem(),e=t.tag;null!=e&&(e.onload=null,e.removeEventListener&&e.removeEventListener("canplaythrough",this._tagCompleteProxy,!1),e.onstalled=null,e.onprogress=null,e.onerror=null,null!=e.parentNode&&t.type==createjs.LoadQueue.SVG&&t.type==createjs.LoadQueue.JSON&&t.type==createjs.LoadQueue.MANIFEST&&t.type==createjs.LoadQueue.CSS&&t.type==createjs.LoadQueue.JSONP&&e.parentNode.removeChild(e));var t=this.getItem();(t.type==createjs.LoadQueue.JSONP||t.type==createjs.LoadQueue.MANIFEST)&&(window[t.callback]=null)},e.toString=function(){return"[PreloadJS TagLoader]"},createjs.TagLoader=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e){this.init(t,e)},e=t.prototype=new createjs.AbstractLoader;e._request=null,e._loadTimeout=null,e._xhrLevel=1,e._response=null,e._rawResponse=null,e._crossOrigin="",e.init=function(t,e){this._item=t,this._crossOrigin=e,!this._createXHR(t)},e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return void this._handleError();if(this._request.onloadstart=createjs.proxy(this._handleLoadStart,this),this._request.onprogress=createjs.proxy(this._handleProgress,this),this._request.onabort=createjs.proxy(this._handleAbort,this),this._request.onerror=createjs.proxy(this._handleError,this),this._request.ontimeout=createjs.proxy(this._handleTimeout,this),1==this._xhrLevel){var t=createjs.LoadQueue.LOAD_TIMEOUT;if(0==t)t=createjs.LoadQueue.loadTimeout;else try{console.warn("LoadQueue.LOAD_TIMEOUT has been deprecated in favor of LoadQueue.loadTimeout")}catch(e){}this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),t)}this._request.onload=createjs.proxy(this._handleLoad,this),this._request.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);try{this._item.values&&this._item.method!=createjs.LoadQueue.GET?this._item.method==createjs.LoadQueue.POST&&this._request.send(this._formatQueryString(this._item.values)):this._request.send()}catch(n){var i=new createjs.Event("error");i.error=n,this._sendError(i)}},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.Event("progress");e.loaded=t.loaded,e.total=t.total,this._sendProgress(e)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this._sendLoadStart()},e._handleAbort=function(){this._clean();var t=new createjs.Event("error");t.text="XHR_ABORTED",this._sendError(t)},e._handleError=function(){this._clean();var t=new createjs.Event("error");this._sendError(t)},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){if(this.loaded=!0,!this._checkError())return void this._handleError();this._response=this._getResponse(),this._clean();var t=this._generateTag();t&&this._sendComplete()}},e._handleTimeout=function(t){this._clean();var e=new createjs.Event("error");e.text="PRELOAD_TIMEOUT",this._sendError(t)},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return!1}return!0},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=this._isCrossDomain(t),n=null;if(e&&window.XDomainRequest)n=new XDomainRequest;else if(window.XMLHttpRequest)n=new XMLHttpRequest;else try{n=new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(i){try{n=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(i){try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){return!1}}}createjs.LoadQueue.isText(t.type)&&n.overrideMimeType&&n.overrideMimeType("text/plain; charset=utf-8"),this._xhrLevel="string"==typeof n.responseType?2:1;var r=null;return r=t.method==createjs.LoadQueue.GET?this.buildPath(t.src,t.values):t.src,n.open(t.method||createjs.LoadQueue.GET,r,!0),e&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&n.setRequestHeader("Origin",location.origin),t.values&&t.method==createjs.LoadQueue.POST&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),createjs.LoadQueue.isBinary(t.type)&&(n.responseType="arraybuffer"),this._request=n,!0},e._clean=function(){clearTimeout(this._loadTimeout);var t=this._request;t.onloadstart=null,t.onprogress=null,t.onabort=null,t.onerror=null,t.onload=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null},e._generateTag=function(){var t=this._item.type,e=this._item.tag;switch(t){case createjs.LoadQueue.IMAGE:return e.onload=createjs.proxy(this._handleTagReady,this),""!=this._crossOrigin&&(e.crossOrigin="Anonymous"),e.src=this.buildPath(this._item.src,this._item.values),this._rawResponse=this._response,this._response=e,!1;case createjs.LoadQueue.JAVASCRIPT:return e=document.createElement("script"),e.text=this._response,this._rawResponse=this._response,this._response=e,!0;case createjs.LoadQueue.CSS:var n=document.getElementsByTagName("head")[0];if(n.appendChild(e),e.styleSheet)e.styleSheet.cssText=this._response;else{var i=document.createTextNode(this._response);e.appendChild(i)}return this._rawResponse=this._response,this._response=e,!0;case createjs.LoadQueue.XML:var r=this._parseXML(this._response,"text/xml");return this._rawResponse=this._response,this._response=r,!0;case createjs.LoadQueue.SVG:var r=this._parseXML(this._response,"image/svg+xml");return this._rawResponse=this._response,null!=r.documentElement?(e.appendChild(r.documentElement),this._response=e):this._response=r,!0;case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:var s={};try{s=JSON.parse(this._response)}catch(o){s=o}return this._rawResponse=this._response,this._response=s,!0}return!0},e._parseXML=function(t,e){var n=null;try{if(window.DOMParser){var i=new DOMParser;n=i.parseFromString(t,e)}else n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t)}catch(r){}return n},e._handleTagReady=function(){this._sendComplete()},e.toString=function(){return"[PreloadJS XHRLoader]"},createjs.XHRLoader=t}(),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,r,s,o,a=gap,c=e[t];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof rep&&(c=rep.call(e,t,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(c)){for(s=c.length,n=0;s>n;n+=1)o[n]=str(n,c)||"null";return r=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;s>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,c),r&&o.push(quote(i)+(gap?": ":":")+r));else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(r=str(i,c),r&&o.push(quote(i)+(gap?": ":":")+r));return r=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(t,e,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),root.createjs=createjs}.apply(root,arguments)})}(this),function(t){define("lib/sound",[],function(){return function(){return this.createjs=this.createjs||{},function(){var t=createjs.SoundJS=createjs.SoundJS||{};t.version="0.6.0",t.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var n=t.prototype,i=Object.getPrototypeOf&&Object.getPrototypeOf(n)||n.__proto__;if(i){n[(e+="_")+"constructor"]=i.constructor;for(var r in i)n.hasOwnProperty(r)&&"function"==typeof i[r]&&(n[e+r]=i[r])}return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var n=0,i=t.length;i>n;n++)if(e===t[n])return n;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(n))}}}(),this.createjs=this.createjs||{},function(){"use strict";var t=Object.defineProperty?!0:!1,e={};try{Object.defineProperty(e,"bar",{get:function(){return this._bar},set:function(t){this._bar=t}})}catch(n){t=!1}createjs.definePropertySupported=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,n){var i;i=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var r=i[t];return r&&this.removeEventListener(t,e,n),r=i[t],r?r.push(e):i[t]=[e],e},e.on=function(t,e,n,i,r,s){return e.handleEvent&&(n=n||e,e=e.handleEvent),n=n||this,this.addEventListener(t,function(t){e.call(n,t,r),i&&t.remove()},s)},e.removeEventListener=function(t,e,n){var i=n?this._captureListeners:this._listeners;if(i){var r=i[t];if(r)for(var s=0,o=r.length;o>s;s++)if(r[s]==e){1==o?delete i[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(n){}if(t.bubbles&&this.parent){for(var i=this,r=[i];i.parent;)r.push(i=i.parent);var s,o=r.length;for(s=o-1;s>=0&&!t.propagationStopped;s--)r[s]._dispatchEvent(t,1+(0==s));for(s=1;o>s&&!t.propagationStopped;s++)r[s]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,n=this._captureListeners;return!!(e&&e[t]||n&&n[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var n,i=1==e?this._captureListeners:this._listeners;if(t&&i){var r=i[t.type];if(!r||!(n=r.length))return;try{t.currentTarget=this}catch(s){}try{t.eventPhase=e}catch(s){}t.removed=!1,r=r.slice();for(var o=0;n>o&&!t.immediatePropagationStopped;o++){var a=r[o];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!n,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n){this.Event_constructor("error"),this.title=t,this.message=e,this.data=n}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(t,"Event")}(window),this.createjs=this.createjs||{},function(){"use strict";function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin="Anonymous",this.loadTimeout=8e3}var e=t.prototype={},n=t;n.create=function(e){if("string"==typeof e){var i=new t;return i.src=e,i}if(e instanceof n)return e;if(e instanceof Object)return e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=n}(),function(){var t={};t.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,t.RELATIVE_PATT=/^[./]*?\//i,t.EXTENSION_PATT=/\/?[^/]+\.(\w{1,5})$/i,t.parseURI=function(e){var n={absolute:!1,relative:!1};if(null==e)return n;var i=e.indexOf("?");i>-1&&(e=e.substr(0,i));var r;return t.ABSOLUTE_PATT.test(e)?n.absolute=!0:t.RELATIVE_PATT.test(e)&&(n.relative=!0),(r=e.match(t.EXTENSION_PATT))&&(n.extension=r[1].toLowerCase()),n},t.formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var n=[];for(var i in t)n.push(i+"="+escape(t[i]));return e&&(n=n.concat(e)),n.join("&")},t.buildPath=function(t,e){if(null==e)return t;var n=[],i=t.indexOf("?");if(-1!=i){var r=t.slice(i+1);n=n.concat(r.split("&"))}return-1!=i?t.slice(0,i)+"?"+this._formatQueryString(e,n):t+"?"+this._formatQueryString(e,n)},t.isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var n=document.createElement("a");n.href=location.href;var i=""!=e.hostname&&(e.port!=n.port||e.protocol!=n.protocol||e.hostname!=n.hostname);return i},t.isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},t.isBinary=function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},t.isImageTag=function(t){return t instanceof HTMLImageElement},t.isAudioTag=function(t){return window.HTMLAudioElement?t instanceof HTMLAudioElement:!1},t.isVideoTag=function(t){return window.HTMLVideoElement?t instanceof HTMLVideoElement:void 0},t.isText=function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:return!0;default:return!1}},t.getTypeByExtension=function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=n,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),n=t;n.POST="POST",n.GET="GET",n.BINARY="binary",n.CSS="css",n.IMAGE="image",n.JAVASCRIPT="javascript",n.JSON="json",n.JSONP="jsonp",n.MANIFEST="manifest",n.SOUND="sound",n.VIDEO="video",n.SPRITESHEET="spritesheet",n.SVG="svg",n.TEXT="text",n.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this),n=this;e instanceof Function?e(function(t){n._result=t,n._sendComplete()}):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(t.type)}},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n){this.AbstractLoader_constructor(t,e,n),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._formatResult=function(t){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(t.getTag().src=t.getResult(!0)),t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=n,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0),this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._tag[this._tagSrcAttribute]=this._item.src},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);
var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=n,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){this._tag.onstalled=createjs.proxy(this._handleStalled,this),this._tag.onprogress=createjs.proxy(this._handleProgress,this),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._tag.onprogress=null,this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}},e.setResponseType=function(t){this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){this.loaded=!0;var t=this._checkError();if(t)return void this._handleError(t);this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),n={},i=null;if(window.XMLHttpRequest)i=new XMLHttpRequest,e&&void 0===i.withCredentials&&window.XDomainRequest&&(i=new XDomainRequest);else{for(var r=0,o=s.ACTIVEX_VERSIONS.length;o>r;r++){s.ACTIVEX_VERSIONS[r];try{i=new ActiveXObject(axVersions);break}catch(a){}}if(null==i)return!1}t.mimeType&&i.overrideMimeType&&i.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof i.responseType?2:1;var c=null;if(c=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,i.open(t.method||createjs.AbstractLoader.GET,c,!0),e&&i instanceof XMLHttpRequest&&1==this._xhrLevel&&(n.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(n["Content-Type"]="application/x-www-form-urlencoded"),e||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var l in t.headers)n[l]=t.headers[l];for(l in n)i.setRequestHeader(l,n[l]);return i instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(i.withCredentials=t.withCredentials),this._request=i,!0},e._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader),n=t;n.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Sound cannot be instantiated"}function e(t,e){this.init(t,e)}var n=t;n.INTERRUPT_ANY="any",n.INTERRUPT_EARLY="early",n.INTERRUPT_LATE="late",n.INTERRUPT_NONE="none",n.PLAY_INITED="playInited",n.PLAY_SUCCEEDED="playSucceeded",n.PLAY_INTERRUPTED="playInterrupted",n.PLAY_FINISHED="playFinished",n.PLAY_FAILED="playFailed",n.SUPPORTED_EXTENSIONS=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"],n.EXTENSION_MAP={m4a:"mp4"},n.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,n.defaultInterruptBehavior=n.INTERRUPT_NONE,n.alternateExtensions=[],n.activePlugin=null,n._pluginsRegistered=!1,n._lastID=0,n._masterVolume=1,n._masterMute=!1,n._instances=[],n._idHash={},n._preloadHash={},n.addEventListener=null,n.removeEventListener=null,n.removeAllEventListeners=null,n.dispatchEvent=null,n.hasEventListener=null,n._listeners=null,createjs.EventDispatcher.initialize(n),n.getPreloadHandlers=function(){return{callback:createjs.proxy(n.initLoad,n),types:["sound"],extensions:n.SUPPORTED_EXTENSIONS}},n._handleLoadComplete=function(t){var e=t.target.getItem().src;if(n._preloadHash[e])for(var i=0,r=n._preloadHash[e].length;r>i;i++){var s=n._preloadHash[e][i];if(n._preloadHash[e][i]=!0,n.hasEventListener("fileload")){var t=new createjs.Event("fileload");t.src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,n.dispatchEvent(t)}}},n._handleLoadError=function(t){var e=t.target.getItem().src;if(n._preloadHash[e])for(var i=0,r=n._preloadHash[e].length;r>i;i++){var s=n._preloadHash[e][i];if(n._preloadHash[e][i]=!1,n.hasEventListener("fileerror")){var t=new createjs.Event("fileerror");t.src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,n.dispatchEvent(t)}}},n._registerPlugin=function(t){return t.isSupported()?(n.activePlugin=new t,!0):!1},n.registerPlugins=function(t){n._pluginsRegistered=!0;for(var e=0,i=t.length;i>e;e++)if(n._registerPlugin(t[e]))return!0;return!1},n.initializeDefaultPlugins=function(){return null!=n.activePlugin?!0:n._pluginsRegistered?!1:n.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},n.isReady=function(){return null!=n.activePlugin},n.getCapabilities=function(){return null==n.activePlugin?null:n.activePlugin._capabilities},n.getCapability=function(t){return null==n.activePlugin?null:n.activePlugin._capabilities[t]},n.initLoad=function(t){return n._registerSound(t)},n._registerSound=function(t){if(!n.initializeDefaultPlugins())return!1;var i=n._parsePath(t.src);if(null==i)return!1;t.src=i.src,t.type="sound";var r=t.data,s=n.activePlugin.defaultNumChannels||null;if(null!=r&&(isNaN(r.channels)?isNaN(r)||(s=parseInt(r)):s=parseInt(r.channels),r.audioSprite))for(var o,a=r.audioSprite.length;a--;)o=r.audioSprite[a],n._idHash[o.id]={src:t.src,startTime:parseInt(o.startTime),duration:parseInt(o.duration)};null!=t.id&&(n._idHash[t.id]={src:t.src});var c=n.activePlugin.register(t,s);return e.create(t.src,s),null!=r&&isNaN(r)?t.data.channels=s||e.maxPerChannel():t.data=s||e.maxPerChannel(),c.type&&(t.type=c.type),c},n.registerSound=function(t,e,i,r){var s={src:t,id:e,data:i};t instanceof Object&&(r=e,s=t),s=createjs.LoadItem.create(s),null!=r&&(s.src=r+t);var o=n._registerSound(s);if(!o)return!1;if(n._preloadHash[s.src]||(n._preloadHash[s.src]=[]),n._preloadHash[s.src].push(s),1==n._preloadHash[s.src].length)o.on("complete",createjs.proxy(this._handleLoadComplete,this)),o.on("error",createjs.proxy(this._handleLoadError,this)),n.activePlugin.preload(o);else if(1==n._preloadHash[s.src][0])return!0;return s},n.registerSounds=function(t,e){var n=[];t.path&&(e?e+=t.path:e=t.path);for(var i=0,r=t.length;r>i;i++)n[i]=createjs.Sound.registerSound(t[i].src,t[i].id,t[i].data,e);return n},n.registerManifest=function(t,e){try{console.log("createjs.Sound.registerManifest is deprecated, please use createjs.Sound.registerSounds.")}catch(n){}return this.registerSounds(t,e)},n.removeSound=function(t,i){if(null==n.activePlugin)return!1;t instanceof Object&&(t=t.src),t=n._getSrcById(t).src,null!=i&&(t=i+t);var r=n._parsePath(t);if(null==r)return!1;t=r.src;for(var s in n._idHash)n._idHash[s].src==t&&delete n._idHash[s];return e.removeSrc(t),delete n._preloadHash[t],n.activePlugin.removeSound(t),!0},n.removeSounds=function(t,e){var n=[];t.path&&(e?e+=t.path:e=t.path);for(var i=0,r=t.length;r>i;i++)n[i]=createjs.Sound.removeSound(t[i].src,e);return n},n.removeManifest=function(t,e){try{console.log("createjs.Sound.removeManifest is deprecated, please use createjs.Sound.removeSounds.")}catch(i){}return n.removeSounds(t,e)},n.removeAllSounds=function(){n._idHash={},n._preloadHash={},e.removeAll(),n.activePlugin&&n.activePlugin.removeAllSounds()},n.loadComplete=function(t){if(!n.isReady())return!1;var e=n._parsePath(t);return t=e?n._getSrcById(e.src).src:n._getSrcById(t).src,1==n._preloadHash[t][0]},n._parsePath=function(t){"string"!=typeof t&&(t=t.toString());var e=t.match(n.FILE_PATTERN);if(null==e)return!1;for(var i=e[4],r=e[5],s=n.getCapabilities(),o=0;!s[r];)if(r=n.alternateExtensions[o++],o>n.alternateExtensions.length)return null;t=t.replace("."+e[5],"."+r);var a={name:i,src:t,extension:r};return a},n.play=function(t,e,i,r,s,o,a,c,l){e instanceof Object&&(i=e.delay,r=e.offset,s=e.loop,o=e.volume,a=e.pan,c=e.startTime,l=e.duration,e=e.interrupt);var h=n.createInstance(t,c,l),u=n._playInstance(h,e,i,r,s,o,a);return u||h._playFailed(),h},n.createInstance=function(t,i,r){if(!n.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(t,i,r);t=n._getSrcById(t);var s=n._parsePath(t.src),o=null;return null!=s&&null!=s.src?(e.create(s.src),null==i&&(i=t.startTime),o=n.activePlugin.create(s.src,i,r||t.duration)):o=new createjs.DefaultSoundInstance(t,i,r),o.uniqueId=n._lastID++,o},n.setVolume=function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),n._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,i=0,r=e.length;r>i;i++)e[i].setMasterVolume(t)},n.getVolume=function(){return n._masterVolume},n.setMute=function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,n=0,i=e.length;i>n;n++)e[n].setMasterMute(t);return!0},n.getMute=function(){return this._masterMute},n.stop=function(){for(var t=this._instances,e=t.length;e--;)t[e].stop()},n._playInstance=function(t,e,i,r,s,o,a){if(e instanceof Object&&(i=e.delay,r=e.offset,s=e.loop,o=e.volume,a=e.pan,e=e.interrupt),e=e||n.defaultInterruptBehavior,null==i&&(i=0),null==r&&(r=t.getPosition()),null==s&&(s=t.loop),null==o&&(o=t.volume),null==a&&(a=t.pan),0==i){var c=n._beginPlaying(t,e,r,s,o,a);if(!c)return!1}else{var l=setTimeout(function(){n._beginPlaying(t,e,r,s,o,a)},i);t.delayTimeoutId=l}return this._instances.push(t),!0},n._beginPlaying=function(t,n,i,r,s,o){if(!e.add(t,n))return!1;var a=t._beginPlaying(i,r,s,o);if(!a){var c=createjs.indexOf(this._instances,t);return c>-1&&this._instances.splice(c,1),!1}return!0},n._getSrcById=function(t){return n._idHash[t]||{src:t}},n._playFinished=function(t){e.remove(t);var n=createjs.indexOf(this._instances,t);n>-1&&this._instances.splice(n,1)},createjs.Sound=t,e.channels={},e.create=function(t,n){var i=e.get(t);return null==i?(e.channels[t]=new e(t,n),!0):!1},e.removeSrc=function(t){var n=e.get(t);return null==n?!1:(n._removeAll(),delete e.channels[t],!0)},e.removeAll=function(){for(var t in e.channels)e.channels[t]._removeAll();e.channels={}},e.add=function(t,n){var i=e.get(t.src);return null==i?!1:i._add(t,n)},e.remove=function(t){var n=e.get(t.src);return null==n?!1:(n._remove(t),!0)},e.maxPerChannel=function(){return i.maxDefault},e.get=function(t){return e.channels[t]};var i=e.prototype;i.constructor=e,i.src=null,i.max=null,i.maxDefault=100,i.length=0,i.init=function(t,e){this.src=t,this.max=e||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},i._get=function(t){return this._instances[t]},i._add=function(t,e){return this._getSlot(e,t)?(this._instances.push(t),this.length++,!0):!1},i._remove=function(t){var e=createjs.indexOf(this._instances,t);return-1==e?!1:(this._instances.splice(e,1),this.length--,!0)},i._removeAll=function(){for(var t=this.length-1;t>=0;t--)this._instances[t].stop()},i._getSlot=function(e){var n,i;if(e!=t.INTERRUPT_NONE&&(i=this._get(0),null==i))return!0;for(var r=0,s=this.max;s>r;r++){if(n=this._get(r),null==n)return!0;if(n.playState==t.PLAY_FINISHED||n.playState==t.PLAY_INTERRUPTED||n.playState==t.PLAY_FAILED){i=n;break}e!=t.INTERRUPT_NONE&&(e==t.INTERRUPT_EARLY&&n.getPosition()<i.getPosition()||e==t.INTERRUPT_LATE&&n.getPosition()>i.getPosition())&&(i=n)}return null!=i?(i._interrupt(),this._remove(i),!0):!1},i.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,n,i){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._startTime=Math.max(0,e||0),this._volume=1,createjs.definePropertySupported&&Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,createjs.definePropertySupported&&Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._duration=Math.max(0,n||0),createjs.definePropertySupported&&Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,createjs.definePropertySupported&&Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),i!==!1&&i!==!0&&this.setPlaybackResource(i),this._position=0,createjs.definePropertySupported&&Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,createjs.definePropertySupported&&Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,createjs.definePropertySupported&&Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,createjs.definePropertySupported&&Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},e=createjs.extend(t,createjs.EventDispatcher);e.play=function(t,e,n,i,r,s){return this.playState==createjs.Sound.PLAY_SUCCEEDED?(t instanceof Object&&(n=t.offset,i=t.loop,r=t.volume,s=t.pan),null!=n&&this.setPosition(n),null!=i&&this.setLoop(i),null!=r&&this.setVolume(r),null!=s&&this.setPan(s),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,t,e,n,i,r,s),this)},e.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?!1:(this.setPaused(!0),!0)},e.resume=function(){return this._paused?(this.setPaused(!1),!0):!1},e.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},e.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},e.toString=function(){return"[AbstractSoundInstance]"},e.getPaused=function(){return this._paused},e.setPaused=function(t){return t!==!0&&t!==!1||this._paused==t||1==t&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=t,t?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},e.setVolume=function(t){return t==this._volume?this:(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume(),this)},e.getVolume=function(){return this._volume},e.setMute=function(t){this.setMuted(t)},e.getMute=function(){return this._muted},e.setMuted=function(t){return t===!0||t===!1?(this._muted=t,this._updateVolume(),this):void 0},e.getMuted=function(){return this._muted},e.setPan=function(t){return t==this._pan?this:(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan(),this)},e.getPan=function(){return this._pan},e.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?this._position:this._calculateCurrentPosition()},e.setPosition=function(t){return this._position=Math.max(0,t),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},e.getDuration=function(){return this._duration},e.setDuration=function(t){return t==this._duration?this:(this._duration=Math.max(0,t||0),this._updateDuration(),this)},e.setPlaybackResource=function(t){return this._playbackResource=t,0==this._duration&&this._setDurationFromSource(),this},e.getPlaybackResource=function(){return this._playbackResource},e.getLoop=function(){return this._loop},e.setLoop=function(t){null!=this._playbackResource&&(0!=this._loop&&0==t&&this._removeLooping(t),0==this._loop&&0!=t&&this._addLooping(t)),this._loop=t},e._sendEvent=function(t){var e=new createjs.Event(t);this.dispatchEvent(e)},e._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},e._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},e._beginPlaying=function(t,e,n,i){return this.setPosition(t),this.setLoop(e),this.setVolume(n),this.setPan(i),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},e._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},e._handleSoundReady=function(){},e._updateVolume=function(){},e._updatePan=function(){},e._updateDuration=function(){},e._setDurationFromSource=function(){},e._calculateCurrentPosition=function(){},e._updatePosition=function(){},e._removeLooping=function(){},e._addLooping=function(){},e._pause=function(){},e._resume=function(){},e._handleStop=function(){},e._handleCleanUp=function(){},e._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(t,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._loaderClass,this._soundInstanceClass},e=t.prototype;t._capabilities=null,t.isSupported=function(){return!0},e.register=function(t){if(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],this._loaders[t.src])return this._loaders[t.src];var e=new this._loaderClass(t);return e.on("complete",createjs.proxy(this._handlePreloadComplete,this)),this._loaders[t.src]=e,e},e.preload=function(t){t.on("error",createjs.proxy(this._handlePreloadError,this)),t.load()},e.isPreloadStarted=function(t){return null!=this._audioSources[t]},e.isPreloadComplete=function(t){return!(null==this._audioSources[t]||1==this._audioSources[t])},e.removeSound=function(t){if(this._soundInstances[t]){for(var e=this._soundInstances[t].length;e--;){var n=this._soundInstances[t][e];n.destroy()}delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},e.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},e.create=function(t,e,n){this.isPreloadStarted(t)||this.preload(this.register(t));var i=new this._soundInstanceClass(t,e,n,this._audioSources[t]);return this._soundInstances[t].push(i),i},e.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},e.getVolume=function(){return this._volume},e.setMute=function(){return this._updateVolume(),!0},e.toString=function(){return"[AbstractPlugin]"},e._handlePreloadComplete=function(t){var e=t.target.getItem().src;this._audioSources[e]=t.result;for(var n=0,i=this._soundInstances[e].length;i>n;n++){var r=this._soundInstances[e][n];r.setPlaybackResource(this._audioSources[e])}},e._handlePreloadError=function(){},e._updateVolume=function(){},createjs.AbstractPlugin=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.SOUND)}var e=createjs.extend(t,createjs.AbstractLoader);t.context=null,e.toString=function(){return"[WebAudioLoader]"},e._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},e._sendComplete=function(){t.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._handleError,this))},e._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,r){this.AbstractSoundInstance_constructor(t,e,i,r),this.gainNode=n.context.createGain(),this.panNode=n.context.createPanner(),this.panNode.panningModel=n._panningModel,this.panNode.connect(this.gainNode),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),n=t;n.context=null,n.destinationNode=null,n._panningModel="equalpower",e.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},e.toString=function(){return"[WebAudioSoundInstance]"},e._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},e._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},e._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},e._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},e._cleanUpAudioNode=function(t){return t&&(t.stop(0),t.disconnect(0),t=null),t},e._handleSoundReady=function(){this.gainNode.connect(n.destinationNode);var t=.001*this._duration,e=.001*this._position;this.sourceNode=this._createAndPlayAudioNode(n.context.currentTime-t,e),this._playbackStartTime=this.sourceNode.startTime-e,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(t-e)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._createAndPlayAudioNode=function(t,e){var i=n.context.createBufferSource();i.buffer=this.playbackResource,i.connect(this.panNode);var r=.001*this._duration;return i.startTime=t+r,i.start(i.startTime,e+.001*this._startTime,r-e),i},e._pause=function(){this._position=1e3*(n.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},e._resume=function(){this._handleSoundReady()},e._updateVolume=function(){var t=this._muted?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},e._calculateCurrentPosition=function(){return 1e3*(n.context.currentTime-this._playbackStartTime)},e._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},e._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},e._updateDuration=function(){this._pause(),this._resume()},createjs.WebAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this._panningModel=n._panningModel,this._volume=1,this.context=n.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=n._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var e=createjs.extend(t,createjs.AbstractPlugin),n=t;n._capabilities=null,n._panningModel="equalpower",n.context=null,n.isSupported=function(){var t=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return"file:"!=location.protocol||t||this._isFileXHRSupported()?(n._generateCapabilities(),null==n.context?!1:!0):!1},n.playEmptySound=function(){var t=n.context.createBufferSource();t.buffer=n.context.createBuffer(1,1,22050),t.connect(n.context.destination),t.start(0,0,0)},n._isFileXHRSupported=function(){var t=!0,e=new XMLHttpRequest;try{e.open("GET","WebAudioPluginTest.fail",!1)}catch(n){return t=!1}e.onerror=function(){t=!1},e.onload=function(){t=404==this.status||200==this.status||0==this.status&&""!=this.response};try{e.send()}catch(n){t=!1}return t},n._generateCapabilities=function(){if(null==n._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;if(null==n.context)if(window.AudioContext)n.context=new AudioContext;else{if(!window.webkitAudioContext)return null;n.context=new webkitAudioContext}n._compatibilitySetUp(),n.playEmptySound(),n._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,i=createjs.Sound.EXTENSION_MAP,r=0,s=e.length;s>r;r++){var o=e[r],a=i[o]||o;n._capabilities[o]="no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}n.context.destination.numberOfChannels<2&&(n._capabilities.panning=!1)}},n._compatibilitySetUp=function(){if(n._panningModel="equalpower",!n.context.createGain){n.context.createGain=n.context.createGainNode;var t=n.context.createBufferSource();t.__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff,n._panningModel=0}},e.toString=function(){return"[WebAudioPlugin]"},e._addPropsToClasses=function(){var t=this._soundInstanceClass;t.context=this.context,t.destinationNode=this.gainNode,t._panningModel=this._panningModel,this._loaderClass.context=this.context},e._updateVolume=function(){var t=createjs.Sound._masterMute?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},createjs.WebAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.src=t,this.length=0,this.available=0,this.tags=[],this.duration=0}var e=t.prototype;e.constructor=t;var n=t;n.tags={},n.get=function(e){var i=n.tags[e];return null==i&&(i=n.tags[e]=new t(e)),i},n.remove=function(t){var e=n.tags[t];return null==e?!1:(e.removeAll(),delete n.tags[t],!0)},n.getInstance=function(t){var e=n.tags[t];return null==e?null:e.get()},n.setInstance=function(t,e){var i=n.tags[t];return null==i?null:i.set(e)},n.getDuration=function(t){var e=n.tags[t];return null==e?0:e.getDuration()},e.add=function(t){this.tags.push(t),this.length++,this.available++},e.removeAll=function(){for(var t;this.length--;)t=this.tags[this.length],t.parentNode&&t.parentNode.removeChild(t),delete this.tags[this.length];this.src=null,this.tags.length=0},e.get=function(){if(0==this.tags.length)return null;
this.available=this.tags.length;var t=this.tags.pop();return null==t.parentNode&&document.body.appendChild(t),t},e.set=function(t){var e=createjs.indexOf(this.tags,t);-1==e&&this.tags.push(t),this.available=this.tags.length},e.getDuration=function(){return this.duration||(this.duration=1e3*this.tags[this.tags.length-1].duration),this.duration},e.toString=function(){return"[HTMLAudioTagPool]"},createjs.HTMLAudioTagPool=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,i){this.AbstractSoundInstance_constructor(t,e,n,i),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this.playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),n?this._audioSpriteStopTime=.001*(e+n):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var e=createjs.extend(t,createjs.AbstractSoundInstance);e.setMasterVolume=function(){this._updateVolume()},e.setMasterMute=function(){this._updateVolume()},e.toString=function(){return"[HTMLAudioSoundInstance]"},e._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},e._handleCleanUp=function(){var t=this._playbackResource;if(null!=t){t.pause(),t.loop=!1,t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch(e){}createjs.HTMLAudioTagPool.setInstance(this.src,t),this._playbackResource=null}},e._beginPlaying=function(t,e,n,i){return this._playbackResource=createjs.HTMLAudioTagPool.getInstance(this.src),this.AbstractSoundInstance__beginPlaying(t,e,n,i)},e._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var t=this._playbackResource;return t.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.preload="auto",void t.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},e._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},e._pause=function(){this._playbackResource.pause()},e._resume=function(){this._playbackResource.play()},e._updateVolume=function(){if(null!=this._playbackResource){var t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;t!=this._playbackResource.volume&&(this._playbackResource.volume=t)}},e._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},e._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(t){this._handleSetPositionSeek(null)}},e._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},e._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._updateDuration=function(){this._audioSpriteStopTime=.001*(startTime+duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},createjs.HTMLAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=n._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var e=createjs.extend(t,createjs.AbstractPlugin),n=t;n.MAX_INSTANCES=30,n._AUDIO_READY="canplaythrough",n._AUDIO_ENDED="ended",n._AUDIO_SEEKED="seeked",n._AUDIO_STALLED="stalled",n._TIME_UPDATE="timeupdate",n._capabilities=null,n.enableIOS=!1,n.isSupported=function(){return n._generateCapabilities(),null==n._capabilities?!1:!0},n._generateCapabilities=function(){if(null==n._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;n._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,i=createjs.Sound.EXTENSION_MAP,r=0,s=e.length;s>r;r++){var o=e[r],a=i[o]||o;n._capabilities[o]="no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}}},e.register=function(t,e){for(var n=createjs.HTMLAudioTagPool.get(t.src),i=null,r=0;e>r;r++)i=this._createTag(t.src),n.add(i);var s=this.AbstractPlugin_register(t,e);return s.setTag(i),s},e.removeSound=function(t){this.AbstractPlugin_removeSound(t),createjs.HTMLAudioTagPool.remove(t)},e.create=function(t,e,n){var i=this.AbstractPlugin_create(t,e,n);return i.setPlaybackResource(null),i},e.toString=function(){return"[HTMLAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.HTMLAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),t.createjs=createjs}.apply(t,arguments)})}(this),define("ViewportKeyboardController",[],function(){var t=function(t){this._controller=t};return t.prototype.handleKeyDown=function(t){switch(t.keyCode){case 37:this._controller.left=!0;break;case 38:this._controller.up=!0;break;case 39:this._controller.right=!0;break;case 40:this._controller.down=!0}},t.prototype.handleKeyUp=function(t){switch(t.keyCode){case 37:this._controller.left=!1;break;case 38:this._controller.up=!1;break;case 39:this._controller.right=!1;break;case 40:this._controller.down=!1}},t}),define("FocusStrategy",[],function(){return{focusOnEntity:function(t,e){var n={target:e,offset:{x:0,y:0}};return t.on("changeRoom",function(t){n.target=t.destination}),function(e){n.offset.x=t._body.p.x,n.offset.y=t._body.p.y,n.offset.x=~~(n.offset.x-e.width/2),n.offset.y=~~(n.offset.y-e.height/2);var i=32;n.offset.x<i&&(n.offset.x=i),n.offset.y<i&&(n.offset.y=i);var r=n.target.getLimits();return n.offset.x>r.width-e.width-i&&(n.offset.x=r.width-e.width-i),n.offset.y>r.height-e.height-i&&(n.offset.y=r.height-e.height-i),n}},focusWithKeyboardControl:function(t,e){var n={target:e,offset:{x:0,y:0}};return function(){var e=16;return t.left&&(n.offset.x-=e),t.up&&(n.offset.y-=e),t.right&&(n.offset.x+=e),t.down&&(n.offset.y+=e),n}}}}),define("Grounding",["require"],function(t){var e=function(t){this._reset(),this.timeSinceGrounding=1,this.body=t.body};return e.prototype._reset=function(){this.normal={x:0,y:0},this.shape=void 0,this.penetration=void 0,this.headTrauma=!1},e.prototype._updateGroundingContext=function(t){var e=t.getShapes();e[0].body!==e[1].body&&(t.getNormal(0).y<0&&(this.headTrauma=!0),t.getNormal(0).y>this.normal.y&&(this.normal=t.getNormal(0),this.shape=t.getShapes()[0],this.penetration=t.getDepth(0)))},e.prototype.update=function(t){this.isGrounded();this._reset(),this.body.eachArbiter(this._updateGroundingContext.bind(this)),this.shape?this.timeSinceGrounding=0:this.timeSinceGrounding+=t},e.prototype.isGrounded=function(){return this.normal.y>0||this.timeSinceGrounding<=.15},e.prototype.getPenetration=function(){return this.penetration},e}),function(t){define("lib/chipmunk",[],function(){return function(){return function(){Object.create=Object.create||function(t){function e(){}return e.prototype=t,new e},"undefined"==typeof exports?(cp={},"object"==typeof window&&(window.cp=cp)):cp=exports;var e,n,i=function(t,e){if(!t)throw new Error("Assertion failed: "+e)},r=function(t,e){!t&&console&&console.warn&&(console.warn("ASSERTION FAILED: "+e),console.trace&&console.trace())},s=function(t,e){return e>t?t:e},o=function(t,e){return t>e?t:e};"object"==typeof window&&window.navigator.userAgent.indexOf("Firefox")>-1?(e=Math.min,n=Math.max):(e=s,n=o);var a=function(t,e){return e>t?t+" "+e:e+" "+t},c=function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return t[n]=t[t.length-1],void t.length--},l=function(t,e,n){var i=S(e,n),r=m(_(i,S(t,n))/P(i));return E(n,L(i,r))},h=function(t,e,n,i,r,s){var o=n-r,a=i-s,c=m(b(o,a,t-r,e-s)/D(o,a));return new v(r+o*c,s+a*c)};cp.momentForCircle=function(t,e,n,i){return t*(.5*(e*e+n*n)+P(i))},cp.areaForCircle=function(t,e){return Math.PI*Math.abs(t*t-e*e)},cp.momentForSegment=function(t,e,n){var i=L(E(e,n),.5);return t*(H(n,e)/12+P(i))},cp.areaForSegment=function(t,e,n){return n*(Math.PI*n+2*B(t,e))},cp.momentForPoly=function(t,e,n){for(var i=0,r=0,s=e.length,o=0;s>o;o+=2){var a=e[o]+n.x,c=e[o+1]+n.y,l=e[(o+2)%s]+n.x,h=e[(o+3)%s]+n.y,u=A(l,h,a,c),p=b(a,c,a,c)+b(a,c,l,h)+b(l,h,l,h);i+=u*p,r+=u}return t*i/(6*r)},cp.areaForPoly=function(t){for(var e=0,n=0,i=t.length;i>n;n+=2)e+=C(new v(t[n],t[n+1]),new v(t[(n+2)%i],t[(n+3)%i]));return-e/2},cp.centroidForPoly=function(t){for(var e=0,n=new v(0,0),i=0,r=t.length;r>i;i+=2){var s=new v(t[i],t[i+1]),o=new v(t[(i+2)%r],t[(i+3)%r]),a=C(s,o);e+=a,n=E(n,L(E(s,o),a))}return L(n,1/(3*e))},cp.recenterPoly=function(t){for(var e=cp.centroidForPoly(t),n=0;n<t.length;n+=2)t[n]-=e.x,t[n+1]-=e.y},cp.momentForBox=function(t,e,n){return t*(e*e+n*n)/12},cp.momentForBox2=function(t,e){var n=e.r-e.l,i=e.t-e.b,r=L([e.l+e.r,e.b+e.t],.5);return cp.momentForBox(t,n,i)+t*P(r)};var u=cp.loopIndexes=function(t){var e,n,i,r,s=0,o=0;e=i=t[0],n=r=t[1];for(var a=t.length>>1,c=1;a>c;c++){var l=t[2*c],h=t[2*c+1];e>l||l==e&&n>h?(e=l,n=h,s=c):(l>i||l==i&&h>r)&&(i=l,r=h,o=c)}return[s,o]},p=function(t,e,n){var i=t[2*e];t[2*e]=t[2*n],t[2*n]=i,i=t[2*e+1],t[2*e+1]=t[2*n+1],t[2*n+1]=i},d=function(t,e,n,i,r,s){if(0===n)return 0;for(var o=0,a=e,c=S(r,i),l=s*x(c),h=e,u=e+n-1;u>=h;){var d=new v(t[2*h],t[2*h+1]),f=C(c,S(d,i));f>l?(f>o&&(o=f,a=h),h++):(p(t,h,u),u--)}return a!=e&&p(t,e,a),h-e},f=function(t,e,n,i,r,s,o,a){if(0>i)return 0;if(0==i)return e[2*a]=s.x,e[2*a+1]=s.y,1;var c=d(e,n,i,r,s,t),l=new v(e[2*n],e[2*n+1]),h=f(t,e,n+1,c-1,r,l,s,a),u=a+h++;e[2*u]=s.x,e[2*u+1]=s.y;var p=d(e,n+c,i-c,s,o,t),g=new v(e[2*(n+c)],e[2*(n+c)+1]);return h+f(t,e,n+c+1,p-1,s,g,o,a+h)};cp.convexHull=function(t,e,n){if(e)for(var i=0;i<t.length;i++)e[i]=t[i];else e=t;var s=u(t),o=s[0],a=s[1];if(o==a)return e.length=2,e;p(e,0,o),p(e,1,0==a?o:a);var c=new v(e[0],e[1]),l=new v(e[2],e[3]),h=t.length>>1,d=f(n,e,2,h-2,c,l,c,1)+1;return e.length=2*d,r(tt(e),"Internal error: cpConvexHull() and cpPolyValidate() did not agree.Please report this error with as much info as you can."),e};var g=cp.clamp=function(t,i,r){return e(n(t,i),r)},m=function(t){return n(0,e(t,1))},v=(cp.lerpconst=function(t,e,n){return t+g(e-t,-n,n)},cp.Vect=function(t,e){this.x=t,this.y=e});cp.v=function(t,e){return new v(t,e)};var y=cp.vzero=new v(0,0),_=cp.v.dot=function(t,e){return t.x*e.x+t.y*e.y},b=function(t,e,n,i){return t*n+e*i},x=cp.v.len=function(t){return Math.sqrt(_(t,t))},w=cp.v.len2=function(t,e){return Math.sqrt(t*t+e*e)},E=(cp.v.eql=function(t,e){return t.x===e.x&&t.y===e.y},cp.v.add=function(t,e){return new v(t.x+e.x,t.y+e.y)});v.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this};var S=cp.v.sub=function(t,e){return new v(t.x-e.x,t.y-e.y)};v.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this};var T=cp.v.neg=function(t){return new v(-t.x,-t.y)};v.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this};var L=cp.v.mult=function(t,e){return new v(t.x*e,t.y*e)};v.prototype.mult=function(t){return this.x*=t,this.y*=t,this};var C=cp.v.cross=function(t,e){return t.x*e.y-t.y*e.x},A=function(t,e,n,i){return t*i-e*n},j=cp.v.perp=function(t){return new v(-t.y,t.x)},k=(cp.v.pvrperp=function(t){return new v(t.y,-t.x)},cp.v.project=function(t,e){return L(e,_(t,e)/P(e))});v.prototype.project=function(t){return this.mult(_(this,t)/P(t)),this};var I=cp.v.rotate=function(t,e){return new v(t.x*e.x-t.y*e.y,t.x*e.y+t.y*e.x)};v.prototype.rotate=function(t){return this.x=this.x*t.x-this.y*t.y,this.y=this.x*t.y+this.y*t.x,this};var M=cp.v.unrotate=function(t,e){return new v(t.x*e.x+t.y*e.y,t.y*e.x-t.x*e.y)},P=cp.v.lengthsq=function(t){return _(t,t)},D=cp.v.lengthsq2=function(t,e){return t*t+e*e},R=cp.v.lerp=function(t,e,n){return E(L(t,1-n),L(e,n))},N=cp.v.normalize=function(t){return L(t,1/x(t))},O=cp.v.normalize_safe=function(t){return 0===t.x&&0===t.y?y:N(t)},F=cp.v.clamp=function(t,e){return _(t,t)>e*e?L(N(t),e):t},B=(cp.v.lerpconst=function(t,e,n){return E(t,F(S(e,t),n))},cp.v.dist=function(t,e){return x(S(t,e))}),H=cp.v.distsq=function(t,e){return P(S(t,e))},U=(cp.v.near=function(t,e,n){return H(t,e)<n*n},cp.v.slerp=function(t,e,n){var i=Math.acos(_(t,e));if(i){var r=1/Math.sin(i);return E(L(t,Math.sin((1-n)*i)*r),L(e,Math.sin(n*i)*r))}return t}),q=(cp.v.slerpconst=function(t,n,i){var r=Math.acos(_(t,n));return U(t,n,e(i,r)/r)},cp.v.forangle=function(t){return new v(Math.cos(t),Math.sin(t))},cp.v.toangle=function(t){return Math.atan2(t.y,t.x)},cp.v.str=function(t){return"("+t.x.toFixed(3)+", "+t.y.toFixed(3)+")"},0),X=cp.BB=function(t,e,n,i){this.l=t,this.b=e,this.r=n,this.t=i,q++};cp.bb=function(t,e,n,i){return new X(t,e,n,i)};var G=function(t,e){return new X(t.x-e,t.y-e,t.x+e,t.y+e)},W=function(t,e,n,i,r){return t.l<=i&&e<=t.r&&t.b<=r&&n<=t.t},V=0,Q=(cp.NO_GROUP=0,cp.ALL_LAYERS=-1);cp.resetShapeIdCounter=function(){V=0};var Y=cp.Shape=function(t){this.body=t,this.bb_l=this.bb_b=this.bb_r=this.bb_t=0,this.hashid=V++,this.sensor=!1,this.e=0,this.u=0,this.surface_v=y,this.collision_type=0,this.group=0,this.layers=Q,this.space=null,this.collisionCode=this.collisionCode};Y.prototype.setElasticity=function(t){this.e=t},Y.prototype.setFriction=function(t){this.body.activate(),this.u=t},Y.prototype.setLayers=function(t){this.body.activate(),this.layers=t},Y.prototype.setSensor=function(t){this.body.activate(),this.sensor=t},Y.prototype.setCollisionType=function(t){this.body.activate(),this.collision_type=t},Y.prototype.getBody=function(){return this.body},Y.prototype.active=function(){return this.body&&-1!==this.body.shapeList.indexOf(this)},Y.prototype.setBody=function(t){i(!this.active(),"You cannot change the body on an active shape. You must remove the shape from the space before changing the body."),this.body=t},Y.prototype.cacheBB=function(){return this.update(this.body.p,this.body.rot)},Y.prototype.update=function(t,e){i(!isNaN(e.x),"Rotation is NaN"),i(!isNaN(t.x),"Position is NaN"),this.cacheData(t,e)},Y.prototype.pointQuery=function(t){var e=this.nearestPointQuery(t);return e.d<0?e:void 0},Y.prototype.getBB=function(){return new X(this.bb_l,this.bb_b,this.bb_r,this.bb_t)};var z=function(t,e,n){this.shape=t,this.p=e,this.d=n},$=function(t,e,n){this.shape=t,this.t=e,this.n=n};$.prototype.hitPoint=function(t,e){return R(t,e,this.t)},$.prototype.hitDist=function(t,e){return B(t,e)*this.t};var J=cp.CircleShape=function(t,e,n){this.c=this.tc=n,this.r=e,this.type="circle",Y.call(this,t)};J.prototype=Object.create(Y.prototype),J.prototype.cacheData=function(t,e){var n=this.tc=I(this.c,e).add(t),i=this.r;this.bb_l=n.x-i,this.bb_b=n.y-i,this.bb_r=n.x+i,this.bb_t=n.y+i},J.prototype.nearestPointQuery=function(t){var e=t.x-this.tc.x,n=t.y-this.tc.y,i=w(e,n),r=this.r,s=new v(this.tc.x+e*r/i,this.tc.y+n*r/i);return new z(this,s,i-r)};var K=function(t,e,n,i,r,s){i=S(i,e),r=S(r,e);var o=_(i,i)-2*_(i,r)+_(r,r),a=-2*_(i,i)+2*_(i,r),c=_(i,i)-n*n,l=a*a-4*o*c;if(l>=0){var h=(-a-Math.sqrt(l))/(2*o);if(h>=0&&1>=h)return new $(t,h,N(R(i,r,h)))}};J.prototype.segmentQuery=function(t,e){return K(this,this.tc,this.r,t,e)};var Z=cp.SegmentShape=function(t,e,n,i){this.a=e,this.b=n,this.n=j(N(S(n,e))),this.ta=this.tb=this.tn=null,this.r=i,this.a_tangent=y,this.b_tangent=y,this.type="segment",Y.call(this,t)};Z.prototype=Object.create(Y.prototype),Z.prototype.cacheData=function(t,e){this.ta=E(t,I(this.a,e)),this.tb=E(t,I(this.b,e)),this.tn=I(this.n,e);var n,i,r,s;this.ta.x<this.tb.x?(n=this.ta.x,i=this.tb.x):(n=this.tb.x,i=this.ta.x),this.ta.y<this.tb.y?(r=this.ta.y,s=this.tb.y):(r=this.tb.y,s=this.ta.y);var o=this.r;this.bb_l=n-o,this.bb_b=r-o,this.bb_r=i+o,this.bb_t=s+o},Z.prototype.nearestPointQuery=function(t){var e=l(t,this.ta,this.tb),n=t.x-e.x,i=t.y-e.y,r=w(n,i),s=this.r,o=r?E(e,L(new v(n,i),s/r)):e;return new z(this,o,r-s)},Z.prototype.segmentQuery=function(t,e){var n=this.tn,i=_(S(this.ta,t),n),r=this.r,s=i>0?T(n):n,o=S(L(s,r),t),a=E(this.ta,o),c=E(this.tb,o),l=S(e,t);if(C(l,a)*C(l,c)<=0){var h=i+(i>0?-r:r),u=-h,p=_(l,n)-h;if(0>u*p)return new $(this,u/(u-p),s)}else if(0!==r){var d=K(this,this.ta,this.r,t,e),f=K(this,this.tb,this.r,t,e);return d?f&&f.t<d.t?f:d:f}},Z.prototype.setNeighbors=function(t,e){this.a_tangent=S(t,this.a),this.b_tangent=S(e,this.b)},Z.prototype.setEndpoints=function(t,e){this.a=t,this.b=e,this.n=j(N(S(e,t)))};var tt=function(t){for(var e=t.length,n=0;e>n;n+=2){var i=t[n],r=t[n+1],s=t[(n+2)%e],o=t[(n+3)%e],a=t[(n+4)%e],c=t[(n+5)%e];if(A(s-i,o-r,a-s,c-o)>0)return!1}return!0},et=cp.PolyShape=function(t,e,n){this.setVerts(e,n),this.type="poly",Y.call(this,t)};et.prototype=Object.create(Y.prototype);var nt=function(t,e){this.n=t,this.d=e};nt.prototype.compare=function(t){return _(this.n,t)-this.d},et.prototype.setVerts=function(t,e){i(t.length>=4,"Polygons require some verts"),i("number"==typeof t[0],"Polygon verticies should be specified in a flattened list (eg [x1,y1,x2,y2,x3,y3,...])"),i(tt(t),"Polygon is concave or has a reversed winding. Consider using cpConvexHull()");var n=t.length,r=n>>1;this.verts=new Array(n),this.tVerts=new Array(n),this.planes=new Array(r),this.tPlanes=new Array(r);for(var s=0;n>s;s+=2){var o=t[s]+e.x,a=t[s+1]+e.y,c=t[(s+2)%n]+e.x,l=t[(s+3)%n]+e.y,h=N(j(new v(c-o,l-a)));this.verts[s]=o,this.verts[s+1]=a,this.planes[s>>1]=new nt(h,b(h.x,h.y,o,a)),this.tPlanes[s>>1]=new nt(new v(0,0),0)}};var it=(cp.BoxShape=function(t,e,n){var i=e/2,r=n/2;return it(t,new X(-i,-r,i,r))},cp.BoxShape2=function(t,e){var n=[e.l,e.b,e.l,e.t,e.r,e.t,e.r,e.b];return new et(t,n,y)});et.prototype.transformVerts=function(t,i){for(var r=this.verts,s=this.tVerts,o=1/0,a=-(1/0),c=1/0,l=-(1/0),h=0;h<r.length;h+=2){var u=r[h],p=r[h+1],d=t.x+u*i.x-p*i.y,f=t.y+u*i.y+p*i.x;s[h]=d,s[h+1]=f,o=e(o,d),a=n(a,d),c=e(c,f),l=n(l,f)}this.bb_l=o,this.bb_b=c,this.bb_r=a,this.bb_t=l},et.prototype.transformAxes=function(t,e){for(var n=this.planes,i=this.tPlanes,r=0;r<n.length;r++){var s=I(n[r].n,e);i[r].n=s,i[r].d=_(t,s)+n[r].d}},et.prototype.cacheData=function(t,e){this.transformAxes(t,e),this.transformVerts(t,e)},et.prototype.nearestPointQuery=function(t){for(var e=this.tPlanes,n=this.tVerts,i=n[n.length-2],r=n[n.length-1],s=1/0,o=y,a=!1,c=0;c<e.length;c++){e[c].compare(t)>0&&(a=!0);var l=n[2*c],u=n[2*c+1],p=h(t.x,t.y,i,r,l,u),d=B(t,p);s>d&&(s=d,o=p),i=l,r=u}return new z(this,o,a?s:-s)},et.prototype.segmentQuery=function(t,e){for(var n=this.tPlanes,i=this.tVerts,r=n.length,s=2*r,o=0;r>o;o++){var a=n[o].n,c=_(t,a);if(!(n[o].d>c)){var l=_(e,a),h=(n[o].d-c)/(l-c);if(!(0>h||h>1)){var u=R(t,e,h),p=-C(a,u),d=-A(a.x,a.y,i[2*o],i[2*o+1]),f=-A(a.x,a.y,i[(2*o+2)%s],i[(2*o+3)%s]);if(p>=d&&f>=p)return new $(this,h,a)}}}},et.prototype.valueOnAxis=function(t,n){for(var i=this.tVerts,r=b(t.x,t.y,i[0],i[1]),s=2;s<i.length;s+=2)r=e(r,b(t.x,t.y,i[s],i[s+1]));return r-n},et.prototype.containsVert=function(t,e){for(var n=this.tPlanes,i=0;i<n.length;i++){var r=n[i].n,s=b(r.x,r.y,t,e)-n[i].d;if(s>0)return!1}return!0},et.prototype.containsVertPartial=function(t,e,n){for(var i=this.tPlanes,r=0;r<i.length;r++){var s=i[r].n;if(!(_(s,n)<0)){var o=b(s.x,s.y,t,e)-i[r].d;if(o>0)return!1}}return!0},et.prototype.getNumVerts=function(){return this.verts.length/2},et.prototype.getVert=function(t){return new v(this.verts[2*t],this.verts[2*t+1])};var rt=cp.Body=function(t,e){this.p=new v(0,0),this.vx=this.vy=0,this.f=new v(0,0),this.w=0,this.t=0,this.v_limit=1/0,this.w_limit=1/0,this.v_biasx=this.v_biasy=0,this.w_bias=0,this.space=null,this.shapeList=[],this.arbiterList=null,this.constraintList=null,this.nodeRoot=null,this.nodeNext=null,this.nodeIdleTime=0,this.setMass(t),this.setMoment(e),this.rot=new v(0,0),this.setAngle(0)};if("undefined"!=typeof DEBUG&&DEBUG){var st=function(t,e){i(t.x==t.x&&t.y==t.y,e)},ot=function(t,e){i(Math.abs(t.x)!==1/0&&Math.abs(t.y)!==1/0,e)},at=function(t,e){st(t,e),ot(t,e)};rt.prototype.sanityCheck=function(){i(this.m===this.m&&this.m_inv===this.m_inv,"Body's mass is invalid."),i(this.i===this.i&&this.i_inv===this.i_inv,"Body's moment is invalid."),at(this.p,"Body's position is invalid."),at(this.f,"Body's force is invalid."),i(this.vx===this.vx&&Math.abs(this.vx)!==1/0,"Body's velocity is invalid."),i(this.vy===this.vy&&Math.abs(this.vy)!==1/0,"Body's velocity is invalid."),i(this.a===this.a&&Math.abs(this.a)!==1/0,"Body's angle is invalid."),i(this.w===this.w&&Math.abs(this.w)!==1/0,"Body's angular velocity is invalid."),i(this.t===this.t&&Math.abs(this.t)!==1/0,"Body's torque is invalid."),at(this.rot,"Body's rotation vector is invalid."),i(this.v_limit===this.v_limit,"Body's velocity limit is invalid."),i(this.w_limit===this.w_limit,"Body's angular velocity limit is invalid.")}}else rt.prototype.sanityCheck=function(){};rt.prototype.getPos=function(){return this.p},rt.prototype.getVel=function(){return new v(this.vx,this.vy)},rt.prototype.getAngVel=function(){return this.w},rt.prototype.isSleeping=function(){return null!==this.nodeRoot},rt.prototype.isStatic=function(){return this.nodeIdleTime===1/0},rt.prototype.isRogue=function(){return null===this.space},rt.prototype.setMass=function(t){i(t>0,"Mass must be positive and non-zero."),this.activate(),this.m=t,this.m_inv=1/t},rt.prototype.setMoment=function(t){i(t>0,"Moment of Inertia must be positive and non-zero."),this.activate(),this.i=t,this.i_inv=1/t},rt.prototype.addShape=function(t){this.shapeList.push(t)},rt.prototype.removeShape=function(t){c(this.shapeList,t)};var ct=function(t,e,n){return t===n?t.next(e):(t.a===e?t.next_a=ct(t.next_a,e,n):t.next_b=ct(t.next_b,e,n),t)};rt.prototype.removeConstraint=function(t){this.constraintList=ct(this.constraintList,this,t)},rt.prototype.setPos=function(t){this.activate(),this.sanityCheck(),t===y&&(t=cp.v(0,0)),this.p=t},rt.prototype.setVel=function(t){this.activate(),this.vx=t.x,this.vy=t.y},rt.prototype.setAngVel=function(t){this.activate(),this.w=t},rt.prototype.setAngleInternal=function(t){i(!isNaN(t),"Internal Error: Attempting to set body's angle to NaN"),this.a=t,this.rot.x=Math.cos(t),this.rot.y=Math.sin(t)},rt.prototype.setAngle=function(t){this.activate(),this.sanityCheck(),this.setAngleInternal(t)},rt.prototype.velocity_func=function(t,e,n){var i=this.vx*e+(t.x+this.f.x*this.m_inv)*n,r=this.vy*e+(t.y+this.f.y*this.m_inv)*n,s=this.v_limit,o=i*i+r*r,a=o>s*s?s/Math.sqrt(o):1;this.vx=i*a,this.vy=r*a;var c=this.w_limit;this.w=g(this.w*e+this.t*this.i_inv*n,-c,c),this.sanityCheck()},rt.prototype.position_func=function(t){this.p.x+=(this.vx+this.v_biasx)*t,this.p.y+=(this.vy+this.v_biasy)*t,this.setAngleInternal(this.a+(this.w+this.w_bias)*t),this.v_biasx=this.v_biasy=0,this.w_bias=0,this.sanityCheck()},rt.prototype.resetForces=function(){this.activate(),this.f=new v(0,0),this.t=0},rt.prototype.applyForce=function(t,e){this.activate(),this.f=E(this.f,t),this.t+=C(e,t)},rt.prototype.applyImpulse=function(t,e){this.activate(),he(this,t.x,t.y,e)},rt.prototype.getVelAtPoint=function(t){return E(new v(this.vx,this.vy),L(j(t),this.w))},rt.prototype.getVelAtWorldPoint=function(t){return this.getVelAtPoint(S(t,this.p))},rt.prototype.getVelAtLocalPoint=function(t){return this.getVelAtPoint(I(t,this.rot))},rt.prototype.eachShape=function(t){for(var e=0,n=this.shapeList.length;n>e;e++)t(this.shapeList[e])},rt.prototype.eachConstraint=function(t){for(var e=this.constraintList;e;){var n=e.next(this);t(e),e=n}},rt.prototype.eachArbiter=function(t){for(var e=this.arbiterList;e;){var n=e.next(this);e.swappedColl=this===e.body_b,t(e),e=n}},rt.prototype.local2World=function(t){return E(this.p,I(t,this.rot))},rt.prototype.world2Local=function(t){return M(S(t,this.p),this.rot)},rt.prototype.kineticEnergy=function(){var t=this.vx*this.vx+this.vy*this.vy,e=this.w*this.w;return(t?t*this.m:0)+(e?e*this.i:0)};var lt=cp.SpatialIndex=function(t){if(this.staticIndex=t,t){if(t.dynamicIndex)throw new Error("This static index is already associated with a dynamic index.");t.dynamicIndex=this}};lt.prototype.collideStatic=function(t,e){if(t.count>0){var n=t.query.bind(this);this.each(function(t){n(t,new X(t.bb_l,t.bb_b,t.bb_r,t.bb_t),e)})}};var ht=cp.BBTree=function(t){lt.call(this,t),this.velocityFunc=null,this.leaves={},this.count=0,this.root=null,this.pooledNodes=null,this.pooledPairs=null,this.stamp=0};ht.prototype=Object.create(lt.prototype);var ut=0,pt=function(t,i,r){this.obj=null,this.bb_l=e(i.bb_l,r.bb_l),this.bb_b=e(i.bb_b,r.bb_b),this.bb_r=n(i.bb_r,r.bb_r),this.bb_t=n(i.bb_t,r.bb_t),this.parent=null,this.setA(i),this.setB(r)};ht.prototype.makeNode=function(t,e){var n=this.pooledNodes;return n?(this.pooledNodes=n.parent,n.constructor(this,t,e),n):(ut++,new pt(this,t,e))};var dt=0,ft=function(t,e){this.obj=e,t.getBB(e,this),this.parent=null,this.stamp=1,this.pairs=null,dt++};ht.prototype.getBB=function(t,i){var r=this.velocityFunc;if(r){var s=.1,o=(t.bb_r-t.bb_l)*s,a=(t.bb_t-t.bb_b)*s,c=L(r(t),.1);i.bb_l=t.bb_l+e(-o,c.x),i.bb_b=t.bb_b+e(-a,c.y),i.bb_r=t.bb_r+n(o,c.x),i.bb_t=t.bb_t+n(a,c.y)}else i.bb_l=t.bb_l,i.bb_b=t.bb_b,i.bb_r=t.bb_r,i.bb_t=t.bb_t},ht.prototype.getStamp=function(){var t=this.dynamicIndex;return t&&t.stamp?t.stamp:this.stamp},ht.prototype.incrementStamp=function(){this.dynamicIndex&&this.dynamicIndex.stamp?this.dynamicIndex.stamp++:this.stamp++};var gt=0,mt=function(t,e,n,i){this.prevA=null,this.leafA=t,this.nextA=e,this.prevB=null,this.leafB=n,this.nextB=i};ht.prototype.makePair=function(t,e,n,i){var r=this.pooledPairs;return r?(this.pooledPairs=r.prevA,r.prevA=null,r.leafA=t,r.nextA=e,r.prevB=null,r.leafB=n,r.nextB=i,r):(gt++,new mt(t,e,n,i))},mt.prototype.recycle=function(t){this.prevA=t.pooledPairs,t.pooledPairs=this};var vt=function(t,e,n){n&&(n.leafA===e?n.prevA=t:n.prevB=t),t?t.leafA===e?t.nextA=n:t.nextB=n:e.pairs=n};ft.prototype.clearPairs=function(t){var e,n=this.pairs;for(this.pairs=null;n;)n.leafA===this?(e=n.nextA,vt(n.prevB,n.leafB,n.nextB)):(e=n.nextB,vt(n.prevA,n.leafA,n.nextA)),n.recycle(t),n=e};var yt=function(t,e,n){var i=t.pairs,r=e.pairs,s=n.makePair(t,i,e,r);t.pairs=e.pairs=s,i&&(i.leafA===t?i.prevA=s:i.prevB=s),r&&(r.leafA===e?r.prevA=s:r.prevB=s)};pt.prototype.recycle=function(t){this.parent=t.pooledNodes,t.pooledNodes=this},ft.prototype.recycle=function(t){},pt.prototype.setA=function(t){this.A=t,t.parent=this},pt.prototype.setB=function(t){this.B=t,t.parent=this},ft.prototype.isLeaf=!0,pt.prototype.isLeaf=!1,pt.prototype.otherChild=function(t){return this.A==t?this.B:this.A},pt.prototype.replaceChild=function(t,i,s){r(t==this.A||t==this.B,"Node is not a child of parent."),this.A==t?(this.A.recycle(s),this.setA(i)):(this.B.recycle(s),this.setB(i));for(var o=this;o;o=o.parent){var a=o.A,c=o.B;o.bb_l=e(a.bb_l,c.bb_l),o.bb_b=e(a.bb_b,c.bb_b),o.bb_r=n(a.bb_r,c.bb_r),o.bb_t=n(a.bb_t,c.bb_t)}},pt.prototype.bbArea=ft.prototype.bbArea=function(){return(this.bb_r-this.bb_l)*(this.bb_t-this.bb_b)};var _t=function(t,i){return(n(t.bb_r,i.bb_r)-e(t.bb_l,i.bb_l))*(n(t.bb_t,i.bb_t)-e(t.bb_b,i.bb_b))},bt=function(t,e){return Math.abs(t.bb_l+t.bb_r-e.bb_l-e.bb_r)+Math.abs(t.bb_b+t.bb_t-e.bb_b-e.bb_t)},xt=function(t,i,r){if(null==t)return i;if(t.isLeaf)return r.makeNode(i,t);var s=t.B.bbArea()+_t(t.A,i),o=t.A.bbArea()+_t(t.B,i);return s===o&&(s=bt(t.A,i),o=bt(t.B,i)),s>o?t.setB(xt(t.B,i,r)):t.setA(xt(t.A,i,r)),t.bb_l=e(t.bb_l,i.bb_l),t.bb_b=e(t.bb_b,i.bb_b),t.bb_r=n(t.bb_r,i.bb_r),t.bb_t=n(t.bb_t,i.bb_t),t};pt.prototype.intersectsBB=ft.prototype.intersectsBB=function(t){return this.bb_l<=t.r&&t.l<=this.bb_r&&this.bb_b<=t.t&&t.b<=this.bb_t};var wt=function(t,e,n){t.intersectsBB(e)&&(t.isLeaf?n(t.obj):(wt(t.A,e,n),wt(t.B,e,n)))},Et=function(t,i,r){var s=1/(r.x-i.x),o=t.bb_l==i.x?-(1/0):(t.bb_l-i.x)*s,a=t.bb_r==i.x?1/0:(t.bb_r-i.x)*s,c=e(o,a),l=n(o,a),h=1/(r.y-i.y),u=t.bb_b==i.y?-(1/0):(t.bb_b-i.y)*h,p=t.bb_t==i.y?1/0:(t.bb_t-i.y)*h,d=e(u,p),f=n(u,p);if(l>=d&&f>=c){var g=n(c,d),m=e(l,f);if(m>=0&&1>=g)return n(g,0)}return 1/0},St=function(t,n,i,r,s){if(t.isLeaf)return s(t.obj);var o=Et(t.A,n,i),a=Et(t.B,n,i);return a>o?(r>o&&(r=e(r,St(t.A,n,i,r,s))),r>a&&(r=e(r,St(t.B,n,i,r,s)))):(r>a&&(r=e(r,St(t.B,n,i,r,s))),r>o&&(r=e(r,St(t.A,n,i,r,s)))),r};ht.prototype.subtreeRecycle=function(t){t.isLeaf&&(this.subtreeRecycle(t.A),this.subtreeRecycle(t.B),t.recycle(this))};var Tt=function(t,e,n){if(e==t)return null;var i=e.parent;if(i==t){var r=t.otherChild(e);return r.parent=t.parent,t.recycle(n),r}return i.parent.replaceChild(i,i.otherChild(e),n),t},Lt=function(t,e){return t.bb_l<=e.bb_r&&e.bb_l<=t.bb_r&&t.bb_b<=e.bb_t&&e.bb_b<=t.bb_t};ft.prototype.markLeafQuery=function(t,e,n,i){Lt(t,this)&&(e?yt(t,this,n):(this.stamp<t.stamp&&yt(this,t,n),i&&i(t.obj,this.obj)))},pt.prototype.markLeafQuery=function(t,e,n,i){Lt(t,this)&&(this.A.markLeafQuery(t,e,n,i),this.B.markLeafQuery(t,e,n,i))},ft.prototype.markSubtree=function(t,e,n){if(this.stamp==t.getStamp()){e&&e.markLeafQuery(this,!1,t,n);for(var i=this;i.parent;i=i.parent)i==i.parent.A?i.parent.B.markLeafQuery(this,!0,t,n):i.parent.A.markLeafQuery(this,!1,t,n)}else for(var r=this.pairs;r;)this===r.leafB?(n&&n(r.leafA.obj,this.obj),r=r.nextB):r=r.nextA},pt.prototype.markSubtree=function(t,e,n){this.A.markSubtree(t,e,n),this.B.markSubtree(t,e,n)},ft.prototype.containsObj=function(t){return this.bb_l<=t.bb_l&&this.bb_r>=t.bb_r&&this.bb_b<=t.bb_b&&this.bb_t>=t.bb_t},ft.prototype.update=function(t){var e=t.root,n=this.obj;return this.containsObj(n)?!1:(t.getBB(this.obj,this),e=Tt(e,this,t),t.root=xt(e,this,t),this.clearPairs(t),this.stamp=t.getStamp(),!0)},ft.prototype.addPairs=function(t){var e=t.dynamicIndex;
if(e){var n=e.root;n&&n.markLeafQuery(this,!0,e,null)}else{var i=t.staticIndex.root;this.markSubtree(t,i,null)}},ht.prototype.insert=function(t,e){var n=new ft(this,t);this.leaves[e]=n,this.root=xt(this.root,n,this),this.count++,n.stamp=this.getStamp(),n.addPairs(this),this.incrementStamp()},ht.prototype.remove=function(t,e){var n=this.leaves[e];delete this.leaves[e],this.root=Tt(this.root,n,this),this.count--,n.clearPairs(this),n.recycle(this)},ht.prototype.contains=function(t,e){return null!=this.leaves[e]};var Ct=function(t,e){};ht.prototype.reindexQuery=function(t){if(this.root){var e,n=this.leaves;for(e in n)n[e].update(this);var i=this.staticIndex,r=i&&i.root;this.root.markSubtree(this,r,t),i&&!r&&this.collideStatic(this,i,t),this.incrementStamp()}},ht.prototype.reindex=function(){this.reindexQuery(Ct)},ht.prototype.reindexObject=function(t,e){var n=this.leaves[e];n&&(n.update(this)&&n.addPairs(this),this.incrementStamp())},ht.prototype.pointQuery=function(t,e){this.query(new X(t.x,t.y,t.x,t.y),e)},ht.prototype.segmentQuery=function(t,e,n,i){this.root&&St(this.root,t,e,n,i)},ht.prototype.query=function(t,e){this.root&&wt(this.root,t,e)},ht.prototype.count=function(){return this.count},ht.prototype.each=function(t){var e;for(e in this.leaves)t(this.leaves[e].obj)};var At=function(t,i,r,s,o){return(n(t.bb_r,s)-e(t.bb_l,i))*(n(t.bb_t,o)-e(t.bb_b,r))},jt=function(t,i,r,s){if(1==s)return i[r];if(2==s)return t.makeNode(i[r],i[r+1]);for(var o=i[r],a=o.bb_l,c=o.bb_b,l=o.bb_r,h=o.bb_t,u=r+s,p=r+1;u>p;p++)o=i[p],a=e(a,o.bb_l),c=e(c,o.bb_b),l=n(l,o.bb_r),h=n(h,o.bb_t);var d=l-a>h-c,f=new Array(2*s);if(d)for(var p=r;u>p;p++)f[2*p+0]=i[p].bb_l,f[2*p+1]=i[p].bb_r;else for(var p=r;u>p;p++)f[2*p+0]=i[p].bb_b,f[2*p+1]=i[p].bb_t;f.sort(function(t,e){return t-e});var g=.5*(f[s-1]+f[s]),m=a,v=c,y=l,_=h,b=a,x=c,w=l,E=h;d?y=b=g:_=x=g;for(var S=u,T=r;S>T;){var o=i[T];At(o,b,x,w,E)<At(o,m,v,y,_)?(S--,i[T]=i[S],i[S]=o):T++}if(S==s){for(var o=null,p=r;u>p;p++)o=xt(o,i[p],t);return o}return NodeNew(t,jt(t,i,r,S-r),jt(t,i,S,u-S))};ht.prototype.optimize=function(){var e=new Array(this.count),n=0;for(var i in this.leaves)e[n++]=this.nodes[i];tree.subtreeRecycle(t),this.root=jt(tree,e,e.length)};var kt=function(t,e){!t.isLeaf&&10>=e&&(kt(t.A,e+1),kt(t.B,e+1));for(var n="",i=0;e>i;i++)n+=" ";console.log(n+t.bb_b+" "+t.bb_t)};ht.prototype.log=function(){this.root&&kt(this.root,0)};var It=cp.CollisionHandler=function(){this.a=this.b=0};It.prototype.begin=function(t,e){return!0},It.prototype.preSolve=function(t,e){return!0},It.prototype.postSolve=function(t,e){},It.prototype.separate=function(t,e){};var Mt=function(t,e){this.e=0,this.u=0,this.surface_vr=y,this.a=t,this.body_a=t.body,this.b=e,this.body_b=e.body,this.thread_a_next=this.thread_a_prev=null,this.thread_b_next=this.thread_b_prev=null,this.contacts=null,this.stamp=0,this.handler=null,this.swappedColl=!1,this.state="first coll"};Mt.prototype.getShapes=function(){return this.swappedColl?[this.b,this.a]:[this.a,this.b]},Mt.prototype.totalImpulse=function(){for(var t=this.contacts,e=new v(0,0),n=0,i=t.length;i>n;n++){var r=t[n];e.add(L(r.n,r.jnAcc))}return this.swappedColl?e:e.neg()},Mt.prototype.totalImpulseWithFriction=function(){for(var t=this.contacts,e=new v(0,0),n=0,i=t.length;i>n;n++){var r=t[n];e.add(new v(r.jnAcc,r.jtAcc).rotate(r.n))}return this.swappedColl?e:e.neg()},Mt.prototype.totalKE=function(){for(var t=(1-this.e)/(1+this.e),e=0,n=this.contacts,i=0,r=n.length;r>i;i++){var s=n[i],o=s.jnAcc,a=s.jtAcc;e+=t*o*o/s.nMass+a*a/s.tMass}return e},Mt.prototype.ignore=function(){this.state="ignore"},Mt.prototype.getA=function(){return this.swappedColl?this.b:this.a},Mt.prototype.getB=function(){return this.swappedColl?this.a:this.b},Mt.prototype.isFirstContact=function(){return"first coll"===this.state};var Pt=function(t,e,n){this.point=t,this.normal=e,this.dist=n};Mt.prototype.getContactPointSet=function(){var t,e=new Array(this.contacts.length);for(t=0;t<e.length;t++)e[t]=new Pt(this.contacts[t].p,this.contacts[t].n,this.contacts[t].dist);return e},Mt.prototype.getNormal=function(t){var e=this.contacts[t].n;return this.swappedColl?T(e):e},Mt.prototype.getPoint=function(t){return this.contacts[t].p},Mt.prototype.getDepth=function(t){return this.contacts[t].dist};var Dt=function(t,e,n,i){n?n.body_a===e?n.thread_a_next=i:n.thread_b_next=i:e.arbiterList=i,i&&(i.body_a===e?i.thread_a_prev=n:i.thread_b_prev=n)};Mt.prototype.unthread=function(){Dt(this,this.body_a,this.thread_a_prev,this.thread_a_next),Dt(this,this.body_b,this.thread_b_prev,this.thread_b_next),this.thread_a_prev=this.thread_a_next=null,this.thread_b_prev=this.thread_b_next=null},Mt.prototype.update=function(t,e,n,i){if(this.contacts)for(var r=0;r<this.contacts.length;r++)for(var s=this.contacts[r],o=0;o<t.length;o++){var a=t[o];a.hash===s.hash&&(a.jnAcc=s.jnAcc,a.jtAcc=s.jtAcc)}this.contacts=t,this.handler=e,this.swappedColl=n.collision_type!==e.a,this.e=n.e*i.e,this.u=n.u*i.u,this.surface_vr=S(n.surface_v,i.surface_v),this.a=n,this.body_a=n.body,this.b=i,this.body_b=i.body,"cached"==this.state&&(this.state="first coll")},Mt.prototype.preStep=function(t,n,i){for(var r=this.body_a,s=this.body_b,o=0;o<this.contacts.length;o++){var a=this.contacts[o];a.r1=S(a.p,r.p),a.r2=S(a.p,s.p),a.nMass=1/fe(r,s,a.r1,a.r2,a.n),a.tMass=1/fe(r,s,a.r1,a.r2,j(a.n)),a.bias=-i*e(0,a.dist+n)/t,a.jBias=0,a.bounce=le(r,s,a.r1,a.r2,a.n)*this.e}},Mt.prototype.applyCachedImpulse=function(t){if(!this.isFirstContact())for(var e=this.body_a,n=this.body_b,i=0;i<this.contacts.length;i++){var r=this.contacts[i],s=r.n.x,o=r.n.y,a=s*r.jnAcc-o*r.jtAcc,c=s*r.jtAcc+o*r.jnAcc;ue(e,n,r.r1,r.r2,a*t,c*t)}};var Rt=0,Nt=0;Mt.prototype.applyImpulse=function(){Rt++;for(var t=this.body_a,e=this.body_b,i=this.surface_vr,r=this.u,s=0;s<this.contacts.length;s++){Nt++;var o=this.contacts[s],a=o.nMass,c=o.n,l=o.r1,h=o.r2,u=e.vx-h.y*e.w-(t.vx-l.y*t.w),p=e.vy+h.x*e.w-(t.vy+l.x*t.w),d=c.x*(e.v_biasx-h.y*e.w_bias-t.v_biasx+l.y*t.w_bias)+c.y*(h.x*e.w_bias+e.v_biasy-l.x*t.w_bias-t.v_biasy),f=b(u,p,c.x,c.y),m=b(u+i.x,p+i.y,-c.y,c.x),v=(o.bias-d)*a,y=o.jBias;o.jBias=n(y+v,0);var _=-(o.bounce+f)*a,x=o.jnAcc;o.jnAcc=n(x+_,0);var w=r*o.jnAcc,E=-m*o.tMass,S=o.jtAcc;o.jtAcc=g(S+E,-w,w);var T=c.x*(o.jBias-y),L=c.y*(o.jBias-y);pe(t,-T,-L,l),pe(e,T,L,h);var C=o.jnAcc-x,A=o.jtAcc-S;ue(t,e,l,h,c.x*C-c.y*A,c.x*A+c.y*C)}},Mt.prototype.callSeparate=function(t){var e=t.lookupHandler(this.a.collision_type,this.b.collision_type);e.separate(this,t)},Mt.prototype.next=function(t){return this.body_a==t?this.thread_a_next:this.thread_b_next};var Ot=0,Ft=function(t,e,n,i){this.p=t,this.n=e,this.dist=n,this.r1=this.r2=y,this.nMass=this.tMass=this.bounce=this.bias=0,this.jnAcc=this.jtAcc=this.jBias=0,this.hash=i,Ot++},Bt=[],Ht=function(t,e,n,i){var r=n+i,s=S(e,t),o=P(s);if(!(o>=r*r)){var a=Math.sqrt(o);return new Ft(E(t,L(s,.5+(n-.5*r)/(a?a:1/0))),a?L(s,1/a):new v(1,0),a-r,0)}},Ut=function(t,e){var n=Ht(t.tc,e.tc,t.r,e.r);return n?[n]:Bt},qt=function(t,e){var n=e.ta,i=e.tb,r=t.tc,s=S(i,n),o=m(_(s,S(r,n))/P(s)),a=E(n,L(s,o)),c=Ht(r,a,t.r,e.r);if(c){var l=c.n;return 0===o&&_(l,e.a_tangent)<0||1===o&&_(l,e.b_tangent)<0?Bt:[c]}return Bt},Xt=0,Gt=function(t,e){var n=0,i=t.valueOnAxis(e[0].n,e[0].d);if(i>0)return-1;for(var r=1;r<e.length;r++){var s=t.valueOnAxis(e[r].n,e[r].d);if(s>0)return-1;s>i&&(i=s,n=r)}return Xt=i,n},Wt=function(t,e,n,i){for(var r=[],s=t.tVerts,o=0;o<s.length;o+=2){var c=s[o],l=s[o+1];e.containsVertPartial(c,l,T(n))&&r.push(new Ft(new v(c,l),n,i,a(t.hashid,o)))}for(var h=e.tVerts,o=0;o<h.length;o+=2){var c=h[o],l=h[o+1];t.containsVertPartial(c,l,n)&&r.push(new Ft(new v(c,l),n,i,a(e.hashid,o)))}return r},Vt=function(t,e,n,i){for(var r=[],s=t.tVerts,o=0;o<s.length;o+=2){var c=s[o],l=s[o+1];e.containsVert(c,l)&&r.push(new Ft(new v(c,l),n,i,a(t.hashid,o>>1)))}for(var h=e.tVerts,o=0;o<h.length;o+=2){var c=h[o],l=h[o+1];t.containsVert(c,l)&&r.push(new Ft(new v(c,l),n,i,a(e.hashid,o>>1)))}return r.length?r:Wt(t,e,n,i)},Qt=function(t,e){var n=Gt(e,t.tPlanes);if(-1==n)return Bt;var i=Xt,r=Gt(t,e.tPlanes);if(-1==r)return Bt;var s=Xt;return i>s?Vt(t,e,t.tPlanes[n].n,i):Vt(t,e,T(e.tPlanes[r].n),s)},Yt=function(t,n,i){var r=_(n,t.ta)-t.r,s=_(n,t.tb)-t.r;return e(r,s)-i},zt=function(t,e,n,i,r){for(var s=C(e.tn,e.ta),o=C(e.tn,e.tb),c=L(e.tn,r),l=n.tVerts,h=0;h<l.length;h+=2){var u=l[h],p=l[h+1];if(b(u,p,c.x,c.y)<_(e.tn,e.ta)*r+e.r){var d=A(e.tn.x,e.tn.y,u,p);s>=d&&d>=o&&t.push(new Ft(new v(u,p),c,i,a(n.hashid,h)))}}},$t=function(t,e){var n=[],i=e.tPlanes,r=i.length,s=_(t.tn,t.ta),o=e.valueOnAxis(t.tn,s)-t.r,c=e.valueOnAxis(T(t.tn),-s)-t.r;if(c>0||o>0)return Bt;var l=0,h=Yt(t,i[0].n,i[0].d);if(h>0)return Bt;for(var u=0;r>u;u++){var p=Yt(t,i[u].n,i[u].d);if(p>0)return Bt;p>h&&(h=p,l=u)}var d=T(i[l].n),f=E(t.ta,L(d,t.r)),g=E(t.tb,L(d,t.r));if(e.containsVert(f.x,f.y)&&n.push(new Ft(f,d,h,a(t.hashid,0))),e.containsVert(g.x,g.y)&&n.push(new Ft(g,d,h,a(t.hashid,1))),(o>=h||c>=h)&&(o>c?zt(n,t,e,o,1):zt(n,t,e,c,-1)),0===n.length){var m,y=2*l,b=e.tVerts,x=new v(b[y],b[y+1]);if(m=Ht(t.ta,x,t.r,0,n))return[m];if(m=Ht(t.tb,x,t.r,0,n))return[m];var w=2*r,S=new v(b[(y+2)%w],b[(y+3)%w]);if(m=Ht(t.ta,S,t.r,0,n))return[m];if(m=Ht(t.tb,S,t.r,0,n))return[m]}return n},Jt=function(t,e){for(var n=e.tPlanes,i=0,r=_(n[0].n,t.tc)-n[0].d-t.r,s=0;s<n.length;s++){var o=_(n[s].n,t.tc)-n[s].d-t.r;if(o>0)return Bt;o>r&&(r=o,i=s)}var a=n[i].n,c=e.tVerts,l=c.length,h=i<<1,u=c[h],p=c[h+1],d=c[(h+2)%l],f=c[(h+3)%l],g=A(a.x,a.y,u,p),m=A(a.x,a.y,d,f),y=C(a,t.tc);if(m>y){var b=Ht(t.tc,new v(d,f),t.r,0,b);return b?[b]:Bt}if(g>y)return[new Ft(S(t.tc,L(a,t.r+r/2)),T(a),r,0)];var b=Ht(t.tc,new v(u,p),t.r,0,b);return b?[b]:Bt};J.prototype.collisionCode=0,Z.prototype.collisionCode=1,et.prototype.collisionCode=2,J.prototype.collisionTable=[Ut,qt,Jt],Z.prototype.collisionTable=[null,function(t,e){return Bt},$t],et.prototype.collisionTable=[null,null,Qt];var Kt=cp.collideShapes=function(t,e){return i(t.collisionCode<=e.collisionCode,"Collided shapes must be sorted by type"),t.collisionTable[e.collisionCode](t,e)},Zt=new It,te=cp.Space=function(){this.stamp=0,this.curr_dt=0,this.bodies=[],this.rousedBodies=[],this.sleepingComponents=[],this.staticShapes=new ht(null),this.activeShapes=new ht(this.staticShapes),this.arbiters=[],this.contactBuffersHead=null,this.cachedArbiters={},this.constraints=[],this.locked=0,this.collisionHandlers={},this.defaultHandler=Zt,this.postStepCallbacks=[],this.iterations=10,this.gravity=y,this.damping=1,this.idleSpeedThreshold=0,this.sleepTimeThreshold=1/0,this.collisionSlop=.1,this.collisionBias=Math.pow(.9,60),this.collisionPersistence=3,this.enableContactGraph=!1,this.staticBody=new rt(1/0,1/0),this.staticBody.nodeIdleTime=1/0,this.collideShapes=this.makeCollideShapes()};te.prototype.getCurrentTimeStep=function(){return this.curr_dt},te.prototype.setIterations=function(t){this.iterations=t},te.prototype.isLocked=function(){return this.locked};var ee=function(t){i(!t.locked,"This addition/removal cannot be done safely during a call to cpSpaceStep()  or during a query. Put these calls into a post-step callback.")};te.prototype.addCollisionHandler=function(t,e,n,i,r,s){ee(this),this.removeCollisionHandler(t,e);var o=new It;o.a=t,o.b=e,n&&(o.begin=n),i&&(o.preSolve=i),r&&(o.postSolve=r),s&&(o.separate=s),this.collisionHandlers[a(t,e)]=o},te.prototype.removeCollisionHandler=function(t,e){ee(this),delete this.collisionHandlers[a(t,e)]},te.prototype.setDefaultCollisionHandler=function(t,e,n,i){ee(this);var r=new It;t&&(r.begin=t),e&&(r.preSolve=e),n&&(r.postSolve=n),i&&(r.separate=i),this.defaultHandler=r},te.prototype.lookupHandler=function(t,e){return this.collisionHandlers[a(t,e)]||this.defaultHandler},te.prototype.addShape=function(t){var e=t.body;return e.isStatic()?this.addStaticShape(t):(i(!t.space,"This shape is already added to a space and cannot be added to another."),ee(this),e.activate(),e.addShape(t),t.update(e.p,e.rot),this.activeShapes.insert(t,t.hashid),t.space=this,t)},te.prototype.addStaticShape=function(t){i(!t.space,"This shape is already added to a space and cannot be added to another."),ee(this);var e=t.body;return e.addShape(t),t.update(e.p,e.rot),this.staticShapes.insert(t,t.hashid),t.space=this,t},te.prototype.addBody=function(t){return i(!t.isStatic(),"Static bodies cannot be added to a space as they are not meant to be simulated."),i(!t.space,"This body is already added to a space and cannot be added to another."),ee(this),this.bodies.push(t),t.space=this,t},te.prototype.addConstraint=function(t){i(!t.space,"This shape is already added to a space and cannot be added to another."),ee(this);var e=t.a,n=t.b;return e.activate(),n.activate(),this.constraints.push(t),t.next_a=e.constraintList,e.constraintList=t,t.next_b=n.constraintList,n.constraintList=t,t.space=this,t},te.prototype.filterArbiters=function(t,e){for(var n in this.cachedArbiters){var i=this.cachedArbiters[n];(t===i.body_a&&(e===i.a||null===e)||t===i.body_b&&(e===i.b||null===e))&&(e&&"cached"!==i.state&&i.callSeparate(this),i.unthread(),c(this.arbiters,i),delete this.cachedArbiters[n])}},te.prototype.removeShape=function(t){var e=t.body;e.isStatic()?this.removeStaticShape(t):(i(this.containsShape(t),"Cannot remove a shape that was not added to the space. (Removed twice maybe?)"),ee(this),e.activate(),e.removeShape(t),this.filterArbiters(e,t),this.activeShapes.remove(t,t.hashid),t.space=null)},te.prototype.removeStaticShape=function(t){i(this.containsShape(t),"Cannot remove a static or sleeping shape that was not added to the space. (Removed twice maybe?)"),ee(this);var e=t.body;e.isStatic()&&e.activateStatic(t),e.removeShape(t),this.filterArbiters(e,t),this.staticShapes.remove(t,t.hashid),t.space=null},te.prototype.removeBody=function(t){i(this.containsBody(t),"Cannot remove a body that was not added to the space. (Removed twice maybe?)"),ee(this),t.activate(),c(this.bodies,t),t.space=null},te.prototype.removeConstraint=function(t){i(this.containsConstraint(t),"Cannot remove a constraint that was not added to the space. (Removed twice maybe?)"),ee(this),t.a.activate(),t.b.activate(),c(this.constraints,t),t.a.removeConstraint(t),t.b.removeConstraint(t),t.space=null},te.prototype.containsShape=function(t){return t.space===this},te.prototype.containsBody=function(t){return t.space==this},te.prototype.containsConstraint=function(t){return t.space==this},te.prototype.uncacheArbiter=function(t){delete this.cachedArbiters[a(t.a.hashid,t.b.hashid)],c(this.arbiters,t)},te.prototype.eachBody=function(t){this.lock();for(var e=this.bodies,n=0;n<e.length;n++)t(e[n]);for(var i=this.sleepingComponents,n=0;n<i.length;n++)for(var r=i[n],s=r;s;){var o=s.nodeNext;t(s),s=o}this.unlock(!0)},te.prototype.eachShape=function(t){this.lock(),this.activeShapes.each(t),this.staticShapes.each(t),this.unlock(!0)},te.prototype.eachConstraint=function(t){this.lock();for(var e=this.constraints,n=0;n<e.length;n++)t(e[n]);this.unlock(!0)},te.prototype.reindexStatic=function(){i(!this.locked,"You cannot manually reindex objects while the space is locked. Wait until the current query or step is complete."),this.staticShapes.each(function(t){var e=t.body;t.update(e.p,e.rot)}),this.staticShapes.reindex()},te.prototype.reindexShape=function(t){i(!this.locked,"You cannot manually reindex objects while the space is locked. Wait until the current query or step is complete.");var e=t.body;t.update(e.p,e.rot),this.activeShapes.reindexObject(t,t.hashid),this.staticShapes.reindexObject(t,t.hashid)},te.prototype.reindexShapesForBody=function(t){for(var e=t.shapeList;e;e=e.next)this.reindexShape(e)},te.prototype.useSpatialHash=function(t,e){throw new Error("Spatial Hash not implemented.")},te.prototype.activateBody=function(t){if(i(!t.isRogue(),"Internal error: Attempting to activate a rogue body."),this.locked)-1===this.rousedBodies.indexOf(t)&&this.rousedBodies.push(t);else{this.bodies.push(t);for(var e=0;e<t.shapeList.length;e++){var n=t.shapeList[e];this.staticShapes.remove(n,n.hashid),this.activeShapes.insert(n,n.hashid)}for(var r=t.arbiterList;r;r=r.next(t)){var s=r.body_a;if(t===s||s.isStatic()){var o=r.a,c=r.b;this.cachedArbiters[a(o.hashid,c.hashid)]=r,r.stamp=this.stamp,r.handler=this.lookupHandler(o.collision_type,c.collision_type),this.arbiters.push(r)}}for(var l=t.constraintList;l;l=l.nodeNext){var s=l.a;(t===s||s.isStatic())&&this.constraints.push(l)}}},te.prototype.deactivateBody=function(t){i(!t.isRogue(),"Internal error: Attempting to deactivate a rogue body."),c(this.bodies,t);for(var e=0;e<t.shapeList.length;e++){var n=t.shapeList[e];this.activeShapes.remove(n,n.hashid),this.staticShapes.insert(n,n.hashid)}for(var r=t.arbiterList;r;r=r.next(t)){var s=r.body_a;(t===s||s.isStatic())&&this.uncacheArbiter(r)}for(var o=t.constraintList;o;o=o.nodeNext){var s=o.a;(t===s||s.isStatic())&&c(this.constraints,o)}};var ne=function(t){return t?t.nodeRoot:null},ie=function(t){if(t&&t.isSleeping(t)){i(!t.isRogue(),"Internal Error: componentActivate() called on a rogue body.");for(var e=t.space,n=t;n;){var r=n.nodeNext;n.nodeIdleTime=0,n.nodeRoot=null,n.nodeNext=null,e.activateBody(n),n=r}c(e.sleepingComponents,t)}};rt.prototype.activate=function(){this.isRogue()||(this.nodeIdleTime=0,ie(ne(this)))},rt.prototype.activateStatic=function(t){i(this.isStatic(),"Body.activateStatic() called on a non-static body.");for(var e=this.arbiterList;e;e=e.next(this))t&&t!=e.a&&t!=e.b||(e.body_a==this?e.body_b:e.body_a).activate()},rt.prototype.pushArbiter=function(t){r(null===(t.body_a===this?t.thread_a_next:t.thread_b_next),"Internal Error: Dangling contact graph pointers detected. (A)"),r(null===(t.body_a===this?t.thread_a_prev:t.thread_b_prev),"Internal Error: Dangling contact graph pointers detected. (B)");var e=this.arbiterList;r(null===e||null===(e.body_a===this?e.thread_a_prev:e.thread_b_prev),"Internal Error: Dangling contact graph pointers detected. (C)"),t.body_a===this?t.thread_a_next=e:t.thread_b_next=e,e&&(e.body_a===this?e.thread_a_prev=t:e.thread_b_prev=t),this.arbiterList=t};var re=function(t,e){e.nodeRoot=t,e!==t&&(e.nodeNext=t.nodeNext,t.nodeNext=e)},se=function(t,e){if(!e.isRogue()){var n=ne(e);if(null==n){re(t,e);for(var i=e.arbiterList;i;i=i.next(e))se(t,e==i.body_a?i.body_b:i.body_a);for(var s=e.constraintList;s;s=s.next(e))se(t,e==s.a?s.b:s.a)}else r(n===t,"Internal Error: Inconsistency detected in the contact graph.")}},oe=function(t,e){for(var n=t;n;n=n.nodeNext)if(n.nodeIdleTime<e)return!0;return!1};te.prototype.processComponents=function(t){for(var e=this.sleepTimeThreshold!==1/0,n=this.bodies,i=0;i<n.length;i++){var s=n[i];r(null===s.nodeNext,"Internal Error: Dangling next pointer detected in contact graph."),r(null===s.nodeRoot,"Internal Error: Dangling root pointer detected in contact graph.")}if(e)for(var o=this.idleSpeedThreshold,a=o?o*o:P(this.gravity)*t*t,i=0;i<n.length;i++){var s=n[i],c=a?s.m*a:0;s.nodeIdleTime=s.kineticEnergy()>c?0:s.nodeIdleTime+t}for(var l=this.arbiters,i=0,h=l.length;h>i;i++){var u=l[i],p=u.body_a,d=u.body_b;e&&((d.isRogue()&&!d.isStatic()||p.isSleeping())&&p.activate(),(p.isRogue()&&!p.isStatic()||d.isSleeping())&&d.activate()),p.pushArbiter(u),d.pushArbiter(u)}if(e){for(var f=this.constraints,i=0;i<f.length;i++){var g=f[i],p=g.a,d=g.b;d.isRogue()&&!d.isStatic()&&p.activate(),p.isRogue()&&!p.isStatic()&&d.activate()}for(var i=0;i<n.length;){var s=n[i];if(null!==ne(s)||(se(s,s),oe(s,this.sleepTimeThreshold)))i++,s.nodeRoot=null,s.nodeNext=null;else{this.sleepingComponents.push(s);for(var m=s;m;m=m.nodeNext)this.deactivateBody(m)}}}},rt.prototype.sleep=function(){this.sleepWithGroup(null)},rt.prototype.sleepWithGroup=function(t){i(!this.isStatic()&&!this.isRogue(),"Rogue and static bodies cannot be put to sleep.");var e=this.space;if(i(e,"Cannot put a rogue body to sleep."),i(!e.locked,"Bodies cannot be put to sleep during a query or a call to cpSpaceStep(). Put these calls into a post-step callback."),i(null===t||t.isSleeping(),"Cannot use a non-sleeping body as a group identifier."),this.isSleeping())return void i(ne(this)===ne(t),"The body is already sleeping and it's group cannot be reassigned.");for(var n=0;n<this.shapeList.length;n++)this.shapeList[n].update(this.p,this.rot);if(e.deactivateBody(this),t){var r=ne(t);this.nodeRoot=r,this.nodeNext=r.nodeNext,this.nodeIdleTime=0,r.nodeNext=this}else this.nodeRoot=this,this.nodeNext=null,this.nodeIdleTime=0,e.sleepingComponents.push(this);c(e.bodies,this)},te.prototype.activateShapesTouchingShape=function(t){this.sleepTimeThreshold!==1/0&&this.shapeQuery(t,function(t,e){t.body.activate()})},te.prototype.pointQuery=function(t,e,n,i){var r=function(r){(!r.group||n!==r.group)&&e&r.layers&&r.pointQuery(t)&&i(r)},s=new X(t.x,t.y,t.x,t.y);this.lock(),this.activeShapes.query(s,r),this.staticShapes.query(s,r),this.unlock(!0)},te.prototype.pointQueryFirst=function(t,e,n){var i=null;return this.pointQuery(t,e,n,function(t){t.sensor||(i=t)}),i},te.prototype.nearestPointQuery=function(t,e,n,i,r){var s=function(s){if((!s.group||i!==s.group)&&n&s.layers){var o=s.nearestPointQuery(t);o.d<e&&r(s,o.d,o.p)}},o=G(t,e);this.lock(),this.activeShapes.query(o,s),this.staticShapes.query(o,s),this.unlock(!0)},te.prototype.nearestPointQueryNearest=function(t,e,n,i){var r,s=function(s){if((!s.group||i!==s.group)&&n&s.layers&&!s.sensor){var o=s.nearestPointQuery(t);o.d<e&&(!r||o.d<r.d)&&(r=o)}},o=G(t,e);return this.activeShapes.query(o,s),this.staticShapes.query(o,s),r},te.prototype.segmentQuery=function(t,e,n,i,r){var s=function(s){var o;return(!s.group||i!==s.group)&&n&s.layers&&(o=s.segmentQuery(t,e))&&r(s,o.t,o.n),1};this.lock(),this.staticShapes.segmentQuery(t,e,1,s),this.activeShapes.segmentQuery(t,e,1,s),this.unlock(!0)},te.prototype.segmentQueryFirst=function(t,e,n,i){var r=null,s=function(s){var o;return(!s.group||i!==s.group)&&n&s.layers&&!s.sensor&&(o=s.segmentQuery(t,e))&&(null===r||o.t<r.t)&&(r=o),r?r.t:1};return this.staticShapes.segmentQuery(t,e,1,s),this.activeShapes.segmentQuery(t,e,r?r.t:1,s),r},te.prototype.bbQuery=function(t,e,n,i){var r=function(r){(!r.group||n!==r.group)&&e&r.layers&&W(t,r.bb_l,r.bb_b,r.bb_r,r.bb_t)&&i(r)};this.lock(),this.activeShapes.query(t,r),this.staticShapes.query(t,r),this.unlock(!0)},te.prototype.shapeQuery=function(t,e){var n=t.body;n&&t.update(n.p,n.rot);var i=new X(t.bb_l,t.bb_b,t.bb_r,t.bb_t),r=!1,s=function(n){var i=t;if((!i.group||i.group!==n.group)&&i.layers&n.layers&&i!==n){var s;if(i.collisionCode<=n.collisionCode)s=Kt(i,n);else{s=Kt(n,i);for(var o=0;o<s.length;o++)s[o].n=T(s[o].n)}if(s.length&&(r=!(i.sensor||n.sensor),e)){for(var a=new Array(s.length),o=0;o<s.length;o++)a[o]=new Pt(s[o].p,s[o].n,s[o].dist);e(n,a)}}};return this.lock(),this.activeShapes.query(i,s),this.staticShapes.query(i,s),this.unlock(!0),r},te.prototype.addPostStepCallback=function(t){r(this.locked,"Adding a post-step callback when the space is not locked is unnecessary. Post-step callbacks will not called until the end of the next call to cpSpaceStep() or the next query."),this.postStepCallbacks.push(t)},te.prototype.runPostStepCallbacks=function(){for(var t=0;t<this.postStepCallbacks.length;t++)this.postStepCallbacks[t]();this.postStepCallbacks=[]},te.prototype.lock=function(){this.locked++},te.prototype.unlock=function(t){if(this.locked--,i(this.locked>=0,"Internal Error: Space lock underflow."),0===this.locked&&t){for(var e=this.rousedBodies,n=0;n<e.length;n++)this.activateBody(e[n]);e.length=0,this.runPostStepCallbacks()}},te.prototype.makeCollideShapes=function(){var t=this;return function(e,n){var i=t;if(e.bb_l<=n.bb_r&&n.bb_l<=e.bb_r&&e.bb_b<=n.bb_t&&n.bb_b<=e.bb_t&&e.body!==n.body&&(!e.group||e.group!==n.group)&&e.layers&n.layers){var r=i.lookupHandler(e.collision_type,n.collision_type),s=e.sensor||n.sensor;if(!s||r!==Zt){if(e.collisionCode>n.collisionCode){var o=e;e=n,n=o}var c=Kt(e,n);if(0!==c.length){var l=a(e.hashid,n.hashid),h=i.cachedArbiters[l];h||(h=i.cachedArbiters[l]=new Mt(e,n)),h.update(c,r,e,n),"first coll"!=h.state||r.begin(h,i)||h.ignore(),"ignore"!==h.state&&r.preSolve(h,i)&&!s?i.arbiters.push(h):(h.contacts=null,"ignore"!==h.state&&(h.state="normal")),h.stamp=i.stamp}}}}},te.prototype.arbiterSetFilter=function(t){var e=this.stamp-t.stamp,n=t.body_a,i=t.body_b;return(n.isStatic()||n.isSleeping())&&(i.isStatic()||i.isSleeping())?!0:(e>=1&&"cached"!=t.state&&(t.callSeparate(this),t.state="cached"),e>=this.collisionPersistence?(t.contacts=null,!1):!0)};var ae=function(t){var e=t.body;t.update(e.p,e.rot)};te.prototype.step=function(t){if(0!==t){i(0===y.x&&0===y.y,"vzero is invalid"),this.stamp++;var e=this.curr_dt;this.curr_dt=t;var n,r,s,o=this.bodies,a=this.constraints,c=this.arbiters;for(n=0;n<c.length;n++){var l=c[n];l.state="normal",l.body_a.isSleeping()||l.body_b.isSleeping()||l.unthread()}for(c.length=0,this.lock(),n=0;n<o.length;n++)o[n].position_func(t);this.activeShapes.each(ae),this.activeShapes.reindexQuery(this.collideShapes),this.unlock(!1),this.processComponents(t),this.lock();for(s in this.cachedArbiters)this.arbiterSetFilter(this.cachedArbiters[s])||delete this.cachedArbiters[s];var h=this.collisionSlop,u=1-Math.pow(this.collisionBias,t);for(n=0;n<c.length;n++)c[n].preStep(t,h,u);for(n=0;n<a.length;n++){var p=a[n];p.preSolve(this),p.preStep(t)}var d=Math.pow(this.damping,t),f=this.gravity;for(n=0;n<o.length;n++)o[n].velocity_func(f,d,t);var g=0===e?0:t/e;for(n=0;n<c.length;n++)c[n].applyCachedImpulse(g);for(n=0;n<a.length;n++)a[n].applyCachedImpulse(g);for(n=0;n<this.iterations;n++){for(r=0;r<c.length;r++)c[r].applyImpulse();for(r=0;r<a.length;r++)a[r].applyImpulse()}for(n=0;n<a.length;n++)a[n].postSolve(this);for(n=0;n<c.length;n++)c[n].handler.postSolve(c[n],this);this.unlock(!0)}};var ce=function(t,e,n,i){var r=t.vx+-n.y*t.w,s=t.vy+n.x*t.w,o=e.vx+-i.y*e.w,a=e.vy+i.x*e.w;return new v(o-r,a-s)},le=function(t,e,n,i,r){var s=t.vx+-n.y*t.w,o=t.vy+n.x*t.w,a=e.vx+-i.y*e.w,c=e.vy+i.x*e.w;return b(a-s,c-o,r.x,r.y)},he=function(t,e,n,i){t.vx+=e*t.m_inv,t.vy+=n*t.m_inv,t.w+=t.i_inv*(i.x*n-i.y*e)},ue=function(t,e,n,i,r,s){he(t,-r,-s,n),he(e,r,s,i)},pe=function(t,e,n,i){t.v_biasx+=e*t.m_inv,t.v_biasy+=n*t.m_inv,t.w_bias+=t.i_inv*A(i.x,i.y,e,n)},de=function(t,e,n){var i=C(e,n);return t.m_inv+t.i_inv*i*i},fe=function(t,e,n,i,s){var o=de(t,n,s)+de(e,i,s);return r(0!==o,"Unsolvable collision or constraint."),o},ge=function(t,e,n,i,s,o){var a,c,l,h,u=t.m_inv+e.m_inv;a=u,c=0,l=0,h=u;var p=t.i_inv,d=n.x*n.x*p,f=n.y*n.y*p,g=-n.x*n.y*p;a+=f,c+=g,l+=g,h+=d;var m=e.i_inv,v=i.x*i.x*m,y=i.y*i.y*m,_=-i.x*i.y*m;a+=y,c+=_,l+=_,h+=v;var b=a*h-c*l;r(0!==b,"Unsolvable constraint.");var x=1/b;s.x=h*x,s.y=-c*x,o.x=-l*x,o.y=a*x},me=function(t,e,n){return new v(_(t,e),_(t,n))},ve=function(t,e){return 1-Math.pow(t,e)},ye=cp.Constraint=function(t,e){this.a=t,this.b=e,this.space=null,this.next_a=null,this.next_b=null,this.maxForce=1/0,this.errorBias=Math.pow(.9,60),this.maxBias=1/0};ye.prototype.activateBodies=function(){this.a&&this.a.activate(),this.b&&this.b.activate()},ye.prototype.preStep=function(t){},ye.prototype.applyCachedImpulse=function(t){},ye.prototype.applyImpulse=function(){},ye.prototype.getImpulse=function(){return 0},ye.prototype.preSolve=function(t){},ye.prototype.postSolve=function(t){},ye.prototype.next=function(t){return this.a===t?this.next_a:this.next_b};var _e=cp.PinJoint=function(t,e,n,i){ye.call(this,t,e),this.anchr1=n,this.anchr2=i;var s=t?E(t.p,I(n,t.rot)):n,o=e?E(e.p,I(i,e.rot)):i;this.dist=x(S(o,s)),r(this.dist>0,"You created a 0 length pin joint. A pivot joint will be much more stable."),this.r1=this.r2=null,this.n=null,this.nMass=0,this.jnAcc=this.jnMax=0,this.bias=0};_e.prototype=Object.create(ye.prototype),_e.prototype.preStep=function(t){var e=this.a,n=this.b;this.r1=I(this.anchr1,e.rot),this.r2=I(this.anchr2,n.rot);var i=S(E(n.p,this.r2),E(e.p,this.r1)),r=x(i);this.n=L(i,1/(r?r:1/0)),this.nMass=1/fe(e,n,this.r1,this.r2,this.n);var s=this.maxBias;this.bias=g(-ve(this.errorBias,t)*(r-this.dist)/t,-s,s),this.jnMax=this.maxForce*t},_e.prototype.applyCachedImpulse=function(t){var e=L(this.n,this.jnAcc*t);ue(this.a,this.b,this.r1,this.r2,e.x,e.y)},_e.prototype.applyImpulse=function(){var t=this.a,e=this.b,n=this.n,i=le(t,e,this.r1,this.r2,n),r=(this.bias-i)*this.nMass,s=this.jnAcc;this.jnAcc=g(s+r,-this.jnMax,this.jnMax),r=this.jnAcc-s,ue(t,e,this.r1,this.r2,n.x*r,n.y*r)},_e.prototype.getImpulse=function(){return Math.abs(this.jnAcc)};var be=cp.SlideJoint=function(t,e,n,i,r,s){ye.call(this,t,e),this.anchr1=n,this.anchr2=i,this.min=r,this.max=s,this.r1=this.r2=this.n=null,this.nMass=0,this.jnAcc=this.jnMax=0,this.bias=0};be.prototype=Object.create(ye.prototype),be.prototype.preStep=function(t){var e=this.a,n=this.b;this.r1=I(this.anchr1,e.rot),this.r2=I(this.anchr2,n.rot);var i=S(E(n.p,this.r2),E(e.p,this.r1)),r=x(i),s=0;r>this.max?(s=r-this.max,this.n=O(i)):r<this.min?(s=this.min-r,this.n=T(O(i))):(this.n=y,this.jnAcc=0),this.nMass=1/fe(e,n,this.r1,this.r2,this.n);var o=this.maxBias;this.bias=g(-ve(this.errorBias,t)*s/t,-o,o),this.jnMax=this.maxForce*t},be.prototype.applyCachedImpulse=function(t){var e=this.jnAcc*t;ue(this.a,this.b,this.r1,this.r2,this.n.x*e,this.n.y*e)},be.prototype.applyImpulse=function(){if(0!==this.n.x||0!==this.n.y){var t=this.a,e=this.b,n=this.n,i=this.r1,r=this.r2,s=ce(t,e,i,r),o=_(s,n),a=(this.bias-o)*this.nMass,c=this.jnAcc;this.jnAcc=g(c+a,-this.jnMax,0),a=this.jnAcc-c,ue(t,e,this.r1,this.r2,n.x*a,n.y*a)}},be.prototype.getImpulse=function(){return Math.abs(this.jnAcc)};var xe=cp.PivotJoint=function(t,e,n,i){if(ye.call(this,t,e),"undefined"==typeof i){var r=n;n=t?t.world2Local(r):r,i=e?e.world2Local(r):r}this.anchr1=n,this.anchr2=i,this.r1=this.r2=y,this.k1=new v(0,0),this.k2=new v(0,0),this.jAcc=y,this.jMaxLen=0,this.bias=y};xe.prototype=Object.create(ye.prototype),xe.prototype.preStep=function(t){var e=this.a,n=this.b;this.r1=I(this.anchr1,e.rot),this.r2=I(this.anchr2,n.rot),ge(e,n,this.r1,this.r2,this.k1,this.k2),this.jMaxLen=this.maxForce*t;var i=S(E(n.p,this.r2),E(e.p,this.r1));this.bias=F(L(i,-ve(this.errorBias,t)/t),this.maxBias)},xe.prototype.applyCachedImpulse=function(t){ue(this.a,this.b,this.r1,this.r2,this.jAcc.x*t,this.jAcc.y*t)},xe.prototype.applyImpulse=function(){var t=this.a,e=this.b,n=this.r1,i=this.r2,r=ce(t,e,n,i),s=me(S(this.bias,r),this.k1,this.k2),o=this.jAcc;this.jAcc=F(E(this.jAcc,s),this.jMaxLen),ue(t,e,this.r1,this.r2,this.jAcc.x-o.x,this.jAcc.y-o.y)},xe.prototype.getImpulse=function(){return x(this.jAcc)};var we=cp.GrooveJoint=function(t,e,n,i,r){ye.call(this,t,e),this.grv_a=n,this.grv_b=i,this.grv_n=j(N(S(i,n))),this.anchr2=r,this.grv_tn=null,this.clamp=0,this.r1=this.r2=null,this.k1=new v(0,0),this.k2=new v(0,0),this.jAcc=y,this.jMaxLen=0,this.bias=null};we.prototype=Object.create(ye.prototype),we.prototype.preStep=function(t){var e=this.a,n=this.b,i=e.local2World(this.grv_a),r=e.local2World(this.grv_b),s=I(this.grv_n,e.rot),o=_(i,s);this.grv_tn=s,this.r2=I(this.anchr2,n.rot);var a=C(E(n.p,this.r2),s);a<=C(i,s)?(this.clamp=1,this.r1=S(i,e.p)):a>=C(r,s)?(this.clamp=-1,this.r1=S(r,e.p)):(this.clamp=0,this.r1=S(E(L(j(s),-a),L(s,o)),e.p)),ge(e,n,this.r1,this.r2,this.k1,this.k2),this.jMaxLen=this.maxForce*t;var c=S(E(n.p,this.r2),E(e.p,this.r1));this.bias=F(L(c,-ve(this.errorBias,t)/t),this.maxBias)},we.prototype.applyCachedImpulse=function(t){ue(this.a,this.b,this.r1,this.r2,this.jAcc.x*t,this.jAcc.y*t)},we.prototype.grooveConstrain=function(t){var e=this.grv_tn,n=this.clamp*C(t,e)>0?t:k(t,e);return F(n,this.jMaxLen)},we.prototype.applyImpulse=function(){var t=this.a,e=this.b,n=this.r1,i=this.r2,r=ce(t,e,n,i),s=me(S(this.bias,r),this.k1,this.k2),o=this.jAcc;this.jAcc=this.grooveConstrain(E(o,s)),ue(t,e,this.r1,this.r2,this.jAcc.x-o.x,this.jAcc.y-o.y)},we.prototype.getImpulse=function(){return x(this.jAcc)},we.prototype.setGrooveA=function(t){this.grv_a=t,this.grv_n=j(N(S(this.grv_b,t))),this.activateBodies()},we.prototype.setGrooveB=function(t){this.grv_b=t,this.grv_n=j(N(S(t,this.grv_a))),
this.activateBodies()};var Ee=function(t,e){return(t.restLength-e)*t.stiffness},Se=cp.DampedSpring=function(t,e,n,i,r,s,o){ye.call(this,t,e),this.anchr1=n,this.anchr2=i,this.restLength=r,this.stiffness=s,this.damping=o,this.springForceFunc=Ee,this.target_vrn=this.v_coef=0,this.r1=this.r2=null,this.nMass=0,this.n=null};Se.prototype=Object.create(ye.prototype),Se.prototype.preStep=function(t){var e=this.a,n=this.b;this.r1=I(this.anchr1,e.rot),this.r2=I(this.anchr2,n.rot);var i=S(E(n.p,this.r2),E(e.p,this.r1)),s=x(i);this.n=L(i,1/(s?s:1/0));var o=fe(e,n,this.r1,this.r2,this.n);r(0!==o,"Unsolvable this."),this.nMass=1/o,this.target_vrn=0,this.v_coef=1-Math.exp(-this.damping*t*o);var a=this.springForceFunc(this,s);ue(e,n,this.r1,this.r2,this.n.x*a*t,this.n.y*a*t)},Se.prototype.applyCachedImpulse=function(t){},Se.prototype.applyImpulse=function(){var t=this.a,e=this.b,n=this.n,i=this.r1,r=this.r2,s=le(t,e,i,r,n),o=(this.target_vrn-s)*this.v_coef;this.target_vrn=s+o,o*=this.nMass,ue(t,e,this.r1,this.r2,this.n.x*o,this.n.y*o)},Se.prototype.getImpulse=function(){return 0};var Te=function(t,e){return(e-t.restAngle)*t.stiffness},Le=cp.DampedRotarySpring=function(t,e,n,i,r){ye.call(this,t,e),this.restAngle=n,this.stiffness=i,this.damping=r,this.springTorqueFunc=Te,this.target_wrn=0,this.w_coef=0,this.iSum=0};Le.prototype=Object.create(ye.prototype),Le.prototype.preStep=function(t){var e=this.a,n=this.b,i=e.i_inv+n.i_inv;r(0!==i,"Unsolvable spring."),this.iSum=1/i,this.w_coef=1-Math.exp(-this.damping*t*i),this.target_wrn=0;var s=this.springTorqueFunc(this,e.a-n.a)*t;e.w-=s*e.i_inv,n.w+=s*n.i_inv},Le.prototype.applyImpulse=function(){var t=this.a,e=this.b,n=t.w-e.w,i=(this.target_wrn-n)*this.w_coef;this.target_wrn=n+i;var r=i*this.iSum;t.w+=r*t.i_inv,e.w-=r*e.i_inv};var Ce=cp.RotaryLimitJoint=function(t,e,n,i){ye.call(this,t,e),this.min=n,this.max=i,this.jAcc=0,this.iSum=this.bias=this.jMax=0};Ce.prototype=Object.create(ye.prototype),Ce.prototype.preStep=function(t){var e=this.a,n=this.b,i=n.a-e.a,r=0;i>this.max?r=this.max-i:i<this.min&&(r=this.min-i),this.iSum=1/(1/e.i+1/n.i);var s=this.maxBias;this.bias=g(-ve(this.errorBias,t)*r/t,-s,s),this.jMax=this.maxForce*t,this.bias||(this.jAcc=0)},Ce.prototype.applyCachedImpulse=function(t){var e=this.a,n=this.b,i=this.jAcc*t;e.w-=i*e.i_inv,n.w+=i*n.i_inv},Ce.prototype.applyImpulse=function(){if(this.bias){var t=this.a,e=this.b,n=e.w-t.w,i=-(this.bias+n)*this.iSum,r=this.jAcc;this.bias<0?this.jAcc=g(r+i,0,this.jMax):this.jAcc=g(r+i,-this.jMax,0),i=this.jAcc-r,t.w-=i*t.i_inv,e.w+=i*e.i_inv}},Ce.prototype.getImpulse=function(){return Math.abs(joint.jAcc)};var Ae=cp.RatchetJoint=function(t,e,n,i){ye.call(this,t,e),this.angle=0,this.phase=n,this.ratchet=i,this.angle=(e?e.a:0)-(t?t.a:0),this.iSum=this.bias=this.jAcc=this.jMax=0};Ae.prototype=Object.create(ye.prototype),Ae.prototype.preStep=function(t){var e=this.a,n=this.b,i=this.angle,r=this.phase,s=this.ratchet,o=n.a-e.a,a=i-o,c=0;a*s>0?c=a:this.angle=Math.floor((o-r)/s)*s+r,this.iSum=1/(e.i_inv+n.i_inv);var l=this.maxBias;this.bias=g(-ve(this.errorBias,t)*c/t,-l,l),this.jMax=this.maxForce*t,this.bias||(this.jAcc=0)},Ae.prototype.applyCachedImpulse=function(t){var e=this.a,n=this.b,i=this.jAcc*t;e.w-=i*e.i_inv,n.w+=i*n.i_inv},Ae.prototype.applyImpulse=function(){if(this.bias){var t=this.a,e=this.b,n=e.w-t.w,i=this.ratchet,r=-(this.bias+n)*this.iSum,s=this.jAcc;this.jAcc=g((s+r)*i,0,this.jMax*Math.abs(i))/i,r=this.jAcc-s,t.w-=r*t.i_inv,e.w+=r*e.i_inv}},Ae.prototype.getImpulse=function(t){return Math.abs(t.jAcc)};var je=cp.GearJoint=function(t,e,n,i){ye.call(this,t,e),this.phase=n,this.ratio=i,this.ratio_inv=1/i,this.jAcc=0,this.iSum=this.bias=this.jMax=0};je.prototype=Object.create(ye.prototype),je.prototype.preStep=function(t){var e=this.a,n=this.b;this.iSum=1/(e.i_inv*this.ratio_inv+this.ratio*n.i_inv);var i=this.maxBias;this.bias=g(-ve(this.errorBias,t)*(n.a*this.ratio-e.a-this.phase)/t,-i,i),this.jMax=this.maxForce*t},je.prototype.applyCachedImpulse=function(t){var e=this.a,n=this.b,i=this.jAcc*t;e.w-=i*e.i_inv*this.ratio_inv,n.w+=i*n.i_inv},je.prototype.applyImpulse=function(){var t=this.a,e=this.b,n=e.w*this.ratio-t.w,i=(this.bias-n)*this.iSum,r=this.jAcc;this.jAcc=g(r+i,-this.jMax,this.jMax),i=this.jAcc-r,t.w-=i*t.i_inv*this.ratio_inv,e.w+=i*e.i_inv},je.prototype.getImpulse=function(){return Math.abs(this.jAcc)},je.prototype.setRatio=function(t){this.ratio=t,this.ratio_inv=1/t,this.activateBodies()};var ke=cp.SimpleMotor=function(t,e,n){ye.call(this,t,e),this.rate=n,this.jAcc=0,this.iSum=this.jMax=0};ke.prototype=Object.create(ye.prototype),ke.prototype.preStep=function(t){this.iSum=1/(this.a.i_inv+this.b.i_inv),this.jMax=this.maxForce*t},ke.prototype.applyCachedImpulse=function(t){var e=this.a,n=this.b,i=this.jAcc*t;e.w-=i*e.i_inv,n.w+=i*n.i_inv},ke.prototype.applyImpulse=function(){var t=this.a,e=this.b,n=e.w-t.w+this.rate,i=-n*this.iSum,r=this.jAcc;this.jAcc=g(r+i,-this.jMax,this.jMax),i=this.jAcc-r,t.w-=i*t.i_inv,e.w+=i*e.i_inv},ke.prototype.getImpulse=function(){return Math.abs(this.jAcc)}}(),t.cp=cp}.apply(t,arguments)})}(this),define("ChipmunkCharacterHandling",["require","Grounding","lib/chipmunk","lib/sound"],function(t){var e=t("Grounding"),n=t("lib/chipmunk"),i=t("lib/sound"),r=.3,s=7;return{velocityFunctionFor:function(t,o,a){function c(){return g.isGrounded()}function l(){c()&&!d&&(t.vy>600&&(t.p.y+=g.getPenetration(),t.vy=0),t.applyForce(n.v(0,1e5),n.v(0,0))),d=c()}function h(){a.jump&&!f&&g.isGrounded()?(i.Sound.play("jump"),t.vy=-s*t.m,t.resetForces(),o.surface_v=n.v(0,0)):a.jump&&!f&&console.log("No jump - "+g.timeSinceGrounding),f=a.jump}function u(){o.u=10,o.surface_v=n.v(0,0),a.left?o.surface_v=n.v(-300,0):a.right&&(o.surface_v=n.v(300,0))}function p(e){o.u=0,a.left?t.vx=n.lerpconst(t.vx,-300,2e3*e):a.right&&(t.vx=n.lerpconst(t.vx,300,2e3*e))}var d=!1,f=!1,g=new e({body:t}),m=t.velocity_func.bind(t);return function(e,i,s){if(g.update(s),l(),c()&&a.dodge)return t.vx>0?t.vx=1e3:t.vx=-1e3,void m(e,i,s);if(h(),g.headTrauma&&t.vy<0)m(e,0,s);else{var d=e;a.jump&&g.timeSinceGrounding<r&&(d=n.vzero),m(d,i,s)}c()?u():p(s),t.grounded=g.isGrounded(),t.vy=n.clamp(t.vy,-(1/0),1e3),a._remainingStall>0&&(o.surface_v.x=n.clamp(o.surface_v.x,-100,100))}}}}),define("ActorKeyboardController",[],function(){var t=function(t){this._controller=t};return t.prototype.handleKeyDown=function(t){switch(t.keyCode){case 65:this._controller.left=!0;break;case 87:this._controller.jump=!0;break;case 68:this._controller.right=!0;break;case 83:this._controller.down=!0;break;case 32:this._controller.dodge=!0}},t.prototype.handleKeyUp=function(t){switch(t.keyCode){case 65:this._controller.left=!1;break;case 87:this._controller.jump=!1;break;case 68:this._controller.right=!1;break;case 83:this._controller.down=!1}},t.prototype.handleMouseMove=function(t){this._controller.aim={x:t.x,y:t.y}},t.prototype.handleMouseDown=function(t){0===t.button?this._controller.firePrimary=!0:2===t.button&&(this._controller.parry=!0)},t.prototype.handleMouseUp=function(t){0===t.button?this._controller.firePrimary=!1:2===t.button&&(this._controller.parry=!1)},t}),define("res/Vrenna",["require","exports","module","lib/easel"],function(t,e,n){var i=t("lib/easel"),r=new i.SpriteSheet({framerate:11,images:["data/blob/blob.png"],frames:[[61,110,37,47,0,20,47],[106,110,37,43,0,20,47],[151,110,37,44,0,20,47],[192,110,46,40,0,20,47],[246,110,63,37,0,20,47]],animations:{idle:{frames:[0],next:"idle",speed:1},run:{frames:[0,1,2,3],next:"run",speed:1}}});return r}),function(t,e){"function"==typeof define&&define.amd?define("lib/log4javascript",t):"undefined"!=typeof module&&"object"==typeof exports?module.exports=t():e.log4javascript=t()}(function(){function isUndefined(t){return"undefined"==typeof t}function EventSupport(){}function Log4JavaScript(){}function toStr(t){return t&&t.toString?t.toString():String(t)}function getExceptionMessage(t){return t.message?t.message:t.description?t.description:toStr(t)}function getUrlFileName(t){var e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return t.substr(e+1)}function getExceptionStringRep(t){if(t){var e="Exception: "+getExceptionMessage(t);try{t.lineNumber&&(e+=" on line number "+t.lineNumber),t.fileName&&(e+=" in file "+getUrlFileName(t.fileName))}catch(n){logLog.warn("Unable to obtain file and line information for error")}return showStackTraces&&t.stack&&(e+=newLine+"Stack trace:"+newLine+t.stack),e}return null}function bool(t){return Boolean(t)}function trim(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}function splitIntoLines(t){var e=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.split("\n")}function array_remove(t,e){for(var n=-1,i=0,r=t.length;r>i;i++)if(t[i]===e){n=i;break}return n>=0?(t.splice(n,1),!0):!1}function array_contains(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]==e)return!0;return!1}function extractBooleanFromParam(t,e){return isUndefined(t)?e:bool(t)}function extractStringFromParam(t,e){return isUndefined(t)?e:String(t)}function extractIntFromParam(t,e){if(isUndefined(t))return e;try{var n=parseInt(t,10);return isNaN(n)?e:n}catch(i){return logLog.warn("Invalid int param "+t,i),e}}function extractFunctionFromParam(t,e){return"function"==typeof t?t:e}function isError(t){return t instanceof Error}function handleError(t,e){logLog.error(t,e),log4javascript.dispatchEvent("error",{message:t,exception:e})}function Timer(t,e){this.name=t,this.level=isUndefined(e)?Level.INFO:e,this.start=new Date}function Logger(t){this.name=t,this.parent=null,this.children=[];var e=[],n=null,i=this.name===rootLoggerName,r=this.name===nullLoggerName,s=null,o=!1;this.addChild=function(t){this.children.push(t),t.parent=this,t.invalidateAppenderCache()};var a=!0;this.getAdditivity=function(){return a},this.setAdditivity=function(t){var e=a!=t;a=t,e&&this.invalidateAppenderCache()},this.addAppender=function(t){r?handleError("Logger.addAppender: you may not add an appender to the null logger"):t instanceof log4javascript.Appender?array_contains(e,t)||(e.push(t),t.setAddedToLogger(this),this.invalidateAppenderCache()):handleError("Logger.addAppender: appender supplied ('"+toStr(t)+"') is not a subclass of Appender")},this.removeAppender=function(t){array_remove(e,t),t.setRemovedFromLogger(this),this.invalidateAppenderCache()},this.removeAllAppenders=function(){var t=e.length;if(t>0){for(var n=0;t>n;n++)e[n].setRemovedFromLogger(this);e.length=0,this.invalidateAppenderCache()}},this.getEffectiveAppenders=function(){if(null===s||o){var t=i||!this.getAdditivity()?[]:this.parent.getEffectiveAppenders();s=t.concat(e),o=!1}return s},this.invalidateAppenderCache=function(){o=!0;for(var t=0,e=this.children.length;e>t;t++)this.children[t].invalidateAppenderCache()},this.log=function(t,e){if(enabled&&t.isGreaterOrEqual(this.getEffectiveLevel())){var n,i=e.length-1,r=e[i];e.length>1&&isError(r)&&(n=r,i--);for(var s=[],o=0;i>=o;o++)s[o]=e[o];var a=new LoggingEvent(this,new Date,t,s,n);this.callAppenders(a)}},this.callAppenders=function(t){for(var e=this.getEffectiveAppenders(),n=0,i=e.length;i>n;n++)e[n].doAppend(t)},this.setLevel=function(t){i&&null===t?handleError("Logger.setLevel: you cannot set the level of the root logger to null"):t instanceof Level?n=t:handleError("Logger.setLevel: level supplied to logger "+this.name+" is not an instance of log4javascript.Level")},this.getLevel=function(){return n},this.getEffectiveLevel=function(){for(var t=this;null!==t;t=t.parent){var e=t.getLevel();if(null!==e)return e}},this.group=function(t,e){if(enabled)for(var n=this.getEffectiveAppenders(),i=0,r=n.length;r>i;i++)n[i].group(t,e)},this.groupEnd=function(){if(enabled)for(var t=this.getEffectiveAppenders(),e=0,n=t.length;n>e;e++)t[e].groupEnd()};var c={};this.time=function(t,e){enabled&&(isUndefined(t)?handleError("Logger.time: a name for the timer must be supplied"):!e||e instanceof Level?c[t]=new Timer(t,e):handleError("Logger.time: level supplied to timer "+t+" is not an instance of log4javascript.Level"))},this.timeEnd=function(t){if(enabled)if(isUndefined(t))handleError("Logger.timeEnd: a name for the timer must be supplied");else if(c[t]){var e=c[t],n=e.getElapsedTime();this.log(e.level,["Timer "+toStr(t)+" completed in "+n+"ms"]),delete c[t]}else logLog.warn("Logger.timeEnd: no timer found with name "+t)},this.assert=function(t){if(enabled&&!t){for(var e=[],n=1,i=arguments.length;i>n;n++)e.push(arguments[n]);e=e.length>0?e:["Assertion Failure"],e.push(newLine),e.push(t),this.log(Level.ERROR,e)}},this.toString=function(){return"Logger["+this.name+"]"}}function SimpleLayout(){this.customFields=[]}function NullLayout(){this.customFields=[]}function XmlLayout(t){this.combineMessages=extractBooleanFromParam(t,!0),this.customFields=[]}function escapeNewLines(t){return t.replace(/\r\n|\r|\n/g,"\\r\\n")}function JsonLayout(t,e){this.readable=extractBooleanFromParam(t,!1),this.combineMessages=extractBooleanFromParam(e,!0),this.batchHeader=this.readable?"["+newLine:"[",this.batchFooter=this.readable?"]"+newLine:"]",this.batchSeparator=this.readable?","+newLine:",",this.setKeys(),this.colon=this.readable?": ":":",this.tab=this.readable?"	":"",this.lineBreak=this.readable?newLine:"",this.customFields=[]}function HttpPostDataLayout(){this.setKeys(),this.customFields=[],this.returnsPostData=!0}function formatObjectExpansion(t,e,n){function i(t,e,n){function s(t){for(var e=splitIntoLines(t),i=1,r=e.length;r>i;i++)e[i]=n+e[i];return e.join(newLine)}var o,a,c,l,h,u,p;if(n||(n=""),null===t)return"null";if("undefined"==typeof t)return"undefined";if("string"==typeof t)return s(t);if("object"==typeof t&&array_contains(r,t)){try{u=toStr(t)}catch(d){u="Error formatting property. Details: "+getExceptionStringRep(d)}return u+" [already expanded]"}if(t instanceof Array&&e>0){for(r.push(t),u="["+newLine,c=e-1,l=n+"  ",h=[],o=0,a=t.length;a>o;o++)try{p=i(t[o],c,l),h.push(l+p)}catch(d){h.push(l+"Error formatting array member. Details: "+getExceptionStringRep(d))}return u+=h.join(","+newLine)+newLine+n+"]"}if("[object Date]"==Object.prototype.toString.call(t))return t.toString();if("object"==typeof t&&e>0){r.push(t),u="{"+newLine,c=e-1,l=n+"  ",h=[];for(o in t)try{p=i(t[o],c,l),h.push(l+o+": "+p)}catch(d){h.push(l+o+": Error formatting property. Details: "+getExceptionStringRep(d))}return u+=h.join(","+newLine)+newLine+n+"}"}return s(toStr(t))}var r=[];return i(t,e,n)}function PatternLayout(t){t?this.pattern=t:this.pattern=PatternLayout.DEFAULT_CONVERSION_PATTERN,this.customFields=[]}function AlertAppender(){}function BrowserConsoleAppender(){}function isHttpRequestSuccessful(t){return isUndefined(t.status)||0===t.status||t.status>=200&&t.status<300||1223==t.status}function AjaxAppender(t,e){function n(t){return L?(handleError("AjaxAppender: configuration option '"+t+"' may not be set after the appender has been initialized"),!1):!0}function i(){if(u&&enabled){T=!0;var t;if(d)E.length>0?(t=E.shift(),c(s(t),i)):(T=!1,p&&o());else{for(;t=E.shift();)c(s(t));T=!1,p&&o()}}}function r(){var t=!1;if(u&&enabled){for(var e,n=h.getLayout().allowBatching()?f:1,r=[];e=w.shift();)r.push(e),w.length>=n&&(E.push(r),r=[]);r.length>0&&E.push(r),t=E.length>0,d=!1,p=!1,i()}return t}function s(t){for(var e,n=[],i="";e=t.shift();)n.push(h.getLayout().formatWithException(e));return i=1==t.length?n.join(""):h.getLayout().batchHeader+n.join(h.getLayout().batchSeparator)+h.getLayout().batchFooter,b==h.defaults.contentType&&(i=h.getLayout().returnsPostData?i:urlEncode(y)+"="+urlEncode(i),i.length>0&&(i+="&"),i+="layout="+urlEncode(h.getLayout().toString())),i}function o(){window.setTimeout(i,g)}function a(){var t="AjaxAppender: could not create XMLHttpRequest object. AjaxAppender disabled";handleError(t),u=!1,v&&v(t)}function c(n,i){try{var r=getXmlHttp(a);if(u){e&&withCredentialsSupported&&(r.withCredentials=!0),r.onreadystatechange=function(){if(4==r.readyState){if(isHttpRequestSuccessful(r))m&&m(r),i&&i(r);else{var e="AjaxAppender.append: XMLHttpRequest request to URL "+t+" returned status code "+r.status;handleError(e),v&&v(e)}r.onreadystatechange=emptyFunction,r=null}},r.open("POST",t,!0);try{for(var s,o=0;s=S[o++];)r.setRequestHeader(s.name,s.value);r.setRequestHeader("Content-Type",b)}catch(c){var l="AjaxAppender.append: your browser's XMLHttpRequest implementation does not support setRequestHeader, therefore cannot post data. AjaxAppender disabled";return handleError(l),u=!1,void(v&&v(l))}r.send(n)}}catch(h){var p="AjaxAppender.append: error sending log message to "+t;handleError(p,h),u=!1,v&&v(p+". Details: "+getExceptionStringRep(h))}}function l(){if(L=!0,_){var t=window.onbeforeunload;window.onbeforeunload=function(){return t&&t(),r()?"Sending log messages":void 0}}p&&o()}var h=this,u=!0;t||(handleError("AjaxAppender: URL must be specified in constructor"),u=!1);var p=this.defaults.timed,d=this.defaults.waitForResponse,f=this.defaults.batchSize,g=this.defaults.timerInterval,m=this.defaults.requestSuccessCallback,v=this.defaults.failCallback,y=this.defaults.postVarName,_=this.defaults.sendAllOnUnload,b=this.defaults.contentType,x=null,w=[],E=[],S=[],T=!1,L=!1;this.getSessionId=function(){return x},this.setSessionId=function(t){x=extractStringFromParam(t,null),this.layout.setCustomField("sessionid",x)},this.setLayout=function(t){n("layout")&&(this.layout=t,null!==x&&this.setSessionId(x))},this.isTimed=function(){return p},this.setTimed=function(t){n("timed")&&(p=bool(t))},this.getTimerInterval=function(){return g},this.setTimerInterval=function(t){n("timerInterval")&&(g=extractIntFromParam(t,g))},this.isWaitForResponse=function(){return d},this.setWaitForResponse=function(t){n("waitForResponse")&&(d=bool(t))},this.getBatchSize=function(){return f},this.setBatchSize=function(t){n("batchSize")&&(f=extractIntFromParam(t,f))},this.isSendAllOnUnload=function(){return _},this.setSendAllOnUnload=function(t){n("sendAllOnUnload")&&(_=extractBooleanFromParam(t,_))},this.setRequestSuccessCallback=function(t){m=extractFunctionFromParam(t,m)},this.setFailCallback=function(t){v=extractFunctionFromParam(t,v)},this.getPostVarName=function(){return y},this.setPostVarName=function(t){n("postVarName")&&(y=extractStringFromParam(t,y))},this.getHeaders=function(){return S},this.addHeader=function(t,e){"content-type"==t.toLowerCase()?b=e:S.push({name:t,value:e})},this.sendAll=i,this.sendAllRemaining=r,this.append=function(t){if(u){L||l(),w.push(t);var e=this.getLayout().allowBatching()?f:1;if(w.length>=e){for(var n,r=[];n=w.shift();)r.push(n);E.push(r),p||d&&(!d||T)||i()}}}}function setCookie(t,e,n,i){var r;if(i=i?"; path="+i:"",n){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),r="; expires="+s.toGMTString()}else r="";document.cookie=escape(t)+"="+escape(e)+r+i}function getCookie(t){for(var e=escape(t)+"=",n=document.cookie.split(";"),i=0,r=n.length;r>i;i++){for(var s=n[i];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(e))return unescape(s.substring(e.length,s.length))}return null}function getBaseUrl(){for(var t=document.getElementsByTagName("script"),e=0,n=t.length;n>e;++e)if(-1!=t[e].src.indexOf("log4javascript")){var i=t[e].src.lastIndexOf("/");return-1==i?"":t[e].src.substr(0,i+1)}return null}function isLoaded(t){try{return bool(t.loaded)}catch(e){return!1}}function padWithSpaces(t,e){if(t.length<e){for(var n=[],i=Math.max(0,e-t.length),r=0;i>r;r++)n[r]=" ";t+=n.join("")}return t}function createDefaultLogger(){var t=log4javascript.getLogger(defaultLoggerName),e=new log4javascript.PopUpAppender;return t.addAppender(e),t}Array.prototype.push||(Array.prototype.push=function(){for(var t=0,e=arguments.length;e>t;t++)this[this.length]=arguments[t];return this.length}),Array.prototype.shift||(Array.prototype.shift=function(){if(this.length>0){for(var t=this[0],e=0,n=this.length-1;n>e;e++)this[e]=this[e+1];return this.length=this.length-1,t}}),Array.prototype.splice||(Array.prototype.splice=function(t,e){var n=this.slice(t+e),i=this.slice(t,t+e);this.length=t;for(var r=[],s=0,o=arguments.length;o>s;s++)r[s]=arguments[s];var a=r.length>2?n=r.slice(2).concat(n):n;for(s=0,o=a.length;o>s;s++)this.push(a[s]);return i}),EventSupport.prototype={eventTypes:[],eventListeners:{},setEventTypes:function(t){if(t instanceof Array){this.eventTypes=t,this.eventListeners={};for(var e=0,n=this.eventTypes.length;n>e;e++)this.eventListeners[this.eventTypes[e]]=[]}else handleError("log4javascript.EventSupport ["+this+"]: setEventTypes: eventTypes parameter must be an Array")},addEventListener:function(t,e){"function"==typeof e?(array_contains(this.eventTypes,t)||handleError("log4javascript.EventSupport ["+this+"]: addEventListener: no event called '"+t+"'"),this.eventListeners[t].push(e)):handleError("log4javascript.EventSupport ["+this+"]: addEventListener: listener must be a function")},removeEventListener:function(t,e){"function"==typeof e?(array_contains(this.eventTypes,t)||handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: no event called '"+t+"'"),array_remove(this.eventListeners[t],e)):handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: listener must be a function")},dispatchEvent:function(t,e){if(array_contains(this.eventTypes,t))for(var n=this.eventListeners[t],i=0,r=n.length;r>i;i++)n[i](this,t,e);else handleError("log4javascript.EventSupport ["+this+"]: dispatchEvent: no event called '"+t+"'")}};var applicationStartDate=new Date,uniqueId="log4javascript_"+applicationStartDate.getTime()+"_"+Math.floor(1e8*Math.random()),emptyFunction=function(){},newLine="\r\n",pageLoaded=!1;Log4JavaScript.prototype=new EventSupport;var log4javascript=new Log4JavaScript;log4javascript.version="1.4.10",log4javascript.edition="log4javascript";var urlEncode="undefined"!=typeof window.encodeURIComponent?function(t){return encodeURIComponent(t)}:function(t){return escape(t).replace(/\+/g,"%2B").replace(/"/g,"%22").replace(/'/g,"%27").replace(/\//g,"%2F").replace(/=/g,"%3D")};Function.prototype.apply||(Function.prototype.apply=function(obj,args){var methodName="__apply__";"undefined"!=typeof obj[methodName]&&(methodName+=String(Math.random()).substr(2)),obj[methodName]=this;for(var argsStrings=[],i=0,len=args.length;len>i;i++)argsStrings[i]="args["+i+"]";var script="obj."+methodName+"("+argsStrings.join(",")+")",returnValue=eval(script);return delete obj[methodName],returnValue}),Function.prototype.call||(Function.prototype.call=function(t){for(var e=[],n=1,i=arguments.length;i>n;n++)e[n-1]=arguments[n];return this.apply(t,e)});var logLog={quietMode:!1,debugMessages:[],setQuietMode:function(t){this.quietMode=bool(t)},numberOfErrors:0,alertAllErrors:!1,setAlertAllErrors:function(t){this.alertAllErrors=t},debug:function(t){this.debugMessages.push(t)},displayDebug:function(){alert(this.debugMessages.join(newLine))},warn:function(t,e){},error:function(t,e){if((1==++this.numberOfErrors||this.alertAllErrors)&&!this.quietMode){var n="log4javascript error: "+t;e&&(n+=newLine+newLine+"Original error: "+getExceptionStringRep(e)),alert(n)}}};log4javascript.logLog=logLog,log4javascript.setEventTypes(["load","error"]),log4javascript.handleError=handleError;var enabled=!("undefined"!=typeof log4javascript_disabled&&log4javascript_disabled);log4javascript.setEnabled=function(t){enabled=bool(t)},log4javascript.isEnabled=function(){return enabled};var useTimeStampsInMilliseconds=!0;log4javascript.setTimeStampsInMilliseconds=function(t){useTimeStampsInMilliseconds=bool(t)},log4javascript.isTimeStampsInMilliseconds=function(){return useTimeStampsInMilliseconds},log4javascript.evalInScope=function(expr){return eval(expr)};var showStackTraces=!1;log4javascript.setShowStackTraces=function(t){showStackTraces=bool(t)};var Level=function(t,e){this.level=t,this.name=e};Level.prototype={toString:function(){return this.name},equals:function(t){return this.level==t.level},isGreaterOrEqual:function(t){return this.level>=t.level}},Level.ALL=new Level(Number.MIN_VALUE,"ALL"),Level.TRACE=new Level(1e4,"TRACE"),Level.DEBUG=new Level(2e4,"DEBUG"),Level.INFO=new Level(3e4,"INFO"),Level.WARN=new Level(4e4,"WARN"),Level.ERROR=new Level(5e4,"ERROR"),Level.FATAL=new Level(6e4,"FATAL"),Level.OFF=new Level(Number.MAX_VALUE,"OFF"),log4javascript.Level=Level,Timer.prototype.getElapsedTime=function(){return(new Date).getTime()-this.start.getTime()};var anonymousLoggerName="[anonymous]",defaultLoggerName="[default]",nullLoggerName="[null]",rootLoggerName="root";Logger.prototype={trace:function(){this.log(Level.TRACE,arguments)},debug:function(){this.log(Level.DEBUG,arguments)},info:function(){this.log(Level.INFO,arguments)},warn:function(){this.log(Level.WARN,arguments)},error:function(){this.log(Level.ERROR,arguments)},fatal:function(){this.log(Level.FATAL,arguments)},isEnabledFor:function(t){return t.isGreaterOrEqual(this.getEffectiveLevel())},isTraceEnabled:function(){return this.isEnabledFor(Level.TRACE)},isDebugEnabled:function(){return this.isEnabledFor(Level.DEBUG)},isInfoEnabled:function(){return this.isEnabledFor(Level.INFO)},isWarnEnabled:function(){return this.isEnabledFor(Level.WARN)},isErrorEnabled:function(){return this.isEnabledFor(Level.ERROR)},isFatalEnabled:function(){return this.isEnabledFor(Level.FATAL)}},Logger.prototype.trace.isEntryPoint=!0,Logger.prototype.debug.isEntryPoint=!0,Logger.prototype.info.isEntryPoint=!0,Logger.prototype.warn.isEntryPoint=!0,Logger.prototype.error.isEntryPoint=!0,Logger.prototype.fatal.isEntryPoint=!0;var loggers={},loggerNames=[],ROOT_LOGGER_DEFAULT_LEVEL=Level.DEBUG,rootLogger=new Logger(rootLoggerName);rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL),log4javascript.getRootLogger=function(){return rootLogger},log4javascript.getLogger=function(t){if("string"!=typeof t&&(t=anonymousLoggerName,logLog.warn("log4javascript.getLogger: non-string logger name "+toStr(t)+" supplied, returning anonymous logger")),t==rootLoggerName&&handleError("log4javascript.getLogger: root logger may not be obtained by name"),!loggers[t]){var e=new Logger(t);loggers[t]=e,loggerNames.push(t);var n,i=t.lastIndexOf(".");if(i>-1){var r=t.substring(0,i);n=log4javascript.getLogger(r)}else n=rootLogger;n.addChild(e)}return loggers[t]};var defaultLogger=null;log4javascript.getDefaultLogger=function(){return defaultLogger||(defaultLogger=createDefaultLogger()),defaultLogger};var nullLogger=null;log4javascript.getNullLogger=function(){return nullLogger||(nullLogger=new Logger(nullLoggerName),nullLogger.setLevel(Level.OFF)),nullLogger},log4javascript.resetConfiguration=function(){rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL),loggers={}};var LoggingEvent=function(t,e,n,i,r){this.logger=t,this.timeStamp=e,this.timeStampInMilliseconds=e.getTime(),this.timeStampInSeconds=Math.floor(this.timeStampInMilliseconds/1e3),this.milliseconds=this.timeStamp.getMilliseconds(),this.level=n,this.messages=i,this.exception=r};LoggingEvent.prototype={getThrowableStrRep:function(){return this.exception?getExceptionStringRep(this.exception):""},getCombinedMessages:function(){return 1==this.messages.length?this.messages[0]:this.messages.join(newLine)},toString:function(){return"LoggingEvent["+this.level+"]"}},log4javascript.LoggingEvent=LoggingEvent;var Layout=function(){};Layout.prototype={defaults:{loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url"},loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url",batchHeader:"",batchFooter:"",batchSeparator:"",returnsPostData:!1,overrideTimeStampsSetting:!1,useTimeStampsInMilliseconds:null,format:function(){handleError("Layout.format: layout supplied has no format() method")},ignoresThrowable:function(){handleError("Layout.ignoresThrowable: layout supplied has no ignoresThrowable() method")},getContentType:function(){return"text/plain"},allowBatching:function(){return!0},setTimeStampsInMilliseconds:function(t){this.overrideTimeStampsSetting=!0,this.useTimeStampsInMilliseconds=bool(t)},isTimeStampsInMilliseconds:function(){return this.overrideTimeStampsSetting?this.useTimeStampsInMilliseconds:useTimeStampsInMilliseconds},getTimeStampValue:function(t){return this.isTimeStampsInMilliseconds()?t.timeStampInMilliseconds:t.timeStampInSeconds},getDataValues:function(t,e){var n=[[this.loggerKey,t.logger.name],[this.timeStampKey,this.getTimeStampValue(t)],[this.levelKey,t.level.name],[this.urlKey,window.location.href],[this.messageKey,e?t.getCombinedMessages():t.messages]];if(this.isTimeStampsInMilliseconds()||n.push([this.millisecondsKey,t.milliseconds]),t.exception&&n.push([this.exceptionKey,getExceptionStringRep(t.exception)]),this.hasCustomFields())for(var i=0,r=this.customFields.length;r>i;i++){var s=this.customFields[i].value;"function"==typeof s&&(s=s(this,t)),n.push([this.customFields[i].name,s])}return n},setKeys:function(t,e,n,i,r,s,o){this.loggerKey=extractStringFromParam(t,this.defaults.loggerKey),this.timeStampKey=extractStringFromParam(e,this.defaults.timeStampKey),this.levelKey=extractStringFromParam(n,this.defaults.levelKey),this.messageKey=extractStringFromParam(i,this.defaults.messageKey),this.exceptionKey=extractStringFromParam(r,this.defaults.exceptionKey),this.urlKey=extractStringFromParam(s,this.defaults.urlKey),this.millisecondsKey=extractStringFromParam(o,this.defaults.millisecondsKey)},setCustomField:function(t,e){for(var n=!1,i=0,r=this.customFields.length;r>i;i++)this.customFields[i].name===t&&(this.customFields[i].value=e,n=!0);n||this.customFields.push({name:t,value:e})},hasCustomFields:function(){return this.customFields.length>0},formatWithException:function(t){var e=this.format(t);return t.exception&&this.ignoresThrowable()&&(e+=t.getThrowableStrRep()),e},toString:function(){handleError("Layout.toString: all layouts must override this method")}},log4javascript.Layout=Layout;var Appender=function(){};Appender.prototype=new EventSupport,Appender.prototype.layout=new PatternLayout,Appender.prototype.threshold=Level.ALL,Appender.prototype.loggers=[],Appender.prototype.doAppend=function(t){enabled&&t.level.level>=this.threshold.level&&this.append(t)},Appender.prototype.append=function(t){},Appender.prototype.setLayout=function(t){t instanceof Layout?this.layout=t:handleError("Appender.setLayout: layout supplied to "+this.toString()+" is not a subclass of Layout")},Appender.prototype.getLayout=function(){return this.layout},Appender.prototype.setThreshold=function(t){t instanceof Level?this.threshold=t:handleError("Appender.setThreshold: threshold supplied to "+this.toString()+" is not a subclass of Level")},Appender.prototype.getThreshold=function(){return this.threshold},Appender.prototype.setAddedToLogger=function(t){this.loggers.push(t)},Appender.prototype.setRemovedFromLogger=function(t){array_remove(this.loggers,t)},Appender.prototype.group=emptyFunction,Appender.prototype.groupEnd=emptyFunction,Appender.prototype.toString=function(){handleError("Appender.toString: all appenders must override this method")},log4javascript.Appender=Appender,SimpleLayout.prototype=new Layout,SimpleLayout.prototype.format=function(t){return t.level.name+" - "+t.getCombinedMessages()},SimpleLayout.prototype.ignoresThrowable=function(){return!0},SimpleLayout.prototype.toString=function(){return"SimpleLayout"},log4javascript.SimpleLayout=SimpleLayout,NullLayout.prototype=new Layout,NullLayout.prototype.format=function(t){return t.messages},NullLayout.prototype.ignoresThrowable=function(){return!0},NullLayout.prototype.formatWithException=function(t){var e=t.messages,n=t.exception;return n?e.concat([n]):e},NullLayout.prototype.toString=function(){return"NullLayout"},log4javascript.NullLayout=NullLayout,XmlLayout.prototype=new Layout,XmlLayout.prototype.isCombinedMessages=function(){return this.combineMessages},XmlLayout.prototype.getContentType=function(){return"text/xml"},XmlLayout.prototype.escapeCdata=function(t){return t.replace(/\]\]>/,"]]>]]&gt;<![CDATA[")},XmlLayout.prototype.format=function(t){
function e(t){return t="string"==typeof t?t:toStr(t),"<log4javascript:message><![CDATA["+r.escapeCdata(t)+"]]></log4javascript:message>"}var n,i,r=this,s='<log4javascript:event logger="'+t.logger.name+'" timestamp="'+this.getTimeStampValue(t)+'"';if(this.isTimeStampsInMilliseconds()||(s+=' milliseconds="'+t.milliseconds+'"'),s+=' level="'+t.level.name+'">'+newLine,this.combineMessages)s+=e(t.getCombinedMessages());else{for(s+="<log4javascript:messages>"+newLine,n=0,i=t.messages.length;i>n;n++)s+=e(t.messages[n])+newLine;s+="</log4javascript:messages>"+newLine}if(this.hasCustomFields())for(n=0,i=this.customFields.length;i>n;n++)s+='<log4javascript:customfield name="'+this.customFields[n].name+'"><![CDATA['+this.customFields[n].value.toString()+"]]></log4javascript:customfield>"+newLine;return t.exception&&(s+="<log4javascript:exception><![CDATA["+getExceptionStringRep(t.exception)+"]]></log4javascript:exception>"+newLine),s+="</log4javascript:event>"+newLine+newLine},XmlLayout.prototype.ignoresThrowable=function(){return!1},XmlLayout.prototype.toString=function(){return"XmlLayout"},log4javascript.XmlLayout=XmlLayout,JsonLayout.prototype=new Layout,JsonLayout.prototype.isReadable=function(){return this.readable},JsonLayout.prototype.isCombinedMessages=function(){return this.combineMessages},JsonLayout.prototype.format=function(t){function e(t,n,i){var s,o=typeof t;if(t instanceof Date)s=String(t.getTime());else if(i&&t instanceof Array){s="["+r.lineBreak;for(var a=0,c=t.length;c>a;a++){var l=n+r.tab;s+=l+e(t[a],l,!1),a<t.length-1&&(s+=","),s+=r.lineBreak}s+=n+"]"}else s="number"!==o&&"boolean"!==o?'"'+escapeNewLines(toStr(t).replace(/\"/g,'\\"'))+'"':t;return s}var n,i,r=this,s=this.getDataValues(t,this.combineMessages),o="{"+this.lineBreak;for(n=0,i=s.length-1;i>=n;n++)o+=this.tab+'"'+s[n][0]+'"'+this.colon+e(s[n][1],this.tab,!0),i>n&&(o+=","),o+=this.lineBreak;return o+="}"+this.lineBreak},JsonLayout.prototype.ignoresThrowable=function(){return!1},JsonLayout.prototype.toString=function(){return"JsonLayout"},JsonLayout.prototype.getContentType=function(){return"application/json"},log4javascript.JsonLayout=JsonLayout,HttpPostDataLayout.prototype=new Layout,HttpPostDataLayout.prototype.allowBatching=function(){return!1},HttpPostDataLayout.prototype.format=function(t){for(var e=this.getDataValues(t),n=[],i=0,r=e.length;r>i;i++){var s=e[i][1]instanceof Date?String(e[i][1].getTime()):e[i][1];n.push(urlEncode(e[i][0])+"="+urlEncode(s))}return n.join("&")},HttpPostDataLayout.prototype.ignoresThrowable=function(t){return!1},HttpPostDataLayout.prototype.toString=function(){return"HttpPostDataLayout"},log4javascript.HttpPostDataLayout=HttpPostDataLayout;var SimpleDateFormat;!function(){var t=/('[^']*')|(G+|y+|M+|w+|W+|D+|d+|F+|E+|a+|H+|k+|K+|h+|m+|s+|S+|Z+)|([a-zA-Z]+)|([^a-zA-Z']+)/,e=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=0,r=1,s=2,o=3,a=4,c=5,l={G:i,y:o,M:a,w:s,W:s,D:s,d:s,F:s,E:r,a:i,H:s,k:s,K:s,h:s,m:s,s:s,S:s,Z:c},h=864e5,u=7*h,p=1,d=function(t,e,n){var i=new Date(t,e,n,0,0,0);return i.setMilliseconds(0),i};Date.prototype.getDifference=function(t){return this.getTime()-t.getTime()},Date.prototype.isBefore=function(t){return this.getTime()<t.getTime()},Date.prototype.getUTCTime=function(){return Date.UTC(this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())},Date.prototype.getTimeSince=function(t){return this.getUTCTime()-t.getUTCTime()},Date.prototype.getPreviousSunday=function(){var t=new Date(this.getFullYear(),this.getMonth(),this.getDate(),12,0,0),e=new Date(t.getTime()-this.getDay()*h);return d(e.getFullYear(),e.getMonth(),e.getDate())},Date.prototype.getWeekInYear=function(t){isUndefined(this.minimalDaysInFirstWeek)&&(t=p);var e=this.getPreviousSunday(),n=d(this.getFullYear(),0,1),i=e.isBefore(n)?0:1+Math.floor(e.getTimeSince(n)/u),r=7-n.getDay(),s=i;return t>r&&s--,s},Date.prototype.getWeekInMonth=function(t){isUndefined(this.minimalDaysInFirstWeek)&&(t=p);var e=this.getPreviousSunday(),n=d(this.getFullYear(),this.getMonth(),1),i=e.isBefore(n)?0:1+Math.floor(e.getTimeSince(n)/u),r=7-n.getDay(),s=i;return r>=t&&s++,s},Date.prototype.getDayInYear=function(){var t=d(this.getFullYear(),0,1);return 1+Math.floor(this.getTimeSince(t)/h)},SimpleDateFormat=function(t){this.formatString=t},SimpleDateFormat.prototype.setMinimalDaysInFirstWeek=function(t){this.minimalDaysInFirstWeek=t},SimpleDateFormat.prototype.getMinimalDaysInFirstWeek=function(){return isUndefined(this.minimalDaysInFirstWeek)?p:this.minimalDaysInFirstWeek};var f=function(t,e){for(;t.length<e;)t="0"+t;return t},g=function(t,e,n){return e>=4?t:t.substr(0,Math.max(n,e))},m=function(t,e){var n=""+t;return f(n,e)};SimpleDateFormat.prototype.format=function(h){for(var u,p="",d=this.formatString;u=t.exec(d);){var v=u[1],y=u[2],_=u[3],b=u[4];if(v)p+="''"==v?"'":v.substring(1,v.length-1);else if(_);else if(b)p+=b;else if(y){var x=y.charAt(0),w=y.length,E="";switch(x){case"G":E="AD";break;case"y":E=h.getFullYear();break;case"M":E=h.getMonth();break;case"w":E=h.getWeekInYear(this.getMinimalDaysInFirstWeek());break;case"W":E=h.getWeekInMonth(this.getMinimalDaysInFirstWeek());break;case"D":E=h.getDayInYear();break;case"d":E=h.getDate();break;case"F":E=1+Math.floor((h.getDate()-1)/7);break;case"E":E=n[h.getDay()];break;case"a":E=h.getHours()>=12?"PM":"AM";break;case"H":E=h.getHours();break;case"k":E=h.getHours()||24;break;case"K":E=h.getHours()%12;break;case"h":E=h.getHours()%12||12;break;case"m":E=h.getMinutes();break;case"s":E=h.getSeconds();break;case"S":E=h.getMilliseconds();break;case"Z":E=h.getTimezoneOffset()}switch(l[x]){case i:p+=g(E,w,2);break;case r:p+=g(E,w,3);break;case s:p+=m(E,w);break;case o:if(3>=w){var S=""+E;p+=S.substr(2,2)}else p+=m(E,w);break;case a:p+=w>=3?g(e[E],w,w):m(E+1,w);break;case c:var T=E>0,L=T?"-":"+",C=Math.abs(E),A=""+Math.floor(C/60);A=f(A,2);var j=""+C%60;j=f(j,2),p+=L+A+j}}d=d.substr(u.index+u[0].length)}return p}}(),log4javascript.SimpleDateFormat=SimpleDateFormat,PatternLayout.TTCC_CONVERSION_PATTERN="%r %p %c - %m%n",PatternLayout.DEFAULT_CONVERSION_PATTERN="%m%n",PatternLayout.ISO8601_DATEFORMAT="yyyy-MM-dd HH:mm:ss,SSS",PatternLayout.DATETIME_DATEFORMAT="dd MMM yyyy HH:mm:ss,SSS",PatternLayout.ABSOLUTETIME_DATEFORMAT="HH:mm:ss,SSS",PatternLayout.prototype=new Layout,PatternLayout.prototype.format=function(t){for(var e,n=/%(-?[0-9]+)?(\.?[0-9]+)?([acdfmMnpr%])(\{([^\}]+)\})?|([^%]+)/,i="",r=this.pattern;e=n.exec(r);){var s=e[0],o=e[1],a=e[2],c=e[3],l=e[5],h=e[6];if(h)i+=""+h;else{var u="";switch(c){case"a":case"m":var p=0;l&&(p=parseInt(l,10),isNaN(p)&&(handleError("PatternLayout.format: invalid specifier '"+l+"' for conversion character '"+c+"' - should be a number"),p=0));for(var d="a"===c?t.messages[0]:t.messages,f=0,g=d.length;g>f;f++)f>0&&" "!==u.charAt(u.length-1)&&(u+=" "),u+=0===p?d[f]:formatObjectExpansion(d[f],p);break;case"c":var m=t.logger.name;if(l){var v=parseInt(l,10),y=t.logger.name.split(".");u=v>=y.length?m:y.slice(y.length-v).join(".")}else u=m;break;case"d":var _=PatternLayout.ISO8601_DATEFORMAT;l&&(_=l,"ISO8601"==_?_=PatternLayout.ISO8601_DATEFORMAT:"ABSOLUTE"==_?_=PatternLayout.ABSOLUTETIME_DATEFORMAT:"DATE"==_&&(_=PatternLayout.DATETIME_DATEFORMAT)),u=new SimpleDateFormat(_).format(t.timeStamp);break;case"f":if(this.hasCustomFields()){var b=0;l&&(b=parseInt(l,10),isNaN(b)?handleError("PatternLayout.format: invalid specifier '"+l+"' for conversion character 'f' - should be a number"):0===b?handleError("PatternLayout.format: invalid specifier '"+l+"' for conversion character 'f' - must be greater than zero"):b>this.customFields.length?handleError("PatternLayout.format: invalid specifier '"+l+"' for conversion character 'f' - there aren't that many custom fields"):b-=1);var x=this.customFields[b].value;"function"==typeof x&&(x=x(this,t)),u=x}break;case"n":u=newLine;break;case"p":u=t.level.name;break;case"r":u=""+t.timeStamp.getDifference(applicationStartDate);break;case"%":u="%";break;default:u=s}var w;if(a){w=parseInt(a.substr(1),10);var E=u.length;E>w&&(u=u.substring(E-w,E))}if(o)if("-"==o.charAt(0))for(w=parseInt(o.substr(1),10);u.length<w;)u+=" ";else for(w=parseInt(o,10);u.length<w;)u=" "+u;i+=u}r=r.substr(e.index+e[0].length)}return i},PatternLayout.prototype.ignoresThrowable=function(){return!0},PatternLayout.prototype.toString=function(){return"PatternLayout"},log4javascript.PatternLayout=PatternLayout,AlertAppender.prototype=new Appender,AlertAppender.prototype.layout=new SimpleLayout,AlertAppender.prototype.append=function(t){alert(this.getLayout().formatWithException(t))},AlertAppender.prototype.toString=function(){return"AlertAppender"},log4javascript.AlertAppender=AlertAppender,BrowserConsoleAppender.prototype=new log4javascript.Appender,BrowserConsoleAppender.prototype.layout=new NullLayout,BrowserConsoleAppender.prototype.threshold=Level.DEBUG,BrowserConsoleAppender.prototype.append=function(t){var e,n=this,i=function(){var e=n.getLayout().formatWithException(t);return"string"==typeof e?[e]:e};if((e=window.console)&&e.log){var r,s=i();r=e.debug&&Level.DEBUG.isGreaterOrEqual(t.level)?"debug":e.info&&Level.INFO.equals(t.level)?"info":e.warn&&Level.WARN.equals(t.level)?"warn":e.error&&t.level.isGreaterOrEqual(Level.ERROR)?"error":"log",e[r].apply?e[r].apply(e,s):e[r](s)}else"undefined"!=typeof opera&&opera.postError&&opera.postError(i())},BrowserConsoleAppender.prototype.group=function(t){window.console&&window.console.group&&window.console.group(t)},BrowserConsoleAppender.prototype.groupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},BrowserConsoleAppender.prototype.toString=function(){return"BrowserConsoleAppender"},log4javascript.BrowserConsoleAppender=BrowserConsoleAppender;var xhrFactory=function(){return new XMLHttpRequest},xmlHttpFactories=[xhrFactory,function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],withCredentialsSupported=!1,getXmlHttp=function(t){for(var e,n=null,i=0,r=xmlHttpFactories.length;r>i;i++){e=xmlHttpFactories[i];try{return n=e(),withCredentialsSupported=e==xhrFactory&&"withCredentials"in n,getXmlHttp=e,n}catch(s){}}t?t():handleError("getXmlHttp: unable to obtain XMLHttpRequest object")};AjaxAppender.prototype=new Appender,AjaxAppender.prototype.defaults={waitForResponse:!1,timed:!1,timerInterval:1e3,batchSize:1,sendAllOnUnload:!1,requestSuccessCallback:null,failCallback:null,postVarName:"data",contentType:"application/x-www-form-urlencoded"},AjaxAppender.prototype.layout=new HttpPostDataLayout,AjaxAppender.prototype.toString=function(){return"AjaxAppender"},log4javascript.AjaxAppender=AjaxAppender;var ConsoleAppender;if(function(){function t(t,e,n,i,r){this.create(!1,null,t,e,n,i,r,this.defaults.focusPopUp)}function e(t,e,n,i,r,s){this.create(!0,t,e,n,i,r,s,!1)}var n=function(){return['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">','<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">',"<head>","<title>log4javascript</title>",'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',"<!-- Make IE8 behave like IE7, having gone to all the trouble of making IE work -->",'<meta http-equiv="X-UA-Compatible" content="IE=7" />','<script type="text/javascript">var isIe = false, isIePre7 = false;</script>','<!--[if IE]><script type="text/javascript">isIe = true</script><![endif]-->','<!--[if lt IE 7]><script type="text/javascript">isIePre7 = true</script><![endif]-->','<script type="text/javascript">',"//<![CDATA[","var loggingEnabled=true;var logQueuedEventsTimer=null;var logEntries=[];var logEntriesAndSeparators=[];var logItems=[];var renderDelay=100;var unrenderedLogItemsExist=false;var rootGroup,currentGroup=null;var loaded=false;var currentLogItem=null;var logMainContainer;function copyProperties(obj,props){for(var i in props){obj[i]=props[i];}}","function LogItem(){}","LogItem.prototype={mainContainer:null,wrappedContainer:null,unwrappedContainer:null,group:null,appendToLog:function(){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].appendToLog();}","this.group.update();},doRemove:function(doUpdate,removeFromGroup){if(this.rendered){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].remove();}","this.unwrappedElementContainer=null;this.wrappedElementContainer=null;this.mainElementContainer=null;}","if(this.group&&removeFromGroup){this.group.removeChild(this,doUpdate);}","if(this===currentLogItem){currentLogItem=null;}},remove:function(doUpdate,removeFromGroup){this.doRemove(doUpdate,removeFromGroup);},render:function(){},accept:function(visitor){visitor.visit(this);},getUnwrappedDomContainer:function(){return this.group.unwrappedElementContainer.contentDiv;},getWrappedDomContainer:function(){return this.group.wrappedElementContainer.contentDiv;},getMainDomContainer:function(){return this.group.mainElementContainer.contentDiv;}};LogItem.serializedItemKeys={LOG_ENTRY:0,GROUP_START:1,GROUP_END:2};function LogItemContainerElement(){}",'LogItemContainerElement.prototype={appendToLog:function(){var insertBeforeFirst=(newestAtTop&&this.containerDomNode.hasChildNodes());if(insertBeforeFirst){this.containerDomNode.insertBefore(this.mainDiv,this.containerDomNode.firstChild);}else{this.containerDomNode.appendChild(this.mainDiv);}}};function SeparatorElementContainer(containerDomNode){this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.className="separator";this.mainDiv.innerHTML="&nbsp;";}',"SeparatorElementContainer.prototype=new LogItemContainerElement();SeparatorElementContainer.prototype.remove=function(){this.mainDiv.parentNode.removeChild(this.mainDiv);this.mainDiv=null;};function Separator(){this.rendered=false;}","Separator.prototype=new LogItem();copyProperties(Separator.prototype,{render:function(){var containerDomNode=this.group.contentDiv;if(isIe){this.unwrappedElementContainer=new SeparatorElementContainer(this.getUnwrappedDomContainer());this.wrappedElementContainer=new SeparatorElementContainer(this.getWrappedDomContainer());this.elementContainers=[this.unwrappedElementContainer,this.wrappedElementContainer];}else{this.mainElementContainer=new SeparatorElementContainer(this.getMainDomContainer());this.elementContainers=[this.mainElementContainer];}",'this.content=this.formattedMessage;this.rendered=true;}});function GroupElementContainer(group,containerDomNode,isRoot,isWrapped){this.group=group;this.containerDomNode=containerDomNode;this.isRoot=isRoot;this.isWrapped=isWrapped;this.expandable=false;if(this.isRoot){if(isIe){this.contentDiv=logMainContainer.appendChild(document.createElement("div"));this.contentDiv.id=this.isWrapped?"log_wrapped":"log_unwrapped";}else{this.contentDiv=logMainContainer;}}else{var groupElementContainer=this;this.mainDiv=document.createElement("div");this.mainDiv.className="group";this.headingDiv=this.mainDiv.appendChild(document.createElement("div"));this.headingDiv.className="groupheading";this.expander=this.headingDiv.appendChild(document.createElement("span"));this.expander.className="expander unselectable greyedout";this.expander.unselectable=true;var expanderText=this.group.expanded?"-":"+";this.expanderTextNode=this.expander.appendChild(document.createTextNode(expanderText));this.headingDiv.appendChild(document.createTextNode(" "+this.group.name));this.contentDiv=this.mainDiv.appendChild(document.createElement("div"));var contentCssClass=this.group.expanded?"expanded":"collapsed";this.contentDiv.className="groupcontent "+contentCssClass;this.expander.onclick=function(){if(groupElementContainer.group.expandable){groupElementContainer.group.toggleExpanded();}};}}','GroupElementContainer.prototype=new LogItemContainerElement();copyProperties(GroupElementContainer.prototype,{toggleExpanded:function(){if(!this.isRoot){var oldCssClass,newCssClass,expanderText;if(this.group.expanded){newCssClass="expanded";oldCssClass="collapsed";expanderText="-";}else{newCssClass="collapsed";oldCssClass="expanded";expanderText="+";}',"replaceClass(this.contentDiv,newCssClass,oldCssClass);this.expanderTextNode.nodeValue=expanderText;}},remove:function(){if(!this.isRoot){this.headingDiv=null;this.expander.onclick=null;this.expander=null;this.expanderTextNode=null;this.contentDiv=null;this.containerDomNode=null;this.mainDiv.parentNode.removeChild(this.mainDiv);this.mainDiv=null;}},reverseChildren:function(){var node=null;var childDomNodes=[];while((node=this.contentDiv.firstChild)){this.contentDiv.removeChild(node);childDomNodes.push(node);}",'while((node=childDomNodes.pop())){this.contentDiv.appendChild(node);}},update:function(){if(!this.isRoot){if(this.group.expandable){removeClass(this.expander,"greyedout");}else{addClass(this.expander,"greyedout");}}},clear:function(){if(this.isRoot){this.contentDiv.innerHTML="";}}});function Group(name,isRoot,initiallyExpanded){this.name=name;this.group=null;this.isRoot=isRoot;this.initiallyExpanded=initiallyExpanded;this.elementContainers=[];this.children=[];this.expanded=initiallyExpanded;this.rendered=false;this.expandable=false;}',"Group.prototype=new LogItem();copyProperties(Group.prototype,{addChild:function(logItem){this.children.push(logItem);logItem.group=this;},render:function(){if(isIe){var unwrappedDomContainer,wrappedDomContainer;if(this.isRoot){unwrappedDomContainer=logMainContainer;wrappedDomContainer=logMainContainer;}else{unwrappedDomContainer=this.getUnwrappedDomContainer();wrappedDomContainer=this.getWrappedDomContainer();}","this.unwrappedElementContainer=new GroupElementContainer(this,unwrappedDomContainer,this.isRoot,false);this.wrappedElementContainer=new GroupElementContainer(this,wrappedDomContainer,this.isRoot,true);this.elementContainers=[this.unwrappedElementContainer,this.wrappedElementContainer];}else{var mainDomContainer=this.isRoot?logMainContainer:this.getMainDomContainer();this.mainElementContainer=new GroupElementContainer(this,mainDomContainer,this.isRoot,false);this.elementContainers=[this.mainElementContainer];}","this.rendered=true;},toggleExpanded:function(){this.expanded=!this.expanded;for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].toggleExpanded();}},expand:function(){if(!this.expanded){this.toggleExpanded();}},accept:function(visitor){visitor.visitGroup(this);},reverseChildren:function(){if(this.rendered){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].reverseChildren();}}},update:function(){var previouslyExpandable=this.expandable;this.expandable=(this.children.length!==0);if(this.expandable!==previouslyExpandable){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].update();}}},flatten:function(){var visitor=new GroupFlattener();this.accept(visitor);return visitor.logEntriesAndSeparators;},removeChild:function(child,doUpdate){array_remove(this.children,child);child.group=null;if(doUpdate){this.update();}},remove:function(doUpdate,removeFromGroup){for(var i=0,len=this.children.length;i<len;i++){this.children[i].remove(false,false);}","this.children=[];this.update();if(this===currentGroup){currentGroup=this.group;}","this.doRemove(doUpdate,removeFromGroup);},serialize:function(items){items.push([LogItem.serializedItemKeys.GROUP_START,this.name]);for(var i=0,len=this.children.length;i<len;i++){this.children[i].serialize(items);}","if(this!==currentGroup){items.push([LogItem.serializedItemKeys.GROUP_END]);}},clear:function(){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].clear();}}});function LogEntryElementContainer(){}",'LogEntryElementContainer.prototype=new LogItemContainerElement();copyProperties(LogEntryElementContainer.prototype,{remove:function(){this.doRemove();},doRemove:function(){this.mainDiv.parentNode.removeChild(this.mainDiv);this.mainDiv=null;this.contentElement=null;this.containerDomNode=null;},setContent:function(content,wrappedContent){if(content===this.formattedMessage){this.contentElement.innerHTML="";this.contentElement.appendChild(document.createTextNode(this.formattedMessage));}else{this.contentElement.innerHTML=content;}},setSearchMatch:function(isMatch){var oldCssClass=isMatch?"searchnonmatch":"searchmatch";var newCssClass=isMatch?"searchmatch":"searchnonmatch";replaceClass(this.mainDiv,newCssClass,oldCssClass);},clearSearch:function(){removeClass(this.mainDiv,"searchmatch");removeClass(this.mainDiv,"searchnonmatch");}});function LogEntryWrappedElementContainer(logEntry,containerDomNode){this.logEntry=logEntry;this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.appendChild(document.createTextNode(this.logEntry.formattedMessage));this.mainDiv.className="logentry wrapped "+this.logEntry.level;this.contentElement=this.mainDiv;}','LogEntryWrappedElementContainer.prototype=new LogEntryElementContainer();LogEntryWrappedElementContainer.prototype.setContent=function(content,wrappedContent){if(content===this.formattedMessage){this.contentElement.innerHTML="";this.contentElement.appendChild(document.createTextNode(this.formattedMessage));}else{this.contentElement.innerHTML=wrappedContent;}};function LogEntryUnwrappedElementContainer(logEntry,containerDomNode){this.logEntry=logEntry;this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.className="logentry unwrapped "+this.logEntry.level;this.pre=this.mainDiv.appendChild(document.createElement("pre"));this.pre.appendChild(document.createTextNode(this.logEntry.formattedMessage));this.pre.className="unwrapped";this.contentElement=this.pre;}','LogEntryUnwrappedElementContainer.prototype=new LogEntryElementContainer();LogEntryUnwrappedElementContainer.prototype.remove=function(){this.doRemove();this.pre=null;};function LogEntryMainElementContainer(logEntry,containerDomNode){this.logEntry=logEntry;this.containerDomNode=containerDomNode;this.mainDiv=document.createElement("div");this.mainDiv.className="logentry nonielogentry "+this.logEntry.level;this.contentElement=this.mainDiv.appendChild(document.createElement("span"));this.contentElement.appendChild(document.createTextNode(this.logEntry.formattedMessage));}',"LogEntryMainElementContainer.prototype=new LogEntryElementContainer();function LogEntry(level,formattedMessage){this.level=level;this.formattedMessage=formattedMessage;this.rendered=false;}",'LogEntry.prototype=new LogItem();copyProperties(LogEntry.prototype,{render:function(){var logEntry=this;var containerDomNode=this.group.contentDiv;if(isIe){this.formattedMessage=this.formattedMessage.replace(/\\r\\n/g,"\\r");this.unwrappedElementContainer=new LogEntryUnwrappedElementContainer(this,this.getUnwrappedDomContainer());this.wrappedElementContainer=new LogEntryWrappedElementContainer(this,this.getWrappedDomContainer());this.elementContainers=[this.unwrappedElementContainer,this.wrappedElementContainer];}else{this.mainElementContainer=new LogEntryMainElementContainer(this,this.getMainDomContainer());this.elementContainers=[this.mainElementContainer];}','this.content=this.formattedMessage;this.rendered=true;},setContent:function(content,wrappedContent){if(content!=this.content){if(isIe&&(content!==this.formattedMessage)){content=content.replace(/\\r\\n/g,"\\r");}',"for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].setContent(content,wrappedContent);}",'this.content=content;}},getSearchMatches:function(){var matches=[];var i,len;if(isIe){var unwrappedEls=getElementsByClass(this.unwrappedElementContainer.mainDiv,"searchterm","span");var wrappedEls=getElementsByClass(this.wrappedElementContainer.mainDiv,"searchterm","span");for(i=0,len=unwrappedEls.length;i<len;i++){matches[i]=new Match(this.level,null,unwrappedEls[i],wrappedEls[i]);}}else{var els=getElementsByClass(this.mainElementContainer.mainDiv,"searchterm","span");for(i=0,len=els.length;i<len;i++){matches[i]=new Match(this.level,els[i]);}}',"return matches;},setSearchMatch:function(isMatch){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].setSearchMatch(isMatch);}},clearSearch:function(){for(var i=0,len=this.elementContainers.length;i<len;i++){this.elementContainers[i].clearSearch();}},accept:function(visitor){visitor.visitLogEntry(this);},serialize:function(items){items.push([LogItem.serializedItemKeys.LOG_ENTRY,this.level,this.formattedMessage]);}});function LogItemVisitor(){}","LogItemVisitor.prototype={visit:function(logItem){},visitParent:function(logItem){if(logItem.group){logItem.group.accept(this);}},visitChildren:function(logItem){for(var i=0,len=logItem.children.length;i<len;i++){logItem.children[i].accept(this);}},visitLogEntry:function(logEntry){this.visit(logEntry);},visitSeparator:function(separator){this.visit(separator);},visitGroup:function(group){this.visit(group);}};function GroupFlattener(){this.logEntriesAndSeparators=[];}",'GroupFlattener.prototype=new LogItemVisitor();GroupFlattener.prototype.visitGroup=function(group){this.visitChildren(group);};GroupFlattener.prototype.visitLogEntry=function(logEntry){this.logEntriesAndSeparators.push(logEntry);};GroupFlattener.prototype.visitSeparator=function(separator){this.logEntriesAndSeparators.push(separator);};window.onload=function(){if(location.search){var queryBits=unescape(location.search).substr(1).split("&"),nameValueBits;for(var i=0,len=queryBits.length;i<len;i++){nameValueBits=queryBits[i].split("=");if(nameValueBits[0]=="log4javascript_domain"){document.domain=nameValueBits[1];break;}}}','logMainContainer=$("log");if(isIePre7){addClass(logMainContainer,"oldIe");}','rootGroup=new Group("root",true);rootGroup.render();currentGroup=rootGroup;setCommandInputWidth();setLogContainerHeight();toggleLoggingEnabled();toggleSearchEnabled();toggleSearchFilter();toggleSearchHighlight();applyFilters();checkAllLevels();toggleWrap();toggleNewestAtTop();toggleScrollToLatest();renderQueuedLogItems();loaded=true;$("command").value="";$("command").autocomplete="off";$("command").onkeydown=function(evt){evt=getEvent(evt);if(evt.keyCode==10||evt.keyCode==13){evalCommandLine();stopPropagation(evt);}else if(evt.keyCode==27){this.value="";this.focus();}else if(evt.keyCode==38&&commandHistory.length>0){currentCommandIndex=Math.max(0,currentCommandIndex-1);this.value=commandHistory[currentCommandIndex];moveCaretToEnd(this);}else if(evt.keyCode==40&&commandHistory.length>0){currentCommandIndex=Math.min(commandHistory.length-1,currentCommandIndex+1);this.value=commandHistory[currentCommandIndex];moveCaretToEnd(this);}};$("command").onkeypress=function(evt){evt=getEvent(evt);if(evt.keyCode==38&&commandHistory.length>0&&evt.preventDefault){evt.preventDefault();}};$("command").onkeyup=function(evt){evt=getEvent(evt);if(evt.keyCode==27&&evt.preventDefault){evt.preventDefault();this.focus();}};document.onkeydown=function keyEventHandler(evt){evt=getEvent(evt);switch(evt.keyCode){case 69:if(evt.shiftKey&&(evt.ctrlKey||evt.metaKey)){evalLastCommand();cancelKeyEvent(evt);return false;}',"break;case 75:if(evt.shiftKey&&(evt.ctrlKey||evt.metaKey)){focusSearch();cancelKeyEvent(evt);return false;}","break;case 40:case 76:if(evt.shiftKey&&(evt.ctrlKey||evt.metaKey)){focusCommandLine();cancelKeyEvent(evt);return false;}","break;}};setTimeout(setLogContainerHeight,20);setShowCommandLine(showCommandLine);doSearch();};window.onunload=function(){if(mainWindowExists()){appender.unload();}",'appender=null;};function toggleLoggingEnabled(){setLoggingEnabled($("enableLogging").checked);}',"function setLoggingEnabled(enable){loggingEnabled=enable;}","var appender=null;function setAppender(appenderParam){appender=appenderParam;}",'function setShowCloseButton(showCloseButton){$("closeButton").style.display=showCloseButton?"inline":"none";}','function setShowHideButton(showHideButton){$("hideButton").style.display=showHideButton?"inline":"none";}',"var newestAtTop=false;function LogItemContentReverser(){}","LogItemContentReverser.prototype=new LogItemVisitor();LogItemContentReverser.prototype.visitGroup=function(group){group.reverseChildren();this.visitChildren(group);};function setNewestAtTop(isNewestAtTop){var oldNewestAtTop=newestAtTop;var i,iLen,j,jLen;newestAtTop=Boolean(isNewestAtTop);if(oldNewestAtTop!=newestAtTop){var visitor=new LogItemContentReverser();rootGroup.accept(visitor);if(currentSearch){var currentMatch=currentSearch.matches[currentMatchIndex];var matchIndex=0;var matches=[];var actOnLogEntry=function(logEntry){var logEntryMatches=logEntry.getSearchMatches();for(j=0,jLen=logEntryMatches.length;j<jLen;j++){matches[matchIndex]=logEntryMatches[j];if(currentMatch&&logEntryMatches[j].equals(currentMatch)){currentMatchIndex=matchIndex;}","matchIndex++;}};if(newestAtTop){for(i=logEntries.length-1;i>=0;i--){actOnLogEntry(logEntries[i]);}}else{for(i=0,iLen=logEntries.length;i<iLen;i++){actOnLogEntry(logEntries[i]);}}","currentSearch.matches=matches;if(currentMatch){currentMatch.setCurrent();}}else if(scrollToLatest){doScrollToLatest();}}",'$("newestAtTop").checked=isNewestAtTop;}','function toggleNewestAtTop(){var isNewestAtTop=$("newestAtTop").checked;setNewestAtTop(isNewestAtTop);}',"var scrollToLatest=true;function setScrollToLatest(isScrollToLatest){scrollToLatest=isScrollToLatest;if(scrollToLatest){doScrollToLatest();}",'$("scrollToLatest").checked=isScrollToLatest;}','function toggleScrollToLatest(){var isScrollToLatest=$("scrollToLatest").checked;setScrollToLatest(isScrollToLatest);}','function doScrollToLatest(){var l=logMainContainer;if(typeof l.scrollTop!="undefined"){if(newestAtTop){l.scrollTop=0;}else{var latestLogEntry=l.lastChild;if(latestLogEntry){l.scrollTop=l.scrollHeight;}}}}',"var closeIfOpenerCloses=true;function setCloseIfOpenerCloses(isCloseIfOpenerCloses){closeIfOpenerCloses=isCloseIfOpenerCloses;}","var maxMessages=null;function setMaxMessages(max){maxMessages=max;pruneLogEntries();}",'var showCommandLine=false;function setShowCommandLine(isShowCommandLine){showCommandLine=isShowCommandLine;if(loaded){$("commandLine").style.display=showCommandLine?"block":"none";setCommandInputWidth();setLogContainerHeight();}}','function focusCommandLine(){if(loaded){$("command").focus();}}','function focusSearch(){if(loaded){$("searchBox").focus();}}',"function getLogItems(){var items=[];for(var i=0,len=logItems.length;i<len;i++){logItems[i].serialize(items);}","return items;}","function setLogItems(items){var loggingReallyEnabled=loggingEnabled;loggingEnabled=true;for(var i=0,len=items.length;i<len;i++){switch(items[i][0]){case LogItem.serializedItemKeys.LOG_ENTRY:log(items[i][1],items[i][2]);break;case LogItem.serializedItemKeys.GROUP_START:group(items[i][1]);break;case LogItem.serializedItemKeys.GROUP_END:groupEnd();break;}}","loggingEnabled=loggingReallyEnabled;}","function log(logLevel,formattedMessage){if(loggingEnabled){var logEntry=new LogEntry(logLevel,formattedMessage);logEntries.push(logEntry);logEntriesAndSeparators.push(logEntry);logItems.push(logEntry);currentGroup.addChild(logEntry);if(loaded){if(logQueuedEventsTimer!==null){clearTimeout(logQueuedEventsTimer);}","logQueuedEventsTimer=setTimeout(renderQueuedLogItems,renderDelay);unrenderedLogItemsExist=true;}}}","function renderQueuedLogItems(){logQueuedEventsTimer=null;var pruned=pruneLogEntries();var initiallyHasMatches=currentSearch?currentSearch.hasMatches():false;for(var i=0,len=logItems.length;i<len;i++){if(!logItems[i].rendered){logItems[i].render();logItems[i].appendToLog();if(currentSearch&&(logItems[i]instanceof LogEntry)){currentSearch.applyTo(logItems[i]);}}}","if(currentSearch){if(pruned){if(currentSearch.hasVisibleMatches()){if(currentMatchIndex===null){setCurrentMatchIndex(0);}","displayMatches();}else{displayNoMatches();}}else if(!initiallyHasMatches&&currentSearch.hasVisibleMatches()){setCurrentMatchIndex(0);displayMatches();}}","if(scrollToLatest){doScrollToLatest();}","unrenderedLogItemsExist=false;}","function pruneLogEntries(){if((maxMessages!==null)&&(logEntriesAndSeparators.length>maxMessages)){var numberToDelete=logEntriesAndSeparators.length-maxMessages;var prunedLogEntries=logEntriesAndSeparators.slice(0,numberToDelete);if(currentSearch){currentSearch.removeMatches(prunedLogEntries);}","var group;for(var i=0;i<numberToDelete;i++){group=logEntriesAndSeparators[i].group;array_remove(logItems,logEntriesAndSeparators[i]);array_remove(logEntries,logEntriesAndSeparators[i]);logEntriesAndSeparators[i].remove(true,true);if(group.children.length===0&&group!==currentGroup&&group!==rootGroup){array_remove(logItems,group);group.remove(true,true);}}","logEntriesAndSeparators=array_removeFromStart(logEntriesAndSeparators,numberToDelete);return true;}","return false;}",'function group(name,startExpanded){if(loggingEnabled){initiallyExpanded=(typeof startExpanded==="undefined")?true:Boolean(startExpanded);var newGroup=new Group(name,false,initiallyExpanded);currentGroup.addChild(newGroup);currentGroup=newGroup;logItems.push(newGroup);if(loaded){if(logQueuedEventsTimer!==null){clearTimeout(logQueuedEventsTimer);}',"logQueuedEventsTimer=setTimeout(renderQueuedLogItems,renderDelay);unrenderedLogItemsExist=true;}}}","function groupEnd(){currentGroup=(currentGroup===rootGroup)?rootGroup:currentGroup.group;}","function mainPageReloaded(){currentGroup=rootGroup;var separator=new Separator();logEntriesAndSeparators.push(separator);logItems.push(separator);currentGroup.addChild(separator);}","function closeWindow(){if(appender&&mainWindowExists()){appender.close(true);}else{window.close();}}","function hide(){if(appender&&mainWindowExists()){appender.hide();}}",'var mainWindow=window;var windowId="log4javascriptConsoleWindow_"+new Date().getTime()+"_"+(""+Math.random()).substr(2);function setMainWindow(win){mainWindow=win;mainWindow[windowId]=window;if(opener&&closeIfOpenerCloses){pollOpener();}}',"function pollOpener(){if(closeIfOpenerCloses){if(mainWindowExists()){setTimeout(pollOpener,500);}else{closeWindow();}}}","function mainWindowExists(){try{return(mainWindow&&!mainWindow.closed&&mainWindow[windowId]==window);}catch(ex){}","return false;}",'var logLevels=["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"];function getCheckBox(logLevel){return $("switch_"+logLevel);}','function getIeWrappedLogContainer(){return $("log_wrapped");}','function getIeUnwrappedLogContainer(){return $("log_unwrapped");}',"function applyFilters(){for(var i=0;i<logLevels.length;i++){if(getCheckBox(logLevels[i]).checked){addClass(logMainContainer,logLevels[i]);}else{removeClass(logMainContainer,logLevels[i]);}}","updateSearchFromFilters();}",'function toggleAllLevels(){var turnOn=$("switch_ALL").checked;for(var i=0;i<logLevels.length;i++){getCheckBox(logLevels[i]).checked=turnOn;if(turnOn){addClass(logMainContainer,logLevels[i]);}else{removeClass(logMainContainer,logLevels[i]);}}}','function checkAllLevels(){for(var i=0;i<logLevels.length;i++){if(!getCheckBox(logLevels[i]).checked){getCheckBox("ALL").checked=false;return;}}','getCheckBox("ALL").checked=true;}',"function clearLog(){rootGroup.clear();currentGroup=rootGroup;logEntries=[];logItems=[];logEntriesAndSeparators=[];doSearch();}",'function toggleWrap(){var enable=$("wrap").checked;if(enable){addClass(logMainContainer,"wrap");}else{removeClass(logMainContainer,"wrap");}',"refreshCurrentMatch();}","var searchTimer=null;function scheduleSearch(){try{clearTimeout(searchTimer);}catch(ex){}","searchTimer=setTimeout(doSearch,500);}","function Search(searchTerm,isRegex,searchRegex,isCaseSensitive){this.searchTerm=searchTerm;this.isRegex=isRegex;this.searchRegex=searchRegex;this.isCaseSensitive=isCaseSensitive;this.matches=[];}","Search.prototype={hasMatches:function(){return this.matches.length>0;},hasVisibleMatches:function(){if(this.hasMatches()){for(var i=0;i<this.matches.length;i++){if(this.matches[i].isVisible()){return true;}}}","return false;},match:function(logEntry){var entryText=String(logEntry.formattedMessage);var matchesSearch=false;if(this.isRegex){matchesSearch=this.searchRegex.test(entryText);}else if(this.isCaseSensitive){matchesSearch=(entryText.indexOf(this.searchTerm)>-1);}else{matchesSearch=(entryText.toLowerCase().indexOf(this.searchTerm.toLowerCase())>-1);}","return matchesSearch;},getNextVisibleMatchIndex:function(){for(var i=currentMatchIndex+1;i<this.matches.length;i++){if(this.matches[i].isVisible()){return i;}}","for(i=0;i<=currentMatchIndex;i++){if(this.matches[i].isVisible()){return i;}}","return-1;},getPreviousVisibleMatchIndex:function(){for(var i=currentMatchIndex-1;i>=0;i--){if(this.matches[i].isVisible()){return i;}}","for(var i=this.matches.length-1;i>=currentMatchIndex;i--){if(this.matches[i].isVisible()){return i;}}",'return-1;},applyTo:function(logEntry){var doesMatch=this.match(logEntry);if(doesMatch){logEntry.group.expand();logEntry.setSearchMatch(true);var logEntryContent;var wrappedLogEntryContent;var searchTermReplacementStartTag="<span class=\\"searchterm\\">";var searchTermReplacementEndTag="<"+"/span>";var preTagName=isIe?"pre":"span";var preStartTag="<"+preTagName+" class=\\"pre\\">";var preEndTag="<"+"/"+preTagName+">";var startIndex=0;var searchIndex,matchedText,textBeforeMatch;if(this.isRegex){var flags=this.isCaseSensitive?"g":"gi";var capturingRegex=new RegExp("("+this.searchRegex.source+")",flags);var rnd=(""+Math.random()).substr(2);var startToken="%%s"+rnd+"%%";var endToken="%%e"+rnd+"%%";logEntryContent=logEntry.formattedMessage.replace(capturingRegex,startToken+"$1"+endToken);logEntryContent=escapeHtml(logEntryContent);var result;var searchString=logEntryContent;logEntryContent="";wrappedLogEntryContent="";while((searchIndex=searchString.indexOf(startToken,startIndex))>-1){var endTokenIndex=searchString.indexOf(endToken,searchIndex);matchedText=searchString.substring(searchIndex+startToken.length,endTokenIndex);textBeforeMatch=searchString.substring(startIndex,searchIndex);logEntryContent+=preStartTag+textBeforeMatch+preEndTag;logEntryContent+=searchTermReplacementStartTag+preStartTag+matchedText+',"preEndTag+searchTermReplacementEndTag;if(isIe){wrappedLogEntryContent+=textBeforeMatch+searchTermReplacementStartTag+","matchedText+searchTermReplacementEndTag;}","startIndex=endTokenIndex+endToken.length;}",'logEntryContent+=preStartTag+searchString.substr(startIndex)+preEndTag;if(isIe){wrappedLogEntryContent+=searchString.substr(startIndex);}}else{logEntryContent="";wrappedLogEntryContent="";var searchTermReplacementLength=searchTermReplacementStartTag.length+',"this.searchTerm.length+searchTermReplacementEndTag.length;var searchTermLength=this.searchTerm.length;var searchTermLowerCase=this.searchTerm.toLowerCase();var logTextLowerCase=logEntry.formattedMessage.toLowerCase();while((searchIndex=logTextLowerCase.indexOf(searchTermLowerCase,startIndex))>-1){matchedText=escapeHtml(logEntry.formattedMessage.substr(searchIndex,this.searchTerm.length));textBeforeMatch=escapeHtml(logEntry.formattedMessage.substring(startIndex,searchIndex));var searchTermReplacement=searchTermReplacementStartTag+","preStartTag+matchedText+preEndTag+searchTermReplacementEndTag;logEntryContent+=preStartTag+textBeforeMatch+preEndTag+searchTermReplacement;if(isIe){wrappedLogEntryContent+=textBeforeMatch+searchTermReplacementStartTag+","matchedText+searchTermReplacementEndTag;}","startIndex=searchIndex+searchTermLength;}","var textAfterLastMatch=escapeHtml(logEntry.formattedMessage.substr(startIndex));logEntryContent+=preStartTag+textAfterLastMatch+preEndTag;if(isIe){wrappedLogEntryContent+=textAfterLastMatch;}}","logEntry.setContent(logEntryContent,wrappedLogEntryContent);var logEntryMatches=logEntry.getSearchMatches();this.matches=this.matches.concat(logEntryMatches);}else{logEntry.setSearchMatch(false);logEntry.setContent(logEntry.formattedMessage,logEntry.formattedMessage);}","return doesMatch;},removeMatches:function(logEntries){var matchesToRemoveCount=0;var currentMatchRemoved=false;var matchesToRemove=[];var i,iLen,j,jLen;for(i=0,iLen=this.matches.length;i<iLen;i++){for(j=0,jLen=logEntries.length;j<jLen;j++){if(this.matches[i].belongsTo(logEntries[j])){matchesToRemove.push(this.matches[i]);if(i===currentMatchIndex){currentMatchRemoved=true;}}}}","var newMatch=currentMatchRemoved?null:this.matches[currentMatchIndex];if(currentMatchRemoved){for(i=currentMatchIndex,iLen=this.matches.length;i<iLen;i++){if(this.matches[i].isVisible()&&!array_contains(matchesToRemove,this.matches[i])){newMatch=this.matches[i];break;}}}","for(i=0,iLen=matchesToRemove.length;i<iLen;i++){array_remove(this.matches,matchesToRemove[i]);matchesToRemove[i].remove();}","if(this.hasVisibleMatches()){if(newMatch===null){setCurrentMatchIndex(0);}else{var newMatchIndex=0;for(i=0,iLen=this.matches.length;i<iLen;i++){if(newMatch===this.matches[i]){newMatchIndex=i;break;}}","setCurrentMatchIndex(newMatchIndex);}}else{currentMatchIndex=null;displayNoMatches();}}};function getPageOffsetTop(el,container){var currentEl=el;var y=0;while(currentEl&&currentEl!=container){y+=currentEl.offsetTop;currentEl=currentEl.offsetParent;}","return y;}",'function scrollIntoView(el){var logContainer=logMainContainer;if(!$("wrap").checked){var logContainerLeft=logContainer.scrollLeft;var logContainerRight=logContainerLeft+logContainer.offsetWidth;var elLeft=el.offsetLeft;var elRight=elLeft+el.offsetWidth;if(elLeft<logContainerLeft||elRight>logContainerRight){logContainer.scrollLeft=elLeft-(logContainer.offsetWidth-el.offsetWidth)/2;}}',"var logContainerTop=logContainer.scrollTop;var logContainerBottom=logContainerTop+logContainer.offsetHeight;var elTop=getPageOffsetTop(el)-getToolBarsHeight();var elBottom=elTop+el.offsetHeight;if(elTop<logContainerTop||elBottom>logContainerBottom){logContainer.scrollTop=elTop-(logContainer.offsetHeight-el.offsetHeight)/2;}}","function Match(logEntryLevel,spanInMainDiv,spanInUnwrappedPre,spanInWrappedDiv){this.logEntryLevel=logEntryLevel;this.spanInMainDiv=spanInMainDiv;if(isIe){this.spanInUnwrappedPre=spanInUnwrappedPre;this.spanInWrappedDiv=spanInWrappedDiv;}","this.mainSpan=isIe?spanInUnwrappedPre:spanInMainDiv;}",'Match.prototype={equals:function(match){return this.mainSpan===match.mainSpan;},setCurrent:function(){if(isIe){addClass(this.spanInUnwrappedPre,"currentmatch");addClass(this.spanInWrappedDiv,"currentmatch");var elementToScroll=$("wrap").checked?this.spanInWrappedDiv:this.spanInUnwrappedPre;scrollIntoView(elementToScroll);}else{addClass(this.spanInMainDiv,"currentmatch");scrollIntoView(this.spanInMainDiv);}},belongsTo:function(logEntry){if(isIe){return isDescendant(this.spanInUnwrappedPre,logEntry.unwrappedPre);}else{return isDescendant(this.spanInMainDiv,logEntry.mainDiv);}},setNotCurrent:function(){if(isIe){removeClass(this.spanInUnwrappedPre,"currentmatch");removeClass(this.spanInWrappedDiv,"currentmatch");}else{removeClass(this.spanInMainDiv,"currentmatch");}},isOrphan:function(){return isOrphan(this.mainSpan);},isVisible:function(){return getCheckBox(this.logEntryLevel).checked;},remove:function(){if(isIe){this.spanInUnwrappedPre=null;this.spanInWrappedDiv=null;}else{this.spanInMainDiv=null;}}};var currentSearch=null;var currentMatchIndex=null;function doSearch(){var searchBox=$("searchBox");var searchTerm=searchBox.value;var isRegex=$("searchRegex").checked;var isCaseSensitive=$("searchCaseSensitive").checked;var i;if(searchTerm===""){$("searchReset").disabled=true;$("searchNav").style.display="none";removeClass(document.body,"searching");removeClass(searchBox,"hasmatches");removeClass(searchBox,"nomatches");for(i=0;i<logEntries.length;i++){logEntries[i].clearSearch();logEntries[i].setContent(logEntries[i].formattedMessage,logEntries[i].formattedMessage);}','currentSearch=null;setLogContainerHeight();}else{$("searchReset").disabled=false;$("searchNav").style.display="block";var searchRegex;var regexValid;if(isRegex){try{searchRegex=isCaseSensitive?new RegExp(searchTerm,"g"):new RegExp(searchTerm,"gi");regexValid=true;replaceClass(searchBox,"validregex","invalidregex");searchBox.title="Valid regex";}catch(ex){regexValid=false;replaceClass(searchBox,"invalidregex","validregex");searchBox.title="Invalid regex: "+(ex.message?ex.message:(ex.description?ex.description:"unknown error"));return;}}else{searchBox.title="";removeClass(searchBox,"validregex");removeClass(searchBox,"invalidregex");}','addClass(document.body,"searching");currentSearch=new Search(searchTerm,isRegex,searchRegex,isCaseSensitive);for(i=0;i<logEntries.length;i++){currentSearch.applyTo(logEntries[i]);}',"setLogContainerHeight();if(currentSearch.hasVisibleMatches()){setCurrentMatchIndex(0);displayMatches();}else{displayNoMatches();}}}","function updateSearchFromFilters(){if(currentSearch){if(currentSearch.hasMatches()){if(currentMatchIndex===null){currentMatchIndex=0;}","var currentMatch=currentSearch.matches[currentMatchIndex];if(currentMatch.isVisible()){displayMatches();setCurrentMatchIndex(currentMatchIndex);}else{currentMatch.setNotCurrent();var nextVisibleMatchIndex=currentSearch.getNextVisibleMatchIndex();if(nextVisibleMatchIndex>-1){setCurrentMatchIndex(nextVisibleMatchIndex);displayMatches();}else{displayNoMatches();}}}else{displayNoMatches();}}}","function refreshCurrentMatch(){if(currentSearch&&currentSearch.hasVisibleMatches()){setCurrentMatchIndex(currentMatchIndex);}}",'function displayMatches(){replaceClass($("searchBox"),"hasmatches","nomatches");$("searchBox").title=""+currentSearch.matches.length+" matches found";$("searchNav").style.display="block";setLogContainerHeight();}','function displayNoMatches(){replaceClass($("searchBox"),"nomatches","hasmatches");$("searchBox").title="No matches found";$("searchNav").style.display="none";setLogContainerHeight();}','function toggleSearchEnabled(enable){enable=(typeof enable=="undefined")?!$("searchDisable").checked:enable;$("searchBox").disabled=!enable;$("searchReset").disabled=!enable;$("searchRegex").disabled=!enable;$("searchNext").disabled=!enable;$("searchPrevious").disabled=!enable;$("searchCaseSensitive").disabled=!enable;$("searchNav").style.display=(enable&&($("searchBox").value!=="")&&currentSearch&&currentSearch.hasVisibleMatches())?"block":"none";if(enable){removeClass($("search"),"greyedout");addClass(document.body,"searching");if($("searchHighlight").checked){addClass(logMainContainer,"searchhighlight");}else{removeClass(logMainContainer,"searchhighlight");}','if($("searchFilter").checked){addClass(logMainContainer,"searchfilter");}else{removeClass(logMainContainer,"searchfilter");}','$("searchDisable").checked=!enable;}else{addClass($("search"),"greyedout");removeClass(document.body,"searching");removeClass(logMainContainer,"searchhighlight");removeClass(logMainContainer,"searchfilter");}',"setLogContainerHeight();}",'function toggleSearchFilter(){var enable=$("searchFilter").checked;if(enable){addClass(logMainContainer,"searchfilter");}else{removeClass(logMainContainer,"searchfilter");}',"refreshCurrentMatch();}",'function toggleSearchHighlight(){var enable=$("searchHighlight").checked;if(enable){addClass(logMainContainer,"searchhighlight");}else{removeClass(logMainContainer,"searchhighlight");}}','function clearSearch(){$("searchBox").value="";doSearch();}','function searchNext(){if(currentSearch!==null&&currentMatchIndex!==null){currentSearch.matches[currentMatchIndex].setNotCurrent();var nextMatchIndex=currentSearch.getNextVisibleMatchIndex();if(nextMatchIndex>currentMatchIndex||confirm("Reached the end of the page. Start from the top?")){setCurrentMatchIndex(nextMatchIndex);}}}','function searchPrevious(){if(currentSearch!==null&&currentMatchIndex!==null){currentSearch.matches[currentMatchIndex].setNotCurrent();var previousMatchIndex=currentSearch.getPreviousVisibleMatchIndex();if(previousMatchIndex<currentMatchIndex||confirm("Reached the start of the page. Continue from the bottom?")){setCurrentMatchIndex(previousMatchIndex);}}}',"function setCurrentMatchIndex(index){currentMatchIndex=index;currentSearch.matches[currentMatchIndex].setCurrent();}",'function addClass(el,cssClass){if(!hasClass(el,cssClass)){if(el.className){el.className+=" "+cssClass;}else{el.className=cssClass;}}}','function hasClass(el,cssClass){if(el.className){var classNames=el.className.split(" ");return array_contains(classNames,cssClass);}',"return false;}",'function removeClass(el,cssClass){if(hasClass(el,cssClass)){var existingClasses=el.className.split(" ");var newClasses=[];for(var i=0,len=existingClasses.length;i<len;i++){if(existingClasses[i]!=cssClass){newClasses[newClasses.length]=existingClasses[i];}}','el.className=newClasses.join(" ");}}',"function replaceClass(el,newCssClass,oldCssClass){removeClass(el,oldCssClass);addClass(el,newCssClass);}","function getElementsByClass(el,cssClass,tagName){var elements=el.getElementsByTagName(tagName);var matches=[];for(var i=0,len=elements.length;i<len;i++){if(hasClass(elements[i],cssClass)){matches.push(elements[i]);}}","return matches;}","function $(id){return document.getElementById(id);}","function isDescendant(node,ancestorNode){while(node!=null){if(node===ancestorNode){return true;}","node=node.parentNode;}","return false;}","function isOrphan(node){var currentNode=node;while(currentNode){if(currentNode==document.body){return false;}","currentNode=currentNode.parentNode;}","return true;}",'function escapeHtml(str){return str.replace(/&/g,"&amp;").replace(/[<]/g,"&lt;").replace(/>/g,"&gt;");}',"function getWindowWidth(){if(window.innerWidth){return window.innerWidth;}else if(document.documentElement&&document.documentElement.clientWidth){return document.documentElement.clientWidth;}else if(document.body){return document.body.clientWidth;}","return 0;}","function getWindowHeight(){if(window.innerHeight){return window.innerHeight;}else if(document.documentElement&&document.documentElement.clientHeight){return document.documentElement.clientHeight;}else if(document.body){return document.body.clientHeight;}","return 0;}",'function getToolBarsHeight(){return $("switches").offsetHeight;}','function getChromeHeight(){var height=getToolBarsHeight();if(showCommandLine){height+=$("commandLine").offsetHeight;}',"return height;}",'function setLogContainerHeight(){if(logMainContainer){var windowHeight=getWindowHeight();$("body").style.height=getWindowHeight()+"px";logMainContainer.style.height=""+','Math.max(0,windowHeight-getChromeHeight())+"px";}}','function setCommandInputWidth(){if(showCommandLine){$("command").style.width=""+Math.max(0,$("commandLineContainer").offsetWidth-','($("evaluateButton").offsetWidth+13))+"px";}}',"window.onresize=function(){setCommandInputWidth();setLogContainerHeight();};if(!Array.prototype.push){Array.prototype.push=function(){for(var i=0,len=arguments.length;i<len;i++){this[this.length]=arguments[i];}","return this.length;};}","if(!Array.prototype.pop){Array.prototype.pop=function(){if(this.length>0){var val=this[this.length-1];this.length=this.length-1;return val;}};}","if(!Array.prototype.shift){Array.prototype.shift=function(){if(this.length>0){var firstItem=this[0];for(var i=0,len=this.length-1;i<len;i++){this[i]=this[i+1];}","this.length=this.length-1;return firstItem;}};}","if(!Array.prototype.splice){Array.prototype.splice=function(startIndex,deleteCount){var itemsAfterDeleted=this.slice(startIndex+deleteCount);var itemsDeleted=this.slice(startIndex,startIndex+deleteCount);this.length=startIndex;var argumentsArray=[];for(var i=0,len=arguments.length;i<len;i++){argumentsArray[i]=arguments[i];}","var itemsToAppend=(argumentsArray.length>2)?itemsAfterDeleted=argumentsArray.slice(2).concat(itemsAfterDeleted):itemsAfterDeleted;for(i=0,len=itemsToAppend.length;i<len;i++){this.push(itemsToAppend[i]);}","return itemsDeleted;};}","function array_remove(arr,val){var index=-1;for(var i=0,len=arr.length;i<len;i++){if(arr[i]===val){index=i;break;}}","if(index>=0){arr.splice(index,1);return index;}else{return false;}}","function array_removeFromStart(array,numberToRemove){if(Array.prototype.splice){array.splice(0,numberToRemove);}else{for(var i=numberToRemove,len=array.length;i<len;i++){array[i-numberToRemove]=array[i];}","array.length=array.length-numberToRemove;}","return array;}","function array_contains(arr,val){for(var i=0,len=arr.length;i<len;i++){if(arr[i]==val){return true;}}","return false;}","function getErrorMessage(ex){if(ex.message){return ex.message;}else if(ex.description){return ex.description;}",'return""+ex;}',"function moveCaretToEnd(input){if(input.setSelectionRange){input.focus();var length=input.value.length;input.setSelectionRange(length,length);}else if(input.createTextRange){var range=input.createTextRange();range.collapse(false);range.select();}","input.focus();}",'function stopPropagation(evt){if(evt.stopPropagation){evt.stopPropagation();}else if(typeof evt.cancelBubble!="undefined"){evt.cancelBubble=true;}}',"function getEvent(evt){return evt?evt:event;}","function getTarget(evt){return evt.target?evt.target:evt.srcElement;}",'function getRelatedTarget(evt){if(evt.relatedTarget){return evt.relatedTarget;}else if(evt.srcElement){switch(evt.type){case"mouseover":return evt.fromElement;case"mouseout":return evt.toElement;default:return evt.srcElement;}}}',"function cancelKeyEvent(evt){evt.returnValue=false;stopPropagation(evt);}",'function evalCommandLine(){var expr=$("command").value;evalCommand(expr);$("command").value="";}',"function evalLastCommand(){if(lastCommand!=null){evalCommand(lastCommand);}}",'var lastCommand=null;var commandHistory=[];var currentCommandIndex=0;function evalCommand(expr){if(appender){appender.evalCommandAndAppend(expr);}else{var prefix=">>> "+expr+"\\r\\n";try{log("INFO",prefix+eval(expr));}catch(ex){log("ERROR",prefix+"Error: "+getErrorMessage(ex));}}',"if(expr!=commandHistory[commandHistory.length-1]){commandHistory.push(expr);if(appender){appender.storeCommandHistory(commandHistory);}}","currentCommandIndex=(expr==commandHistory[currentCommandIndex])?currentCommandIndex+1:commandHistory.length;lastCommand=expr;}","//]]>","</script>",'<style type="text/css">',"body{background-color:white;color:black;padding:0;margin:0;font-family:tahoma,verdana,arial,helvetica,sans-serif;overflow:hidden}div#switchesContainer input{margin-bottom:0}div.toolbar{border-top:solid #ffffff 1px;border-bottom:solid #aca899 1px;background-color:#f1efe7;padding:3px 5px;font-size:68.75%}div.toolbar,div#search input{font-family:tahoma,verdana,arial,helvetica,sans-serif}div.toolbar input.button{padding:0 5px;font-size:100%}div.toolbar input.hidden{display:none}div#switches input#clearButton{margin-left:20px}div#levels label{font-weight:bold}div#levels label,div#options label{margin-right:5px}div#levels label#wrapLabel{font-weight:normal}div#search label{margin-right:10px}div#search label.searchboxlabel{margin-right:0}div#search input{font-size:100%}div#search input.validregex{color:green}div#search input.invalidregex{color:red}div#search input.nomatches{color:white;background-color:#ff6666}div#search input.nomatches{color:white;background-color:#ff6666}div#searchNav{display:none}div#commandLine{display:none}div#commandLine input#command{font-size:100%;font-family:Courier New,Courier}div#commandLine input#evaluateButton{}*.greyedout{color:gray !important;border-color:gray !important}*.greyedout *.alwaysenabled{color:black}*.unselectable{-khtml-user-select:none;-moz-user-select:none;user-select:none}div#log{font-family:Courier New,Courier;font-size:75%;width:100%;overflow:auto;clear:both;position:relative}div.group{border-color:#cccccc;border-style:solid;border-width:1px 0 1px 1px;overflow:visible}div.oldIe div.group,div.oldIe div.group *,div.oldIe *.logentry{height:1%}div.group div.groupheading span.expander{border:solid black 1px;font-family:Courier New,Courier;font-size:0.833em;background-color:#eeeeee;position:relative;top:-1px;color:black;padding:0 2px;cursor:pointer;cursor:hand;height:1%}div.group div.groupcontent{margin-left:10px;padding-bottom:2px;overflow:visible}div.group div.expanded{display:block}div.group div.collapsed{display:none}*.logentry{overflow:visible;display:none;white-space:pre}span.pre{white-space:pre}pre.unwrapped{display:inline !important}pre.unwrapped pre.pre,div.wrapped pre.pre{display:inline}div.wrapped pre.pre{white-space:normal}div.wrapped{display:none}body.searching *.logentry span.currentmatch{color:white !important;background-color:green !important}body.searching div.searchhighlight *.logentry span.searchterm{color:black;background-color:yellow}div.wrap *.logentry{white-space:normal !important;border-width:0 0 1px 0;border-color:#dddddd;border-style:dotted}div.wrap #log_wrapped,#log_unwrapped{display:block}div.wrap #log_unwrapped,#log_wrapped{display:none}div.wrap *.logentry span.pre{overflow:visible;white-space:normal}div.wrap *.logentry pre.unwrapped{display:none}div.wrap *.logentry span.wrapped{display:inline}div.searchfilter *.searchnonmatch{display:none !important}div#log *.TRACE,label#label_TRACE{color:#666666}div#log *.DEBUG,label#label_DEBUG{color:green}div#log *.INFO,label#label_INFO{color:#000099}div#log *.WARN,label#label_WARN{color:#999900}div#log *.ERROR,label#label_ERROR{color:red}div#log *.FATAL,label#label_FATAL{color:#660066}div.TRACE#log *.TRACE,div.DEBUG#log *.DEBUG,div.INFO#log *.INFO,div.WARN#log *.WARN,div.ERROR#log *.ERROR,div.FATAL#log *.FATAL{display:block}div#log div.separator{background-color:#cccccc;margin:5px 0;line-height:1px}","</style>","</head>",'<body id="body">','<div id="switchesContainer">','<div id="switches">','<div id="levels" class="toolbar">',"Filters:",'<input type="checkbox" id="switch_TRACE" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide trace messages" /><label for="switch_TRACE" id="label_TRACE">trace</label>','<input type="checkbox" id="switch_DEBUG" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide debug messages" /><label for="switch_DEBUG" id="label_DEBUG">debug</label>','<input type="checkbox" id="switch_INFO" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide info messages" /><label for="switch_INFO" id="label_INFO">info</label>','<input type="checkbox" id="switch_WARN" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide warn messages" /><label for="switch_WARN" id="label_WARN">warn</label>','<input type="checkbox" id="switch_ERROR" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide error messages" /><label for="switch_ERROR" id="label_ERROR">error</label>','<input type="checkbox" id="switch_FATAL" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide fatal messages" /><label for="switch_FATAL" id="label_FATAL">fatal</label>','<input type="checkbox" id="switch_ALL" onclick="toggleAllLevels(); applyFilters()" checked="checked" title="Show/hide all messages" /><label for="switch_ALL" id="label_ALL">all</label>',"</div>",'<div id="search" class="toolbar">','<label for="searchBox" class="searchboxlabel">Search:</label> <input type="text" id="searchBox" onclick="toggleSearchEnabled(true)" onkeyup="scheduleSearch()" size="20" />','<input type="button" id="searchReset" disabled="disabled" value="Reset" onclick="clearSearch()" class="button" title="Reset the search" />','<input type="checkbox" id="searchRegex" onclick="doSearch()" title="If checked, search is treated as a regular expression" /><label for="searchRegex">Regex</label>','<input type="checkbox" id="searchCaseSensitive" onclick="doSearch()" title="If checked, search is case sensitive" /><label for="searchCaseSensitive">Match case</label>','<input type="checkbox" id="searchDisable" onclick="toggleSearchEnabled()" title="Enable/disable search" /><label for="searchDisable" class="alwaysenabled">Disable</label>','<div id="searchNav">','<input type="button" id="searchNext" disabled="disabled" value="Next" onclick="searchNext()" class="button" title="Go to the next matching log entry" />','<input type="button" id="searchPrevious" disabled="disabled" value="Previous" onclick="searchPrevious()" class="button" title="Go to the previous matching log entry" />','<input type="checkbox" id="searchFilter" onclick="toggleSearchFilter()" title="If checked, non-matching log entries are filtered out" /><label for="searchFilter">Filter</label>','<input type="checkbox" id="searchHighlight" onclick="toggleSearchHighlight()" title="Highlight matched search terms" /><label for="searchHighlight" class="alwaysenabled">Highlight all</label>',"</div>","</div>",'<div id="options" class="toolbar">',"Options:",'<input type="checkbox" id="enableLogging" onclick="toggleLoggingEnabled()" checked="checked" title="Enable/disable logging" /><label for="enableLogging" id="enableLoggingLabel">Log</label>','<input type="checkbox" id="wrap" onclick="toggleWrap()" title="Enable / disable word wrap" /><label for="wrap" id="wrapLabel">Wrap</label>','<input type="checkbox" id="newestAtTop" onclick="toggleNewestAtTop()" title="If checked, causes newest messages to appear at the top" /><label for="newestAtTop" id="newestAtTopLabel">Newest at the top</label>','<input type="checkbox" id="scrollToLatest" onclick="toggleScrollToLatest()" checked="checked" title="If checked, window automatically scrolls to a new message when it is added" /><label for="scrollToLatest" id="scrollToLatestLabel">Scroll to latest</label>','<input type="button" id="clearButton" value="Clear" onclick="clearLog()" class="button" title="Clear all log messages"  />','<input type="button" id="hideButton" value="Hide" onclick="hide()" class="hidden button" title="Hide the console" />','<input type="button" id="closeButton" value="Close" onclick="closeWindow()" class="hidden button" title="Close the window" />',"</div>","</div>","</div>",'<div id="log" class="TRACE DEBUG INFO WARN ERROR FATAL"></div>','<div id="commandLine" class="toolbar">','<div id="commandLineContainer">','<input type="text" id="command" title="Enter a JavaScript command here and hit return or press \'Evaluate\'" />','<input type="button" id="evaluateButton" value="Evaluate" class="button" title="Evaluate the command" onclick="evalCommandLine()" />',"</div>","</div>","</body>","</html>",""];
},i=[];ConsoleAppender=function(){};var r=1;ConsoleAppender.prototype=new Appender,ConsoleAppender.prototype.create=function(t,e,s,o,a,c,l,h){function u(t,e){this.loggingEvent=t,this.levelName=t.level.name,this.formattedMessage=e}function p(t,e){this.name=t,this.initiallyExpanded=e}function d(){}var f=this,g=!1,m=!1,v=!1,y=!1,_=[],b=!0,x=r++;o=extractBooleanFromParam(o,this.defaults.initiallyMinimized),s=extractBooleanFromParam(s,this.defaults.lazyInit),a=extractBooleanFromParam(a,this.defaults.useDocumentWrite);var w=this.defaults.newestMessageAtTop,E=this.defaults.scrollToLatestMessage;c=c?c:this.defaults.width,l=l?l:this.defaults.height;var S=this.defaults.maxMessages,T=this.defaults.showCommandLine,L=this.defaults.commandLineObjectExpansionDepth,C=this.defaults.showHideButton,A=this.defaults.showCloseButton;this.setLayout(this.defaults.layout);var j,k,I,M,P,D=t?"InPageAppender":"PopUpAppender",R=function(t){return m?(handleError(D+": configuration option '"+t+"' may not be set after the appender has been initialized"),!1):!0},N=function(){return v&&b&&!y};this.isNewestMessageAtTop=function(){return w},this.setNewestMessageAtTop=function(t){w=bool(t),N()&&M().setNewestAtTop(w)},this.isScrollToLatestMessage=function(){return E},this.setScrollToLatestMessage=function(t){E=bool(t),N()&&M().setScrollToLatest(E)},this.getWidth=function(){return c},this.setWidth=function(t){R("width")&&(c=extractStringFromParam(t,c))},this.getHeight=function(){return l},this.setHeight=function(t){R("height")&&(l=extractStringFromParam(t,l))},this.getMaxMessages=function(){return S},this.setMaxMessages=function(t){S=extractIntFromParam(t,S),N()&&M().setMaxMessages(S)},this.isShowCommandLine=function(){return T},this.setShowCommandLine=function(t){T=bool(t),N()&&M().setShowCommandLine(T)},this.isShowHideButton=function(){return C},this.setShowHideButton=function(t){C=bool(t),N()&&M().setShowHideButton(C)},this.isShowCloseButton=function(){return A},this.setShowCloseButton=function(t){A=bool(t),N()&&M().setShowCloseButton(A)},this.getCommandLineObjectExpansionDepth=function(){return L},this.setCommandLineObjectExpansionDepth=function(t){L=extractIntFromParam(t,L)};var O=o;this.isInitiallyMinimized=function(){return o},this.setInitiallyMinimized=function(t){R("initiallyMinimized")&&(o=bool(t),O=o)},this.isUseDocumentWrite=function(){return a},this.setUseDocumentWrite=function(t){R("useDocumentWrite")&&(a=bool(t))},u.prototype.append=function(){M().log(this.levelName,this.formattedMessage)},p.prototype.append=function(){M().group(this.name,this.initiallyExpanded)},d.prototype.append=function(){M().groupEnd()};var F=function(){I(),g?y&&et&&k():j(),I()&&B()};this.append=function(t){if(b){var e=f.getLayout().formatWithException(t);_.push(new u(t,e)),F()}},this.group=function(t,e){b&&(_.push(new p(t,e)),F())},this.groupEnd=function(){b&&(_.push(new d),F())};var B=function(){for(;_.length>0;)_.shift().append();h&&M().focus()};this.setAddedToLogger=function(t){this.loggers.push(t),enabled&&!s&&j()},this.clear=function(){N()&&M().clearLog(),_.length=0},this.focus=function(){N()&&M().focus()},this.focusCommandLine=function(){N()&&M().focusCommandLine()},this.focusSearch=function(){N()&&M().focusSearch()};var H=window;this.getCommandWindow=function(){return H},this.setCommandWindow=function(t){H=t},this.executeLastCommand=function(){N()&&M().evalLastCommand()};var U=new PatternLayout("%m");this.getCommandLayout=function(){return U},this.setCommandLayout=function(t){U=t},this.evalCommandAndAppend=function(t){var e={appendResult:!0,isError:!1},n="";try{var i,r;!H.eval&&H.execScript&&H.execScript("null");var s={};for(r=0,len=q.length;r<len;r++)s[q[r][0]]=q[r][1];var o=[],a=function(t){o.push([t,H[t]])};a("appender"),H.appender=f,a("commandReturnValue"),H.commandReturnValue=e,a("commandLineFunctionsHash"),H.commandLineFunctionsHash=s;var c=function(t){a(t),H[t]=function(){return this.commandLineFunctionsHash[t](f,arguments,e)}};for(r=0,len=q.length;r<len;r++)c(q[r][0]);for(H===window&&H.execScript?(a("evalExpr"),a("result"),window.evalExpr=t,H.execScript("window.result=eval(window.evalExpr);"),i=window.result):i=H.eval(t),n=isUndefined(i)?i:formatObjectExpansion(i,L),r=0,len=o.length;r<len;r++)H[o[r][0]]=o[r][1]}catch(l){n="Error evaluating command: "+getExceptionStringRep(l),e.isError=!0}if(e.appendResult){var h=">>> "+t;isUndefined(n)||(h+=newLine+n);var u=e.isError?Level.ERROR:Level.INFO,p=new LoggingEvent(null,new Date,u,[h],null),d=this.getLayout();this.setLayout(U),this.append(p),this.setLayout(d)}};var q=i.concat([]);this.addCommandLineFunction=function(t,e){q.push([t,e])};var X="log4javascriptCommandHistory";this.storeCommandHistory=function(t){setCookie(X,t.join(","))};var G=function(t){var e=n();t.open();for(var i=0,r=e.length;r>i;i++)t.writeln(e[i]);t.close()};this.setEventTypes(["load","unload"]);var W=function(){var t=M();t.setAppender(f),t.setNewestAtTop(w),t.setScrollToLatest(E),t.setMaxMessages(S),t.setShowCommandLine(T),t.setShowHideButton(C),t.setShowCloseButton(A),t.setMainWindow(window);var e=getCookie(X);e&&(t.commandHistory=e.split(","),t.currentCommandIndex=t.commandHistory.length),f.dispatchEvent("load",{win:t})};this.unload=function(){logLog.debug("unload "+this+", caller: "+this.unload.caller),y||(logLog.debug("really doing unload "+this),y=!0,v=!1,m=!1,f.dispatchEvent("unload",{}))};var V=function(t,e,n,i){function r(){try{y&&clearInterval(s),t(M())&&(clearInterval(s),n())}catch(e){clearInterval(s),b=!1,handleError(i,e)}}var s=setInterval(r,e)},Q=function(){var t=document.domain!=location.hostname;return a?"":getBaseUrl()+"console.html"+(t?"?log4javascript_domain="+escape(document.domain):"")};if(t){var Y=null,z=[];this.addCssProperty=function(t,e){R("cssProperties")&&z.push([t,e])};var $,J=!1,K=uniqueId+"_InPageAppender_"+x;this.hide=function(){g&&m&&(N()&&M().$("command").blur(),$.style.display="none",O=!0)},this.show=function(){g&&(m?($.style.display="block",this.setShowCommandLine(T),O=!1):J||k(!0))},this.isVisible=function(){return!O&&!y},this.close=function(t){y||t&&!confirm("This will permanently remove the console from the page. No more messages will be logged. Do you wish to continue?")||($.parentNode.removeChild($),this.unload())},P=function(){function t(){try{o||f.show(),W(),v=!0,B()}catch(t){b=!1,handleError(n,t)}}function e(){try{var e=function(t){return isLoaded(t)};a&&G(M().document),e(M())?t():V(e,100,t,n)}catch(i){b=!1,handleError(n,i)}}var n="InPageAppender.open: unable to create console iframe";O=!1,$=Y.appendChild(document.createElement("div")),$.style.width=c,$.style.height=l,$.style.border="solid gray 1px";for(var i=0,r=z.length;r>i;i++)$.style[z[i][0]]=z[i][1];var s=a?"":" src='"+Q()+"'";$.innerHTML="<iframe id='"+K+"' name='"+K+"' width='100%' height='100%' frameborder='0'"+s+" scrolling='no'></iframe>",y=!1;var h=function(t){try{return bool(t)&&bool(t.document)}catch(e){return!1}};h(M())?e():V(h,100,e,n),m=!0},k=function(t){if(t||!o){var n=function(){if(e)try{var t=document.getElementById(e);1==t.nodeType&&(Y=t),P()}catch(n){handleError("InPageAppender.init: invalid container element '"+e+"' supplied",n)}else Y=document.createElement("div"),Y.style.position="fixed",Y.style.left="0",Y.style.right="0",Y.style.bottom="0",document.body.appendChild(Y),f.addCssProperty("borderWidth","1px 0 0 0"),f.addCssProperty("zIndex",1e6),P()};pageLoaded&&e&&e.appendChild?(Y=e,P()):pageLoaded?n():log4javascript.addEventListener("load",n),J=!0}},j=function(){k(),g=!0},M=function(){var t=window.frames[K];return t?t:void 0},I=function(){return b&&!y?(m&&!v&&M()&&isLoaded(M())&&(v=!0),v):!1}}else{var Z=f.defaults.useOldPopUp,tt=f.defaults.complainAboutPopUpBlocking,et=this.defaults.reopenWhenClosed;this.isUseOldPopUp=function(){return Z},this.setUseOldPopUp=function(t){R("useOldPopUp")&&(Z=bool(t))},this.isComplainAboutPopUpBlocking=function(){return tt},this.setComplainAboutPopUpBlocking=function(t){R("complainAboutPopUpBlocking")&&(tt=bool(t))},this.isFocusPopUp=function(){return h},this.setFocusPopUp=function(t){h=bool(t)},this.isReopenWhenClosed=function(){return et},this.setReopenWhenClosed=function(t){et=bool(t)},this.close=function(){logLog.debug("close "+this);try{nt.close(),this.unload()}catch(t){}},this.hide=function(){logLog.debug("hide "+this),N()&&this.close()},this.show=function(){logLog.debug("show "+this),m||P()},this.isVisible=function(){return I()};var nt;P=function(){function t(){M().setCloseIfOpenerCloses(!Z||!a),W(),v=!0,B(),V(o,500,h,"PopUpAppender.checkPopUpClosed: error checking pop-up window")}var e="width="+c+",height="+l+",status,resizable",n="";try{var i=window.frameElement;i&&(n="_"+i.tagName+"_"+(i.name||i.id||""))}catch(r){n="_inaccessibleParentFrame"}var s="PopUp_"+location.host.replace(/[^a-z0-9]/gi,"_")+"_"+x+n;Z&&a||(s=s+"_"+uniqueId);var o=function(t){if(y)return!0;try{return bool(t)&&t.closed}catch(e){}return!1},h=function(){y||f.unload()};try{if(nt=window.open(Q(),s,e),y=!1,m=!0,nt&&nt.document)if(a&&Z&&isLoaded(nt))nt.mainPageReloaded(),t();else{a&&G(nt.document);var u=function(t){return bool(t)&&isLoaded(t)};isLoaded(nt)?t():V(u,100,t,"PopUpAppender.init: unable to create console window")}else b=!1,logLog.warn("PopUpAppender.init: pop-ups blocked, please unblock to use PopUpAppender"),tt&&handleError("log4javascript: pop-up windows appear to be blocked. Please unblock them to use pop-up logging.")}catch(p){handleError("PopUpAppender.init: error creating pop-up",p)}},k=function(){o||P()},j=function(){k(),g=!0},M=function(){return nt},I=function(){if(b&&!isUndefined(nt)&&!y){if(nt.closed||v&&isUndefined(nt.closed))return f.unload(),logLog.debug("PopUpAppender: pop-up closed"),!1;!v&&isLoaded(nt)&&(v=!0)}return b&&v&&!y}}this.getConsoleWindow=M},ConsoleAppender.addGlobalCommandLineFunction=function(t,e){i.push([t,e])},t.prototype=new ConsoleAppender,t.prototype.defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:!1,focusPopUp:!1,lazyInit:!0,useOldPopUp:!0,complainAboutPopUpBlocking:!0,newestMessageAtTop:!1,scrollToLatestMessage:!0,width:"600",height:"400",reopenWhenClosed:!1,maxMessages:null,showCommandLine:!0,commandLineObjectExpansionDepth:1,showHideButton:!1,showCloseButton:!0,useDocumentWrite:!0},t.prototype.toString=function(){return"PopUpAppender"},log4javascript.PopUpAppender=t,e.prototype=new ConsoleAppender,e.prototype.defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:!1,lazyInit:!0,newestMessageAtTop:!1,scrollToLatestMessage:!0,width:"100%",height:"220px",maxMessages:null,showCommandLine:!0,commandLineObjectExpansionDepth:1,showHideButton:!1,showCloseButton:!1,showLogEntryDeleteButtons:!0,useDocumentWrite:!0},e.prototype.toString=function(){return"InPageAppender"},log4javascript.InPageAppender=e,log4javascript.InlineAppender=e}(),function(){function t(t){var e=0;for(var n in t)e=Math.max(toStr(n).length,e);var i=[];for(n in t){var r,s="  "+padWithSpaces(toStr(n),e+2);try{r=splitIntoLines(toStr(t[n])).join(padWithSpaces(newLine,e+6))}catch(o){r="[Error obtaining property. Details: "+getExceptionMessage(o)+"]"}i.push(s+r)}return i.join(newLine)}function e(t,n,i,c,l){function h(t){return t.nodeType==r.TEXT_NODE&&/^[ \t\r\n]*$/.test(t.nodeValue)}function u(t){return t.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function p(t){for(var e=t.style.cssText.split(";"),n="",i=0,r=e.length;r>i;i++){var s=e[i].split(":"),o=[];/^\s*$/.test(s[0])||o.push(trim(s[0]).toLowerCase()+":"+trim(s[1])),n=o.join(";")}return n}function d(t){if(t.prefix)return t.prefix;if(t.outerHTML){var e=new RegExp("<([^:]+):"+t.tagName+"[^>]*>","i");if(e.test(t.outerHTML))return RegExp.$1.toLowerCase()}return""}n="undefined"==typeof n?!0:!!n,"string"!=typeof i&&(i=""),c=!!c,l=!!l;var f,g,m,v="<",y=">";if(!n||t.nodeType==r.DOCUMENT_FRAGMENT_NODE){for(f="",g=0,m=t.childNodes.length;m>g;g++)f+=e(t.childNodes[g],!0,i+a);return f}switch(t.nodeType){case r.ELEMENT_NODE:var _=t.tagName.toLowerCase();f=c?newLine+i:"",f+=v;var b=d(t),x=!!b;for(x&&(f+=b+":"),f+=_,g=0,m=t.attributes.length;m>g;g++){var w=t.attributes[g];w.specified&&null!==w.nodeValue&&"style"!==w.nodeName.toLowerCase()&&"string"==typeof w.nodeValue&&0!==w.nodeName.indexOf("_moz")&&(f+=" "+w.nodeName.toLowerCase()+'="',f+=u(w.nodeValue),f+='"')}if(t.style.cssText){var E=p(t);""!==E&&(f+=' style="'+p(t)+'"')}if(array_contains(o,_)||x&&!t.hasChildNodes())f+="/"+y;else{f+=y;var S=!(1===t.childNodes.length&&t.childNodes[0].nodeType===r.TEXT_NODE),T=array_contains(s,_);for(g=0,m=t.childNodes.length;m>g;g++)f+=e(t.childNodes[g],!0,i+a,S,T);var L=v+"/"+_+y;f+=S?newLine+i+L:L}return f;case r.TEXT_NODE:if(h(t))f="";else{if(l)f=t.nodeValue;else{var C=splitIntoLines(trim(t.nodeValue)),A=[];for(g=0,m=C.length;m>g;g++)A[g]=trim(C[g]);f=A.join(newLine+i)}c&&(f=newLine+i+f)}return f;case r.CDATA_SECTION_NODE:return"<![CDATA["+t.nodeValue+"]]>"+newLine;case r.DOCUMENT_NODE:for(f="",g=0,m=t.childNodes.length;m>g;g++)f+=e(t.childNodes[g],!0,i);return f;default:return""}}function n(){ConsoleAppender.addGlobalCommandLineFunction("$",function(t,e,n){return document.getElementById(e[0])}),ConsoleAppender.addGlobalCommandLineFunction("dir",function(e,n,i){for(var r=[],s=0,o=n.length;o>s;s++)r[s]=t(n[s]);return r.join(newLine+newLine)}),ConsoleAppender.addGlobalCommandLineFunction("dirxml",function(t,n,i){for(var r=[],s=0,o=n.length;o>s;s++)r[s]=e(n[s]);return r.join(newLine+newLine)}),ConsoleAppender.addGlobalCommandLineFunction("cd",function(t,e,n){var i,r;return 0===e.length||""===e[0]?(i=window,r="Command line set to run in main window"):e[0].window==e[0]?(i=e[0],r="Command line set to run in frame '"+e[0].name+"'"):(i=window.frames[e[0]],i?r="Command line set to run in frame '"+e[0]+"'":(n.isError=!0,r="Frame '"+e[0]+"' does not exist",i=t.getCommandWindow())),t.setCommandWindow(i),r}),ConsoleAppender.addGlobalCommandLineFunction("clear",function(t,e,n){n.appendResult=!1,t.clear()}),ConsoleAppender.addGlobalCommandLineFunction("keys",function(t,e,n){var i=[];for(var r in e[0])i.push(r);return i}),ConsoleAppender.addGlobalCommandLineFunction("values",function(t,e,n){var i=[];for(var r in e[0])try{i.push(e[0][r])}catch(s){logLog.warn("values(): Unable to obtain value for key "+r+". Details: "+getExceptionMessage(s))}return i}),ConsoleAppender.addGlobalCommandLineFunction("expansionDepth",function(t,e,n){var i=parseInt(e[0],10);return isNaN(i)||0>i?(n.isError=!0,""+e[0]+" is not a valid expansion depth"):(t.setCommandLineObjectExpansionDepth(i),"Object expansion depth set to "+i)})}function i(){n()}var r={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},s=["script","pre"],o=["br","img","hr","param","link","area","input","col","base","meta"],a="  ";i()}(),log4javascript.setDocumentReady=function(){pageLoaded=!0,log4javascript.dispatchEvent("load",{})},window.addEventListener)window.addEventListener("load",log4javascript.setDocumentReady,!1);else if(window.attachEvent)window.attachEvent("onload",log4javascript.setDocumentReady);else{var oldOnload=window.onload;"function"!=typeof window.onload?window.onload=log4javascript.setDocumentReady:window.onload=function(t){oldOnload&&oldOnload(t),log4javascript.setDocumentReady()}}return log4javascript},this),define("util/log",["require","lib/log4javascript","lib/jquery"],function(t){var e=t("lib/log4javascript"),n=t("lib/jquery"),i=new e.InPageAppender(n("#logger")[0],!1,!1);i.setLayout(new e.PatternLayout("%d{HH:mm:ss.SSS} [%p] [%c] %m%n")),e.setDocumentReady();return function(t){var n=e.getLogger(t);return n.addAppender(i),n}}),function(){"use strict";function t(){}function e(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function n(t){return function(){return this[t].apply(this,arguments)}}var i=t.prototype,r=this,s=r.EventEmitter;i.getListeners=function(t){var e,n,i=this._getEvents();if(t instanceof RegExp){e={};for(n in i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n])}else e=i[t]||(i[t]=[]);return e},i.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},i.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},i.addListener=function(t,n){var i,r=this.getListenersAsObject(t),s="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===e(r[i],n)&&r[i].push(s?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,n){var i,r,s=this.getListenersAsObject(t);for(r in s)s.hasOwnProperty(r)&&(i=e(s[r],n),-1!==i&&s[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,n){var i,r,s=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)s.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(r=e[i])&&("function"==typeof r?s.call(this,i,r):o.call(this,i,r));return this},i.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if(t instanceof RegExp)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(t,e){var n,i,r,s,o=this.getListenersAsObject(t);for(r in o)if(o.hasOwnProperty(r))for(i=o[r].length;i--;)n=o[r][i],n.once===!0&&this.removeListener(t,n.listener),s=n.listener.apply(this,e||[]),s===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},i.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return r.EventEmitter=s,t},"function"==typeof define&&define.amd?define("lib/events",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:r.EventEmitter=t}.call(this),function(t,e,n){"function"==typeof define&&define.amd?define("lib/heir",n):"object"==typeof exports?module.exports=n():e[t]=n()}("heir",this,function(){"use strict";var t={inherit:function(e,n,i){var r=e.prototype=t.createObject(n.prototype);r.constructor=e,(i||"undefined"==typeof i)&&(e._super=n.prototype)},createObject:Object.create||function(t){var e=function(){};return e.prototype=t,new e},mixin:function(e,n){return t.merge(e.prototype,n)},merge:function(e,n){var i;for(i in n)t.hasOwn(n,i)&&(e[i]=n[i])},hasOwn:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}};return t}),define("Events",["require","lib/events","lib/heir"],function(t){var e=t("lib/events"),n=t("lib/heir");return{initialise:function(t){n.mixin(t,e.prototype)}}}),define("Projectile",["require","util/log","Events"],function(t){var e=t("util/log")("Projectile"),n=t("Events"),i=function(t){this._body=t.body;var n=setTimeout(this.die.bind(this),1e3);this.on("collide",function(){e.debug("Projectile forced death"),clearTimeout(n),setTimeout(this.die.bind(this),0)}.bind(this)),this._flip=100*Math.random()>50};return n.initialise(i),i.prototype.update=function(t){},i.prototype.die=function(){e.debug("Projectile dying"),this.trigger("death")},i.prototype.draw=function(t,e){if(!(this._flip=!this._flip)){var n=this._body.p,i=cp.v(this._body.p.x+.01*this._body.vx,this._body.p.y+.01*this._body.vy),r=t.createLinearGradient(n.x,n.y,i.x,i.y);r.addColorStop(0,"rgba(0, 0, 255, 0)"),r.addColorStop(.5,"rgba(0, 0, 255, 0.8)"),r.addColorStop(1,"rgba(255, 255, 255, 0.9)"),t.strokeStyle=r,t.lineWidth=2,t.lineCap="round",t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(i.x,i.y),t.stroke()}},i});var VELOCITY_FUZZ=10;define("Actor",["require","Projectile","ChipmunkCharacterHandling","Events"],function(t){function e(t,e){t.save(),e.updateContext(t),e.draw(t),t.restore()}var n=(t("Projectile"),t("ChipmunkCharacterHandling"),t("Events")),i=function(t){this._z=t.z||0,this._sprite=t.sprite,this._body=t.body,this._controller=t.controller,this._room=t.room,this._weapon=t.weapon,this._originalFrameRate=this._sprite.spriteSheet.framerate};return n.initialise(i),i.prototype.update=function(t){var e=this._calculateNextSprite(this._body.grounded);this._sprite.currentAnimation!==e&&this._sprite.gotoAndPlay(e),this._body.p.y>1500&&console.log("ded"),this._slowDownFramerateWithVelocity(),this._body.grounded&&this._sprite.advance(t.delta)},i.prototype.draw=function(t,n){return this._remainingDodge?void this.circle.translation.set(this._body.p.x,this._body.p.y-30):(this._sprite.x=this._body.p.x,this._sprite.y=this._body.p.y,void e(t,this._sprite))},i.prototype._slowDownFramerateWithVelocity=function(){var t=Math.abs(this._body.vx);if(t>VELOCITY_FUZZ&&300>t){var e=t/300,n=this._originalFrameRate*e;this._sprite.spriteSheet.framerate=n}else this._sprite.spriteSheet.framerate=this._originalFrameRate},i.prototype._calculateNextSprite=function(t){var e="idle";return t&&Math.abs(this._body.vx)>VELOCITY_FUZZ&&(this._controller.left||this._controller.right)&&(e="run",this._body.vx<0?this._sprite.scaleX=-1:this._body.vx>0&&(this._sprite.scaleX=1)),e},i}),define("actors/Weapon",["require","Projectile","lib/sound"],function(t){var e=t("Projectile"),n=t("lib/sound"),i=function(t){this._room=t.room,this._cooldownLength=t.cooldown||200,this._cooldown=0,this._burstLength=(t.burst||1)-1,this._burst=0};return i.prototype.update=function(t){this._cooldown>0&&(this._cooldown-=t.delta)},i.prototype.draw=function(t,e){},i.prototype.fire=function(t,i){function r(){var t=200;return Math.random()*(2*t)-t}if(!(this._cooldown>0)){this._burstLength&&this._burst++==this._burstLength?(this._burst=0,this._cooldown=4*this._cooldownLength):this._cooldown=this._cooldownLength;var s=5e3;i.x*=s,i.y*=s,i.x+=r(),i.y+=r();var o=this._room._space.addBody(new cp.Body(1,cp.momentForCircle(1,1,2,cp.vzero))),a=this._room._space.addShape(new cp.CircleShape(o,2,cp.vzero));o.vx=i.x,o.vy=i.y;var c=o.velocity_func.bind(o);o.velocity_func=function(t,e,n){c(cp.vzero,e,n)};var l=cp.v.mult(cp.v.normalize(cp.v(i.x,i.y)),50);o.p=cp.v(t.x+l.x,t.y+l.y);var h=new e({body:o});h.id="projectile",h.damage={amount:20},a.setCollisionType("projectile"),a.__entity=this._room.addChild(h),n.Sound.play("shot")}},i}),define("entityMixins/Health",["require","util/log","Events"],function(t){var e=t("util/log")("Health"),n=t("Events"),i=function(){this._percentage=100};return n.initialise(i),i.prototype.applyDamage=function(t){this._percentage-=t.amount,this._percentage<=0&&this.trigger("depleted")},{addTo:function(t){var n=new i;return t.isAlive=function(){return n._percentage>=0},t.on("collide",function(t){t.other&&t.other.damage&&(e.debug("Applying damage "+t.other.damage),n.applyDamage(t.other.damage))}),n}}}),define("PlayerFactory",["require","ChipmunkCharacterHandling","ActorKeyboardController","res/Vrenna","Actor","actors/Weapon","entityMixins/Health","lib/chipmunk","lib/easel"],function(t){var e=t("ChipmunkCharacterHandling"),n=t("ActorKeyboardController"),i=t("res/Vrenna"),r=t("Actor"),s=t("actors/Weapon"),o=t("entityMixins/Health"),a=t("lib/chipmunk"),c=t("lib/easel"),l=function(t){};return l.prototype.createInRoom=function(t,l){function h(){var n=100,l=t._space.addBody(new a.Body(n,1/0));l.setPos(a.v(1664,1344));var h=t._space.addShape(new a.CircleShape(l,20,a.v(0,-20))),u=h;h.setFriction(1),h.setElasticity(0),h.setCollisionType("actor"),h=t._space.addShape(new a.CircleShape(l,15,a.v(0,-40))),h.setFriction(1),h.setElasticity(0),h.setCollisionType("actor");var p={aim:{x:1,y:0}};l.velocity_func=e.velocityFunctionFor(l,u,p);var d=new s({room:t});t.addChild(d);var f=new r({sprite:new c.Sprite(i,"idle"),body:l,controller:p,driver:u,room:t,weapon:d});u.__entity=f,h.__entity=f;o.addTo(f);return f.id="player",f}var u=h();t.addChild(u);var p=new n(u._controller);return $(document).keydown(p.handleKeyDown.bind(p)),$(document).keyup(p.handleKeyUp.bind(p)),$(document).mousedown(p.handleMouseDown.bind(p)),$(document).mouseup(p.handleMouseUp.bind(p)),c.Ticker.addEventListener("tick",function(){var t=l.getLocalMousePosition(),e={};e.x=t.x,e.y=t.y,p.handleMouseMove(e)}),u},l}),function(t){define("lib/buckets",[],function(){return function(){return buckets={},function(){"use strict";buckets.defaultCompare=function(t,e){return e>t?-1:t===e?0:1},buckets.defaultEquals=function(t,e){return t===e},buckets.defaultToString=function(t){return null===t?"BUCKETS_NULL":buckets.isUndefined(t)?"BUCKETS_UNDEFINED":buckets.isString(t)?t:t.toString()},buckets.isFunction=function(t){return"function"==typeof t},buckets.isUndefined=function(t){return"undefined"==typeof t},buckets.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},buckets.reverseCompareFunction=function(t){return buckets.isFunction(t)?function(e,n){return-1*t(e,n)}:function(t,e){return e>t?1:t===e?0:-1}},buckets.compareToEquals=function(t){return function(e,n){return 0===t(e,n)}},buckets.arrays={},buckets.arrays.indexOf=function(t,e,n){for(var i=n||buckets.defaultEquals,r=t.length,s=0;r>s;s++)if(i(t[s],e))return s;return-1},buckets.arrays.lastIndexOf=function(t,e,n){for(var i=n||buckets.defaultEquals,r=t.length,s=r-1;s>=0;s--)if(i(t[s],e))return s;return-1},buckets.arrays.contains=function(t,e,n){return buckets.arrays.indexOf(t,e,n)>=0},buckets.arrays.remove=function(t,e,n){var i=buckets.arrays.indexOf(t,e,n);return 0>i?!1:(t.splice(i,1),!0)},buckets.arrays.frequency=function(t,e,n){for(var i=n||buckets.defaultEquals,r=t.length,s=0,o=0;r>o;o++)i(t[o],e)&&s++;return s},buckets.arrays.equals=function(t,e,n){var i=n||buckets.defaultEquals;if(t.length!==e.length)return!1;for(var r=t.length,s=0;r>s;s++)if(!i(t[s],e[s]))return!1;return!0},buckets.arrays.copy=function(t){return t.concat()},buckets.arrays.swap=function(t,e,n){if(0>e||e>=t.length||0>n||n>=t.length)return!1;var i=t[e];return t[e]=t[n],t[n]=i,!0},buckets.arrays.forEach=function(t,e){for(var n=t.length,i=0;n>i;i++)if(e(t[i])===!1)return},buckets.LinkedList=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},buckets.LinkedList.prototype.add=function(t,e){if(buckets.isUndefined(e)&&(e=this.nElements),0>e||e>this.nElements||buckets.isUndefined(t))return!1;var n=this.createNode(t);if(0===this.nElements)this.firstNode=n,this.lastNode=n;else if(e===this.nElements)this.lastNode.next=n,this.lastNode=n;else if(0===e)n.next=this.firstNode,this.firstNode=n;else{var i=this.nodeAtIndex(e-1);n.next=i.next,i.next=n}return this.nElements++,!0},buckets.LinkedList.prototype.first=function(){return null!==this.firstNode?this.firstNode.element:void 0},buckets.LinkedList.prototype.last=function(){return null!==this.lastNode?this.lastNode.element:void 0},buckets.LinkedList.prototype.elementAtIndex=function(t){var e=this.nodeAtIndex(t);if(null!==e)return e.element},buckets.LinkedList.prototype.indexOf=function(t,e){var n=e||buckets.defaultEquals;if(buckets.isUndefined(t))return-1;for(var i=this.firstNode,r=0;null!==i;){if(n(i.element,t))return r;r++,i=i.next}return-1},buckets.LinkedList.prototype.contains=function(t,e){return this.indexOf(t,e)>=0},buckets.LinkedList.prototype.remove=function(t,e){var n=e||buckets.defaultEquals;if(this.nElements<1||buckets.isUndefined(t))return!1;for(var i=null,r=this.firstNode;null!==r;){if(n(r.element,t))return r===this.firstNode?(this.firstNode=this.firstNode.next,r===this.lastNode&&(this.lastNode=null)):r===this.lastNode?(this.lastNode=i,i.next=r.next,r.next=null):(i.next=r.next,r.next=null),this.nElements--,!0;i=r,r=r.next}return!1},buckets.LinkedList.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},buckets.LinkedList.prototype.equals=function(t,e){var n=e||buckets.defaultEquals;return t instanceof buckets.LinkedList?this.size()!==t.size()?!1:this.equalsAux(this.firstNode,t.firstNode,n):!1},buckets.LinkedList.prototype.equalsAux=function(t,e,n){for(;null!==t;){if(!n(t.element,e.element))return!1;t=t.next,e=e.next}return!0},buckets.LinkedList.prototype.removeElementAtIndex=function(t){if(!(0>t||t>=this.nElements)){var e;if(1===this.nElements)e=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var n=this.nodeAtIndex(t-1);null===n?(e=this.firstNode.element,this.firstNode=this.firstNode.next):n.next===this.lastNode&&(e=this.lastNode.element,this.lastNode=n),null!==n&&(e=n.next.element,n.next=n.next.next)}return this.nElements--,e}},buckets.LinkedList.prototype.forEach=function(t){for(var e=this.firstNode;null!==e&&t(e.element)!==!1;)e=e.next},buckets.LinkedList.prototype.reverse=function(){for(var t=null,e=this.firstNode,n=null;null!==e;)n=e.next,e.next=t,t=e,e=n;n=this.firstNode,this.firstNode=this.lastNode,this.lastNode=n},buckets.LinkedList.prototype.toArray=function(){for(var t=[],e=this.firstNode;null!==e;)t.push(e.element),e=e.next;return t},buckets.LinkedList.prototype.size=function(){return this.nElements},buckets.LinkedList.prototype.isEmpty=function(){return this.nElements<=0},buckets.LinkedList.prototype.nodeAtIndex=function(t){if(0>t||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var e=this.firstNode,n=0;t>n;n++)e=e.next;return e},buckets.LinkedList.prototype.createNode=function(t){return{element:t,next:null}},buckets.Dictionary=function(t){this.table={},this.nElements=0,this.toStr=t||buckets.defaultToString},buckets.Dictionary.prototype.get=function(t){var e=this.table[this.toStr(t)];if(!buckets.isUndefined(e))return e.value},buckets.Dictionary.prototype.set=function(t,e){if(!buckets.isUndefined(t)&&!buckets.isUndefined(e)){var n,i=this.toStr(t),r=this.table[i];return buckets.isUndefined(r)?(this.nElements++,n=void 0):n=r.value,this.table[i]={key:t,value:e},n}},buckets.Dictionary.prototype.remove=function(t){var e=this.toStr(t),n=this.table[e];return buckets.isUndefined(n)?void 0:(delete this.table[e],this.nElements--,n.value)},buckets.Dictionary.prototype.keys=function(){var t=[];for(var e in this.table)this.table.hasOwnProperty(e)&&t.push(this.table[e].key);return t},buckets.Dictionary.prototype.values=function(){var t=[];for(var e in this.table)this.table.hasOwnProperty(e)&&t.push(this.table[e].value);return t},buckets.Dictionary.prototype.forEach=function(t){for(var e in this.table)if(this.table.hasOwnProperty(e)){var n=this.table[e],i=t(n.key,n.value);if(i===!1)return}},buckets.Dictionary.prototype.containsKey=function(t){return!buckets.isUndefined(this.get(t))},buckets.Dictionary.prototype.clear=function(){this.table={},this.nElements=0},buckets.Dictionary.prototype.size=function(){return this.nElements},buckets.Dictionary.prototype.isEmpty=function(){return this.nElements<=0},buckets.MultiDictionary=function(t,e){this.parent=new buckets.Dictionary(t),this.equalsF=e||buckets.defaultEquals},buckets.MultiDictionary.prototype.get=function(t){var e=this.parent.get(t);return buckets.isUndefined(e)?[]:buckets.arrays.copy(e)},buckets.MultiDictionary.prototype.set=function(t,e){if(buckets.isUndefined(t)||buckets.isUndefined(e))return!1;if(!this.containsKey(t))return this.parent.set(t,[e]),!0;var n=this.parent.get(t);return buckets.arrays.contains(n,e,this.equalsF)?!1:(n.push(e),!0)},buckets.MultiDictionary.prototype.remove=function(t,e){if(buckets.isUndefined(e)){var n=this.parent.remove(t);return buckets.isUndefined(n)?!1:!0}var i=this.parent.get(t);return buckets.arrays.remove(i,e,this.equalsF)?(0===i.length&&this.parent.remove(t),
!0):!1},buckets.MultiDictionary.prototype.keys=function(){return this.parent.keys()},buckets.MultiDictionary.prototype.values=function(){for(var t=this.parent.values(),e=[],n=0;n<t.length;n++)for(var i=t[n],r=0;r<i.length;r++)e.push(i[r]);return e},buckets.MultiDictionary.prototype.containsKey=function(t){return this.parent.containsKey(t)},buckets.MultiDictionary.prototype.clear=function(){return this.parent.clear()},buckets.MultiDictionary.prototype.size=function(){return this.parent.size()},buckets.MultiDictionary.prototype.isEmpty=function(){return this.parent.isEmpty()},buckets.Heap=function(t){this.data=[],this.compare=t||buckets.defaultCompare},buckets.Heap.prototype.leftChildIndex=function(t){return 2*t+1},buckets.Heap.prototype.rightChildIndex=function(t){return 2*t+2},buckets.Heap.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},buckets.Heap.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},buckets.Heap.prototype.siftUp=function(t){for(var e=this.parentIndex(t);t>0&&this.compare(this.data[e],this.data[t])>0;)buckets.arrays.swap(this.data,e,t),t=e,e=this.parentIndex(t)},buckets.Heap.prototype.siftDown=function(t){for(var e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));e>=0&&this.compare(this.data[t],this.data[e])>0;)buckets.arrays.swap(this.data,e,t),t=e,e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t))},buckets.Heap.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},buckets.Heap.prototype.add=function(t){return buckets.isUndefined(t)?void 0:(this.data.push(t),this.siftUp(this.data.length-1),!0)},buckets.Heap.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}},buckets.Heap.prototype.contains=function(t){var e=buckets.compareToEquals(this.compare);return buckets.arrays.contains(this.data,t,e)},buckets.Heap.prototype.size=function(){return this.data.length},buckets.Heap.prototype.isEmpty=function(){return this.data.length<=0},buckets.Heap.prototype.clear=function(){this.data.length=0},buckets.Heap.prototype.forEach=function(t){buckets.arrays.forEach(this.data,t)},buckets.Stack=function(){this.list=new buckets.LinkedList},buckets.Stack.prototype.push=function(t){return this.list.add(t,0)},buckets.Stack.prototype.add=function(t){return this.list.add(t,0)},buckets.Stack.prototype.pop=function(){return this.list.removeElementAtIndex(0)},buckets.Stack.prototype.peek=function(){return this.list.first()},buckets.Stack.prototype.size=function(){return this.list.size()},buckets.Stack.prototype.contains=function(t,e){return this.list.contains(t,e)},buckets.Stack.prototype.isEmpty=function(){return this.list.isEmpty()},buckets.Stack.prototype.clear=function(){this.list.clear()},buckets.Stack.prototype.forEach=function(t){this.list.forEach(t)},buckets.Queue=function(){this.list=new buckets.LinkedList},buckets.Queue.prototype.enqueue=function(t){return this.list.add(t)},buckets.Queue.prototype.add=function(t){return this.list.add(t)},buckets.Queue.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}},buckets.Queue.prototype.peek=function(){return 0!==this.list.size()?this.list.first():void 0},buckets.Queue.prototype.size=function(){return this.list.size()},buckets.Queue.prototype.contains=function(t,e){return this.list.contains(t,e)},buckets.Queue.prototype.isEmpty=function(){return this.list.size()<=0},buckets.Queue.prototype.clear=function(){this.list.clear()},buckets.Queue.prototype.forEach=function(t){this.list.forEach(t)},buckets.PriorityQueue=function(t){this.heap=new buckets.Heap(buckets.reverseCompareFunction(t))},buckets.PriorityQueue.prototype.enqueue=function(t){return this.heap.add(t)},buckets.PriorityQueue.prototype.add=function(t){return this.heap.add(t)},buckets.PriorityQueue.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}},buckets.PriorityQueue.prototype.peek=function(){return this.heap.peek()},buckets.PriorityQueue.prototype.contains=function(t){return this.heap.contains(t)},buckets.PriorityQueue.prototype.isEmpty=function(){return this.heap.isEmpty()},buckets.PriorityQueue.prototype.size=function(){return this.heap.size()},buckets.PriorityQueue.prototype.clear=function(){this.heap.clear()},buckets.PriorityQueue.prototype.forEach=function(t){this.heap.forEach(t)},buckets.Set=function(t){this.dictionary=new buckets.Dictionary(t)},buckets.Set.prototype.contains=function(t){return this.dictionary.containsKey(t)},buckets.Set.prototype.add=function(t){return this.contains(t)||buckets.isUndefined(t)?!1:(this.dictionary.set(t,t),!0)},buckets.Set.prototype.intersection=function(t){var e=this;this.forEach(function(n){t.contains(n)||e.remove(n)})},buckets.Set.prototype.union=function(t){var e=this;t.forEach(function(t){e.add(t)})},buckets.Set.prototype.difference=function(t){var e=this;t.forEach(function(t){e.remove(t)})},buckets.Set.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var e=!0;return this.forEach(function(n){return t.contains(n)?void 0:(e=!1,!1)}),e},buckets.Set.prototype.remove=function(t){return this.contains(t)?(this.dictionary.remove(t),!0):!1},buckets.Set.prototype.forEach=function(t){this.dictionary.forEach(function(e,n){return t(n)})},buckets.Set.prototype.toArray=function(){return this.dictionary.values()},buckets.Set.prototype.isEmpty=function(){return this.dictionary.isEmpty()},buckets.Set.prototype.size=function(){return this.dictionary.size()},buckets.Set.prototype.clear=function(){this.dictionary.clear()},buckets.Bag=function(t){this.toStrF=t||buckets.defaultToString,this.dictionary=new buckets.Dictionary(this.toStrF),this.nElements=0},buckets.Bag.prototype.add=function(t,e){if((isNaN(e)||buckets.isUndefined(e))&&(e=1),buckets.isUndefined(t)||0>=e)return!1;if(this.contains(t))this.dictionary.get(t).copies+=e;else{var n={value:t,copies:e};this.dictionary.set(t,n)}return this.nElements+=e,!0},buckets.Bag.prototype.count=function(t){return this.contains(t)?this.dictionary.get(t).copies:0},buckets.Bag.prototype.contains=function(t){return this.dictionary.containsKey(t)},buckets.Bag.prototype.remove=function(t,e){if((isNaN(e)||buckets.isUndefined(e))&&(e=1),buckets.isUndefined(t)||0>=e)return!1;if(this.contains(t)){var n=this.dictionary.get(t);return e>n.copies?this.nElements-=n.copies:this.nElements-=e,n.copies-=e,n.copies<=0&&this.dictionary.remove(t),!0}return!1},buckets.Bag.prototype.toArray=function(){for(var t=[],e=this.dictionary.values(),n=e.length,i=0;n>i;i++)for(var r=e[i],s=r.value,o=r.copies,a=0;o>a;a++)t.push(s);return t},buckets.Bag.prototype.toSet=function(){for(var t=new buckets.Set(this.toStrF),e=this.dictionary.values(),n=e.length,i=0;n>i;i++){var r=e[i].value;t.add(r)}return t},buckets.Bag.prototype.forEach=function(t){this.dictionary.forEach(function(e,n){for(var i=n.value,r=n.copies,s=0;r>s;s++)if(t(i)===!1)return!1;return!0})},buckets.Bag.prototype.size=function(){return this.nElements},buckets.Bag.prototype.isEmpty=function(){return 0===this.nElements},buckets.Bag.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},buckets.BSTree=function(t){this.root=null,this.compare=t||buckets.defaultCompare,this.nElements=0},buckets.BSTree.prototype.add=function(t){return buckets.isUndefined(t)?!1:null!==this.insertNode(this.createNode(t))?(this.nElements++,!0):!1},buckets.BSTree.prototype.clear=function(){this.root=null,this.nElements=0},buckets.BSTree.prototype.isEmpty=function(){return 0===this.nElements},buckets.BSTree.prototype.size=function(){return this.nElements},buckets.BSTree.prototype.contains=function(t){return buckets.isUndefined(t)?!1:null!==this.searchNode(this.root,t)},buckets.BSTree.prototype.remove=function(t){var e=this.searchNode(this.root,t);return null===e?!1:(this.removeNode(e),this.nElements--,!0)},buckets.BSTree.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},buckets.BSTree.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},buckets.BSTree.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},buckets.BSTree.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},buckets.BSTree.prototype.minimum=function(){return this.isEmpty()?void 0:this.minimumAux(this.root).element},buckets.BSTree.prototype.maximum=function(){return this.isEmpty()?void 0:this.maximumAux(this.root).element},buckets.BSTree.prototype.forEach=function(t){this.inorderTraversal(t)},buckets.BSTree.prototype.toArray=function(){var t=[];return this.inorderTraversal(function(e){t.push(e)}),t},buckets.BSTree.prototype.height=function(){return this.heightAux(this.root)},buckets.BSTree.prototype.searchNode=function(t,e){for(var n=null;null!==t&&0!==n;)n=this.compare(e,t.element),0>n?t=t.leftCh:n>0&&(t=t.rightCh);return t},buckets.BSTree.prototype.transplant=function(t,e){null===t.parent?this.root=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,null!==e&&(e.parent=t.parent)},buckets.BSTree.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var e=this.minimumAux(t.rightCh);e.parent!==t&&(this.transplant(e,e.rightCh),e.rightCh=t.rightCh,e.rightCh.parent=e),this.transplant(t,e),e.leftCh=t.leftCh,e.leftCh.parent=e}},buckets.BSTree.prototype.inorderTraversalAux=function(t,e,n){null===t||n.stop||(this.inorderTraversalAux(t.leftCh,e,n),n.stop||(n.stop=e(t.element)===!1,n.stop||this.inorderTraversalAux(t.rightCh,e,n)))},buckets.BSTree.prototype.levelTraversalAux=function(t,e){var n=new buckets.Queue;for(null!==t&&n.enqueue(t);!n.isEmpty();){if(t=n.dequeue(),e(t.element)===!1)return;null!==t.leftCh&&n.enqueue(t.leftCh),null!==t.rightCh&&n.enqueue(t.rightCh)}},buckets.BSTree.prototype.preorderTraversalAux=function(t,e,n){null===t||n.stop||(n.stop=e(t.element)===!1,n.stop||(this.preorderTraversalAux(t.leftCh,e,n),n.stop||this.preorderTraversalAux(t.rightCh,e,n)))},buckets.BSTree.prototype.postorderTraversalAux=function(t,e,n){null===t||n.stop||(this.postorderTraversalAux(t.leftCh,e,n),n.stop||(this.postorderTraversalAux(t.rightCh,e,n),n.stop||(n.stop=e(t.element)===!1)))},buckets.BSTree.prototype.minimumAux=function(t){for(;null!==t.leftCh;)t=t.leftCh;return t},buckets.BSTree.prototype.maximumAux=function(t){for(;null!==t.rightCh;)t=t.rightCh;return t},buckets.BSTree.prototype.successorNode=function(t){if(null!==t.rightCh)return this.minimumAux(t.rightCh);for(var e=t.parent;null!==e&&t===e.rightCh;)t=e,e=t.parent;return e},buckets.BSTree.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},buckets.BSTree.prototype.insertNode=function(t){for(var e=null,n=this.root,i=null;null!==n;){if(i=this.compare(t.element,n.element),0===i)return null;0>i?(e=n,n=n.leftCh):(e=n,n=n.rightCh)}return t.parent=e,null===e?this.root=t:this.compare(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t},buckets.BSTree.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},"undefined"!=typeof module&&(module.exports=buckets)}(),t.buckets=buckets}.apply(t,arguments)})}(this),define("Room",["require","util/log","lib/buckets","lib/sound"],function(t){function e(t,e){var n=t.getShapes();return"strawbear"!=n[0].name||n[0].__entity.dead?"strawbear"!=n[1].name||n[1].__entity.dead?!0:(n[1].__entity.trigger("death"),window.bears--,!1):(n[0].__entity.trigger("death"),window.bears--,!1)}function n(t,e){return t===e?0:t._z<e._z?-1:(t._z>e._z,1)}var i=(t("util/log")("Room"),t("lib/buckets")),r=t("lib/sound"),s=function(t){return!t.getShapes()[0].__entity._remainingDodge},o=function(t){this._space=t,this._space.setDefaultCollisionHandler(null,e),this._space.addCollisionHandler("actor","projectile",s),this._objects=new i.BSTree(n),this._points={},this._limits={width:1/0,height:1/0},this._accumulator=0};const a=1/120,c=1/15;return o.prototype.update=function(t){if(0!==window.bears||window.finished||(window.finished=!0,r.Sound.play("finish")),window.finished)return void $("#win").show();var e=t.delta/1e3;for(e>c&&(e=c),this._accumulator+=e;this._accumulator>a;)this._space.step(a),this._processCollisions(),this._accumulator-=a;this._objects.forEach(function(e){try{e.update&&e.update(t)}catch(n){console.warn("Error updating "+e.constructor.name,n)}})},o.prototype.draw=function(t,e){this._objects.forEach(function(n){n.draw(t,e)})},o.prototype._processCollisions=function(){var t=[];this._space.eachBody(function(e){e.eachArbiter(function(e){e.isFirstContact()&&-1==t.indexOf(e)&&t.push(e)})});for(var e=t.length;e--;){var n=t[e],i=n.getShapes(),r=i[0].__entity,s=i[1].__entity;r&&r.trigger("collide",[{entity:r,shape:i[0],other:s}]),s&&s.trigger("collide",[{entity:s,shape:i[1],other:r}])}},o.prototype.addChild=function(t){return this._objects.add(t),t.on&&t.on("death",function(){if(console.log("removing"),t._body){this._space.removeBody(t._body);for(var e=t._body.shapeList.slice(0),n=e.length;n--;)this._space.removeShape(e[n])}this.removeChild(t)}.bind(this)),t},o.prototype.removeChild=function(t){this._objects.remove(t)},o.prototype.addPoint=function(t,e){this._points[t]=e},o.prototype.getPoint=function(t){return this._points[t]},o.prototype.setLimits=function(t){console.log(t),this._limits=t},o.prototype.getLimits=function(){return{width:this._limits.width,height:this._limits.height}},o}),define("TileLayer",["lib/easel"],function(t){var e=function(t){this.initialize(t)},n=createjs.extend(e,createjs.DisplayObject);return n.initialize=function(t){this.DisplayObject_constructor(),this._z=t.z||0,this.tileSheet=t.tileSheet,this.map=t.map,this.width=t.width,this.height=t.height},n.draw=function(t,e){var n=32,i={};i.x=~~(e.offset.x/n),i.y=~~(e.offset.y/n);var r={};r.x=~~(e.width/n)+2,r.y=~~(e.height/n)+2;for(var s=this.width,o=(this.height,i.x);o<i.x+r.x;o++)for(var a=i.y;a<i.y+r.y;a++)this.tileSheet.draw(t,o,a,this.map[a*s+o]);return!0},createjs.promote(e,"DisplayObject")}),define("res/Strawbear",["require","lib/easel"],function(t){var e=t("lib/easel"),n=new e.SpriteSheet({images:["data/strawbear.png"],frames:[[0,0,32,32,0]]});return n}),define("Entity",["require","Events","lib/sound"],function(t){function e(t,e){t.save(),e.updateContext(t),e.draw(t),t.restore()}var n=t("Events"),i=t("lib/sound"),r=function(t){this._z=t.z||0,this._sprite=t.sprite,this._shape=t.shape,this._sensor=t.sensor;var e=this;this.on("death",function(){i.Sound.play("collect"),e.dead=!0})};return n.initialise(r),r.prototype.update=function(t){this._sprite.x=this._shape.bb_l,this._sprite.y=this._shape.bb_b,this._sprite.advance(t.delta)},r.prototype.draw=function(t,n){e(t,this._sprite)},r}),define("debug/ChipmunkSpaceRenderer",[],function(){var t=function(t){this._space=t};return t.prototype.draw=function(t){window.renderSpace===!0&&(this._space.eachShape(function(e){if(t.globalAlpha=.2,"poly"==e.type){t.fillStyle="lime",t.beginPath(),t.moveTo(e.tVerts[0],e.tVerts[1]);for(var n=2;n<e.tVerts.length;n+=2)t.lineTo(e.tVerts[n],e.tVerts[n+1]);t.fill()}else"circle"==e.type?(t.fillStyle=e.sensor?"red":"blue",t.strokeStyle=e.sensor?"red":"blue",t.beginPath(),t.arc(e.body.p.x+e.c.x,e.body.p.y+e.c.y,e.r,0,360),t.globalAlpha=.1,t.fill(),t.globalAlpha=.5,t.lineWidth=1,t.stroke()):(t.strokeStyle="red",t.beginPath(),t.lineWidth=2*e.r,t.moveTo(e.ta.x,e.ta.y),t.lineTo(e.tb.x,e.tb.y),t.stroke())}),t.globalAlpha=.5,this._space.eachBody(function(e){e.eachArbiter(function(e){t.fillStyle="orange",t.beginPath();var n=e.getPoint(0);t.arc(n.x,n.y,2,0,360),t.fill()})}),t.globalAlpha=1)},t});var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";define("util/base64",[],function(){return{decode:function(t){var e,n,i,r,s,o,a,c=[],l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)r=keyStr.indexOf(t.charAt(l++)),s=keyStr.indexOf(t.charAt(l++)),o=keyStr.indexOf(t.charAt(l++)),a=keyStr.indexOf(t.charAt(l++)),e=r<<2|s>>4,n=(15&s)<<4|o>>2,i=(3&o)<<6|a,c.push(String.fromCharCode(e)),64!=o&&c.push(String.fromCharCode(n)),64!=a&&c.push(String.fromCharCode(i));return c=c.join("")},decodeAsArray:function(t,e){e=e||1;var n,i,r=this.decode(t),s=r.length/e,o=[];for(n=0;s>n;n++)for(o[n]=0,i=e-1;i>=0;--i)o[n]+=r.charCodeAt(n*e+i)<<(i<<3);return o}}}),!function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("lib/poly-decomp",t):"undefined"!=typeof window?window.decomp=t():"undefined"!=typeof global?global.decomp=t():"undefined"!=typeof self&&(self.decomp=t())}(function(){return function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return r(n?n:t)},l,l.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){function i(){}var r=t("./Scalar");e.exports=i,i.lineInt=function(t,e,n){n=n||0;var i,s,o,a,c,l,h,u=[0,0];return i=t[1][1]-t[0][1],s=t[0][0]-t[1][0],o=i*t[0][0]+s*t[0][1],a=e[1][1]-e[0][1],c=e[0][0]-e[1][0],l=a*e[0][0]+c*e[0][1],h=i*c-a*s,r.eq(h,0,n)||(u[0]=(c*o-s*l)/h,u[1]=(i*l-a*o)/h),u},i.segmentsIntersect=function(t,e,n,i){var r=e[0]-t[0],s=e[1]-t[1],o=i[0]-n[0],a=i[1]-n[1];if(o*s-a*r==0)return!1;var c=(r*(n[1]-t[1])+s*(t[0]-n[0]))/(o*s-a*r),l=(o*(t[1]-n[1])+a*(n[0]-t[0]))/(a*r-o*s);return c>=0&&1>=c&&l>=0&&1>=l}},{"./Scalar":4}],2:[function(t,e,n){function i(){}e.exports=i,i.area=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])},i.left=function(t,e,n){return i.area(t,e,n)>0},i.leftOn=function(t,e,n){return i.area(t,e,n)>=0},i.right=function(t,e,n){return i.area(t,e,n)<0},i.rightOn=function(t,e,n){return i.area(t,e,n)<=0};var r=[],s=[];i.collinear=function(t,e,n,o){if(o){var a=r,c=s;a[0]=e[0]-t[0],a[1]=e[1]-t[1],c[0]=n[0]-e[0],c[1]=n[1]-e[1];var l=a[0]*c[0]+a[1]*c[1],h=Math.sqrt(a[0]*a[0]+a[1]*a[1]),u=Math.sqrt(c[0]*c[0]+c[1]*c[1]),p=Math.acos(l/(h*u));return o>p}return 0==i.area(t,e,n)},i.sqdist=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}},{}],3:[function(t,e,n){function i(){this.vertices=[]}function r(t,e,n,i,r){r=r||0;var s=e[1]-t[1],o=t[0]-e[0],c=s*t[0]+o*t[1],l=i[1]-n[1],h=n[0]-i[0],u=l*n[0]+h*n[1],p=s*h-l*o;return a.eq(p,0,r)?[0,0]:[(h*c-o*u)/p,(s*u-l*c)/p]}var s=t("./Line"),o=t("./Point"),a=t("./Scalar");e.exports=i,i.prototype.at=function(t){var e=this.vertices,n=e.length;return e[0>t?t%n+n:t%n]},i.prototype.first=function(){return this.vertices[0]},i.prototype.last=function(){return this.vertices[this.vertices.length-1]},i.prototype.clear=function(){this.vertices.length=0},i.prototype.append=function(t,e,n){if("undefined"==typeof e)throw new Error("From is not given!");if("undefined"==typeof n)throw new Error("To is not given!");if(e>n-1)throw new Error("lol1");if(n>t.vertices.length)throw new Error("lol2");if(0>e)throw new Error("lol3");for(var i=e;n>i;i++)this.vertices.push(t.vertices[i])},i.prototype.makeCCW=function(){for(var t=0,e=this.vertices,n=1;n<this.vertices.length;++n)(e[n][1]<e[t][1]||e[n][1]==e[t][1]&&e[n][0]>e[t][0])&&(t=n);o.left(this.at(t-1),this.at(t),this.at(t+1))||this.reverse()},i.prototype.reverse=function(){for(var t=[],e=0,n=this.vertices.length;e!==n;e++)t.push(this.vertices.pop());this.vertices=t},i.prototype.isReflex=function(t){return o.right(this.at(t-1),this.at(t),this.at(t+1))};var c=[],l=[];i.prototype.canSee=function(t,e){var n,i,r=c,a=l;if(o.leftOn(this.at(t+1),this.at(t),this.at(e))&&o.rightOn(this.at(t-1),this.at(t),this.at(e)))return!1;i=o.sqdist(this.at(t),this.at(e));for(var h=0;h!==this.vertices.length;++h)if((h+1)%this.vertices.length!==t&&h!==t&&o.leftOn(this.at(t),this.at(e),this.at(h+1))&&o.rightOn(this.at(t),this.at(e),this.at(h))&&(r[0]=this.at(t),r[1]=this.at(e),a[0]=this.at(h),a[1]=this.at(h+1),n=s.lineInt(r,a),o.sqdist(this.at(t),n)<i))return!1;return!0},i.prototype.copy=function(t,e,n){var r=n||new i;if(r.clear(),e>t)for(var s=t;e>=s;s++)r.vertices.push(this.vertices[s]);else{for(var s=0;e>=s;s++)r.vertices.push(this.vertices[s]);for(var s=t;s<this.vertices.length;s++)r.vertices.push(this.vertices[s])}return r},i.prototype.getCutEdges=function(){for(var t=[],e=[],n=[],r=new i,s=Number.MAX_VALUE,o=0;o<this.vertices.length;++o)if(this.isReflex(o))for(var a=0;a<this.vertices.length;++a)if(this.canSee(o,a)){e=this.copy(o,a,r).getCutEdges(),n=this.copy(a,o,r).getCutEdges();for(var c=0;c<n.length;c++)e.push(n[c]);e.length<s&&(t=e,s=e.length,t.push([this.at(o),this.at(a)]))}return t},i.prototype.decomp=function(){var t=this.getCutEdges();return t.length>0?this.slice(t):[this]},i.prototype.slice=function(t){if(0==t.length)return[this];if(t instanceof Array&&t.length&&t[0]instanceof Array&&2==t[0].length&&t[0][0]instanceof Array){for(var e=[this],n=0;n<t.length;n++)for(var i=t[n],r=0;r<e.length;r++){var s=e[r],o=s.slice(i);if(o){e.splice(r,1),e.push(o[0],o[1]);break}}return e}var i=t,n=this.vertices.indexOf(i[0]),r=this.vertices.indexOf(i[1]);return-1!=n&&-1!=r?[this.copy(n,r),this.copy(r,n)]:!1},i.prototype.isSimple=function(){for(var t=this.vertices,e=0;e<t.length-1;e++)for(var n=0;e-1>n;n++)if(s.segmentsIntersect(t[e],t[e+1],t[n],t[n+1]))return!1;for(var e=1;e<t.length-2;e++)if(s.segmentsIntersect(t[0],t[t.length-1],t[e],t[e+1]))return!1;return!0},i.prototype.quickDecomp=function(t,e,n,s,a,c){a=a||100,c=c||0,s=s||25,t="undefined"!=typeof t?t:[],e=e||[],n=n||[];var l=[0,0],h=[0,0],u=[0,0],p=0,d=0,f=0,g=0,m=0,v=0,y=0,_=new i,b=new i,x=this,w=this.vertices;if(w.length<3)return t;if(c++,c>a)return console.warn("quickDecomp: max level ("+a+") reached."),t;for(var E=0;E<this.vertices.length;++E)if(x.isReflex(E)){e.push(x.vertices[E]),p=d=Number.MAX_VALUE;for(var S=0;S<this.vertices.length;++S)o.left(x.at(E-1),x.at(E),x.at(S))&&o.rightOn(x.at(E-1),x.at(E),x.at(S-1))&&(u=r(x.at(E-1),x.at(E),x.at(S),x.at(S-1)),o.right(x.at(E+1),x.at(E),u)&&(f=o.sqdist(x.vertices[E],u),d>f&&(d=f,h=u,v=S))),o.left(x.at(E+1),x.at(E),x.at(S+1))&&o.rightOn(x.at(E+1),x.at(E),x.at(S))&&(u=r(x.at(E+1),x.at(E),x.at(S),x.at(S+1)),o.left(x.at(E-1),x.at(E),u)&&(f=o.sqdist(x.vertices[E],u),p>f&&(p=f,l=u,m=S)));if(v==(m+1)%this.vertices.length)u[0]=(h[0]+l[0])/2,u[1]=(h[1]+l[1])/2,n.push(u),m>E?(_.append(x,E,m+1),_.vertices.push(u),b.vertices.push(u),0!=v&&b.append(x,v,x.vertices.length),b.append(x,0,E+1)):(0!=E&&_.append(x,E,x.vertices.length),_.append(x,0,m+1),_.vertices.push(u),b.vertices.push(u),b.append(x,v,E+1));else{if(v>m&&(m+=this.vertices.length),g=Number.MAX_VALUE,v>m)return t;for(var S=v;m>=S;++S)o.leftOn(x.at(E-1),x.at(E),x.at(S))&&o.rightOn(x.at(E+1),x.at(E),x.at(S))&&(f=o.sqdist(x.at(E),x.at(S)),g>f&&(g=f,y=S%this.vertices.length));y>E?(_.append(x,E,y+1),0!=y&&b.append(x,y,w.length),b.append(x,0,E+1)):(0!=E&&_.append(x,E,w.length),_.append(x,0,y+1),b.append(x,y,E+1))}return _.vertices.length<b.vertices.length?(_.quickDecomp(t,e,n,s,a,c),b.quickDecomp(t,e,n,s,a,c)):(b.quickDecomp(t,e,n,s,a,c),_.quickDecomp(t,e,n,s,a,c)),t}return t.push(this),t},i.prototype.removeCollinearPoints=function(t){for(var e=0,n=this.vertices.length-1;this.vertices.length>3&&n>=0;--n)o.collinear(this.at(n-1),this.at(n),this.at(n+1),t)&&(this.vertices.splice(n%this.vertices.length,1),n--,e++);return e}},{"./Line":1,"./Point":2,"./Scalar":4}],4:[function(t,e,n){function i(){}e.exports=i,i.eq=function(t,e,n){return n=n||0,Math.abs(t-e)<n}},{}],5:[function(t,e,n){e.exports={Polygon:t("./Polygon"),Point:t("./Point")}},{"./Point":2,"./Polygon":3}]},{},[5])(5)}),define("TMXTileLayerBuilder",["require","util/log","lib/jquery","util/base64","lib/poly-decomp"],function(t){function e(t){var e={};return t.find("property").each(function(){e[r(this).attr("name")]=r(this).attr("value")}),e}function n(t){if("base64"===t.attr("encoding")&&"zlib"!==t.attr("compression"))return s.decodeAsArray(t.text(),4);throw Error("Unsupported TMX tile data format.")}var i=t("util/log")("TMXTileLayerBuilder"),r=t("lib/jquery"),s=t("util/base64"),o=t("lib/poly-decomp"),a=function(t){this.$doc=t};return a.prototype.eachLayer=function(t){this.$doc.find("layer").each(function(i,s){var o=e(r(this));t({data:n(r(this).find("data")),width:parseInt(r(this).attr("width"),10),height:parseInt(r(this).attr("height"),10),z:o.z})})},a.prototype.eachCollisionObject=function(t){this.$doc.find("objectgroup[name='Terrain'] object polygon").each(function(e,n){var s=r(this).parent().attr("x"),a=r(this).parent().attr("y");s=parseInt(s,10),a=parseInt(a,10);for(var c=r(this).attr("points"),l=c.split(" "),h=new o.Polygon,u=0;u<l.length;u++){var p=l[u].split(","),d=parseInt(p[0],10),f=parseInt(p[1],10);h.vertices.push([s+d,a+f])}if(!h.isSimple())return void i.warn("Ignoring polygon starting at ["+s+","+a+"]: Not simple.");h.removeCollinearPoints(.1);var g=h.quickDecomp([]);for(var m in g)g[m].vertices.reverse(),t({vertices:Array.prototype.concat.apply([],g[m].vertices)})})},a.prototype.eachTerrainPolygon=function(t){this.$doc.find("objectgroup[name='Terrain'] object polygon").each(function(e,n){var i=r(this).parent().attr("x"),s=r(this).parent().attr("y");i=parseInt(i,10),s=parseInt(s,10);for(var o=r(this).attr("points"),a=o.split(" "),c=[],l=0;l<a.length;l++){var h=a[l].split(","),u=parseInt(h[0],10),p=parseInt(h[1],10);c.push(i+u),c.push(s+p)}t(c)})},a.prototype.eachBackgroundPolygon=function(t){this.$doc.find("objectgroup[name='Background'] object polygon").each(function(e,n){var i=r(this).parent().attr("x"),s=r(this).parent().attr("y");i=parseInt(i,10),s=parseInt(s,10);for(var o=r(this).attr("points"),a=o.split(" "),c=[],l=0;l<a.length;l++){var h=a[l].split(","),u=parseInt(h[0],10),p=parseInt(h[1],10);c.push(i+u),c.push(s+p)}t(c)})},a.prototype.eachObject=function(t){this.$doc.find("objectgroup[name='Objects'] object").each(function(n,i){var s=e(r(this));t({type:r(this).attr("type"),name:r(this).attr("name"),position:{x:parseInt(r(this).attr("x"),10),y:parseInt(r(this).attr("y"),10)},properties:s})})},a}),define("TileSheet",[],function(){var t=function(t,e){this.bitmap=t,this.image=t.image,this.width=t.getBounds().width,this.height=t.getBounds().height,this.grid={spacing:e,width:~~(this.width/e),height:~~(this.height/e)}};return t.prototype.draw=function(t,e,n,i){if(!(1>i||i>this.grid.width*this.grid.height)){i--;var r=~~(i/this.grid.width),s=i-r*this.grid.width,o={x:s*this.grid.spacing,y:r*this.grid.spacing};t.drawImage(this.bitmap.image,o.x,o.y,this.grid.spacing,this.grid.spacing,e*this.grid.spacing,n*this.grid.spacing,this.grid.spacing,this.grid.spacing)}},t}),define("TMXRoomBuilder",["require","lib/chipmunk","Room","TileLayer","res/Strawbear","Entity","debug/ChipmunkSpaceRenderer","TMXTileLayerBuilder","TileSheet"],function(t){function e(){var t=new n.Space;return t.iterations=1,t.gravity=n.v(0,2500),t.collisionSlop=.001,t}var n=t("lib/chipmunk"),i=t("Room"),r=t("TileLayer"),s=t("res/Strawbear"),o=t("Entity"),a=(t("debug/ChipmunkSpaceRenderer"),t("TMXTileLayerBuilder")),c=t("TileSheet"),l=function(t){};return l.prototype.build=function(t){var l=e(),h=new i(l),u={},p=0,d=0,f=new c(new createjs.Bitmap(t.tileSheetImage),32),g=new a($(t.file));return g.eachLayer(function(t){var e=new r({tileSheet:f,map:t.data,width:t.width,height:t.height,z:t.z});h.addChild(e),t.height*f.grid.spacing>d&&(d=t.height*f.grid.spacing),t.width*f.grid.spacing>p&&(p=t.width*f.grid.spacing)}),h.setLimits({width:p,height:d}),g.eachTerrainPolygon(function(t){var e=new n.PolyShape(l.staticBody,t,n.vzero);e.setCollisionType("terrain"),e.group=1,e.e=0,e.u=.5,l.addShape(e)}),g.eachObject(function(e){switch(e.type){case"point":h.addPoint(e.name,e.position);break;case"strawbear":var i=l.addShape(new n.BoxShape2(l.staticBody,{l:e.position.x,b:e.position.y,t:e.position.y+32,r:e.position.x+32}));i.setSensor(!0);var r=new createjs.Sprite(s),a=new o({sprite:r,shape:i,sensor:i,z:e.properties.z});h.addChild(a),u[e.name]=a,i.__entity=a,i.name="strawbear",window.bears++;break;default:console.warn("Unknown object type '"+e.type+"' in file '"+t.fileId)}}),h},l}),define("Viewport",["lib/easel"],function(t){var e=function(t){this.Stage_constructor(t.id),this._bounds=t.bounds,this._objects=[],this._offset={x:0,y:0},this._limits={width:1/0,height:1/0},this._focusStrategy=function(){return{x:0,y:0}}},n=createjs.extend(e,createjs.Stage);return n.setFocusStrategy=function(t){this._focusStrategy=t},n.update=function(t){var e=this._focusStrategy(this._geometry());this._offset=e.offset,this._target=e.target,this.Stage_update(t)},n.addObject=function(t){this._objects.push(t)},n.setLimits=function(t){this._limits=t},n.draw=function(t,e){t.save(),t.beginPath(),t.rect(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),t.clip(),t.fillStyle="#004488",t.fill(),t.translate(this._bounds.x-this._offset.x,this._bounds.y-this._offset.y),this._target.draw(t,this._geometry()),this.Stage_draw(t,e),t.restore()},n._geometry=function(){return{offset:this._offset,width:this._bounds.width,height:this._bounds.height}},n.getLocalMousePosition=function(){return this._globalToLocal(this.mouseX,this.mouseY)},n._globalToLocal=function(t,e){return{x:this._offset.x-this._bounds.x+t,y:this._offset.y-this._bounds.y+e}},createjs.promote(e,"Stage")}),define("ViewportFactory",["require","lib/jquery","lib/easel","Viewport"],function(t){var e=t("lib/jquery"),n=(t("lib/easel"),t("Viewport")),i=function(t){};return i.prototype.create=function(t,i,r){var s=e("<canvas id='"+t+"'></canvas>");s.get(0).width=i,s.get(0).height=r;s.css("width",i+"px"),s.css("height",r+"px"),e("body").append(s);var o=new n({bounds:{x:0,y:0,width:i,height:r},id:t});return o},i}),require.config({baseUrl:"src",shim:{"lib/easel":{exports:"createjs"},"lib/sound":{exports:"createjs"},"lib/preload":{exports:"createjs"},"lib/chipmunk":{exports:"cp"},"lib/jquery":{exports:"$"},"lib/jquery-ui":{exports:"$",deps:["lib/jquery"]},"lib/buckets":{exports:"buckets"},"lib/two":{exports:"Two"},"lib/log4javascript":{exports:"log4javascript"},"lib/dat.gui":{exports:"dat"}},paths:{lib:"../lib",res:"../resources"}}),require(["lib/jquery","lib/easel","lib/preload","lib/sound","ViewportKeyboardController","FocusStrategy","PlayerFactory","TMXRoomBuilder","ViewportFactory"],function(t,e,n,i,r,s,o,a,c){window.bears=0,t(document).ready(function(){function i(t){function n(t){h.update(t)}var i=new a,r=new c,h=i.build({file:l.getResult("main.tmx"),tileSheetImage:l.getResult("tilesheet")}),u=r.create("home",640,480);e.Ticker.addEventListener("tick",u);var p=new o,d=p.createInRoom(h,u);u.setFocusStrategy(s.focusOnEntity(d,h)),window.playerOne=d,window.home=h,window.viewport=u,e.Ticker.addEventListener("tick",n)}function r(t){console.log(t)}e.Ticker.timingMode=e.Ticker.RAF,t("body").on("contextmenu",function(t){return!1});var l=new n.LoadQueue(!0),h=[{src:"data/tilesheet.png",id:"tilesheet"},{src:"data/home.tmx",id:"main.tmx"}];e.Sound.registerSound("data/jump.wav","jump"),e.Sound.registerSound("data/collect.wav","collect"),e.Sound.registerSound("data/finish.wav","finish"),l.on("complete",i),l.on("error",r),l.loadManifest(h,!1),l.load()})}),define("main",function(){});